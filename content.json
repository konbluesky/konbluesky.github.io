{"posts":[{"title":"å…³äº2FA","text":"ä»€ä¹ˆæ˜¯ 2FAï¼Ÿ2FAï¼ˆTwo-Factor Authenticationï¼‰ï¼Œå³åŒå› ç´ è®¤è¯ï¼Œæ˜¯ä¸€ç§é€šè¿‡ä¸¤ç§ä¸åŒç±»åˆ«çš„éªŒè¯æ‰‹æ®µæ¥æé«˜è´¦æˆ·å®‰å…¨æ€§çš„èº«ä»½éªŒè¯æ–¹æ³•ã€‚å®ƒé€šè¿‡ç»“åˆä¸¤ä¸ªéªŒè¯å› ç´ ï¼Œç¡®ä¿å³ä½¿ä¸€ä¸ªéªŒè¯æ‰‹æ®µè¢«æ³„éœ²ï¼Œæ”»å‡»è€…ä¹Ÿéš¾ä»¥å®Œæˆèº«ä»½å†’å……ã€‚ ä¸¤ç§éªŒè¯å› ç´ çš„ç±»å‹ï¼š çŸ¥è¯†ï¼ˆSomething you knowï¼‰ ç”¨æˆ·çŸ¥é“çš„å†…å®¹ï¼Œå¦‚å¯†ç ã€PIN ç ç­‰ã€‚ æ‹¥æœ‰ï¼ˆSomething you haveï¼‰ ç”¨æˆ·æ‹¥æœ‰çš„ç‰©å“ï¼Œå¦‚æ‰‹æœºã€ç¡¬ä»¶ä»¤ç‰Œï¼ˆTokenï¼‰æˆ–åŠ¨æ€éªŒè¯ç ï¼ˆOTPï¼‰ã€‚ ç”Ÿç‰©ç‰¹å¾ï¼ˆSomething you areï¼‰ ç”¨æˆ·è‡ªèº«çš„ç‰¹å¾ï¼Œå¦‚æŒ‡çº¹ã€è™¹è†œã€é¢éƒ¨è¯†åˆ«ã€‚ 2FA éœ€è¦è‡³å°‘åŒ…å«å…¶ä¸­çš„ä¸¤ç§å› ç´ ã€‚ä¾‹å¦‚ï¼Œâ€œå¯†ç +åŠ¨æ€éªŒè¯ç â€æ˜¯ä¸€ç§å¸¸è§çš„ 2FA å®ç°ã€‚ä¸ºä»€ä¹ˆéœ€è¦ 2FAï¼Ÿå•å› ç´ è®¤è¯ï¼ˆå¦‚ä»…ä½¿ç”¨å¯†ç ï¼‰å®¹æ˜“è¢«æ”»ç ´ï¼Œå°¤å…¶æ˜¯åœ¨ä»¥ä¸‹åœºæ™¯ï¼š å¯†ç æ³„éœ²ï¼ˆå¦‚æ•°æ®æ³„æ¼ã€å¼±å¯†ç ï¼‰ã€‚ ç¤¾ä¼šå·¥ç¨‹æ”»å‡»ï¼ˆå¦‚é’“é±¼ï¼‰ã€‚ é‡ç”¨å¯†ç å¯¼è‡´å¤šè´¦æˆ·å¤±å®ˆã€‚ 2FA æä¾›äº†é¢å¤–çš„ä¿æŠ¤å±‚ï¼Œå³ä½¿å¯†ç è¢«çªƒå–ï¼Œæ”»å‡»è€…ä»éœ€çªç ´ç¬¬äºŒé“éªŒè¯å…³å¡ã€‚ å¸¸è§ 2FA åœºæ™¯ å¯†ç  + åŠ¨æ€éªŒè¯ç ï¼ˆOTPï¼‰ ç™»å½•æ—¶è¾“å…¥å¯†ç åï¼Œç³»ç»Ÿä¼šå‘é€ä¸€æ¬¡æ€§å¯†ç ï¼ˆé€šè¿‡çŸ­ä¿¡ã€ç”µå­é‚®ä»¶æˆ–è®¤è¯å™¨Appï¼‰ã€‚ ä¾‹å¦‚ï¼šé“¶è¡Œè´¦æˆ·ç™»å½•æ—¶ä½¿ç”¨ Google Authenticator åŠ¨æ€éªŒè¯ç ã€‚ å¯†ç  + ç¡¬ä»¶ä»¤ç‰Œ ç”¨æˆ·éœ€è¦æ’å…¥ U2F ç¡¬ä»¶ä»¤ç‰Œï¼ˆå¦‚ YubiKeyï¼‰å¹¶æŒ‰ä¸‹æŒ‰é’®å®Œæˆèº«ä»½éªŒè¯ã€‚ åº”ç”¨ï¼šGoogle å·¥ä½œè´¦æˆ·ã€GitHub å¼€å‘è€…è´¦æˆ·ã€‚ å¯†ç  + ç”Ÿç‰©ç‰¹å¾ ç™»å½•éœ€è¦è¾“å…¥å¯†ç å¹¶å®ŒæˆæŒ‡çº¹æ‰«ææˆ–é¢éƒ¨è¯†åˆ«ã€‚ åº”ç”¨ï¼šæ™ºèƒ½æ‰‹æœºè§£é”ã€æ”¯ä»˜éªŒè¯ã€‚ ç”Ÿç‰©ç‰¹å¾ + åŠ¨æ€éªŒè¯ç  ç™»å½•æ—¶éœ€è¦æ‰«ææŒ‡çº¹ï¼ŒåŒæ—¶è¾“å…¥æ‰‹æœºæ¥æ”¶åˆ°çš„éªŒè¯ç ã€‚ åº”ç”¨ï¼šæŸäº›é«˜å®‰å…¨æ€§ä¼ä¸šç³»ç»Ÿã€‚ OTPï¼ˆOne-Time Passwordï¼‰ å®šä¹‰ï¼šä¸€ç§åªåœ¨çŸ­æ—¶é—´å†…æœ‰æ•ˆã€ä½¿ç”¨ä¸€æ¬¡å³å¤±æ•ˆçš„åŠ¨æ€å¯†ç ã€‚ ç‰¹ç‚¹ï¼š ä¸´æ—¶æ€§ï¼šæ¯æ¬¡ç™»å½•æˆ–äº¤æ˜“ç”Ÿæˆä¸€ä¸ªæ–°å¯†ç ã€‚ å®‰å…¨æ€§é«˜ï¼šå³ä½¿å¯†ç è¢«çªƒå–ï¼Œä¹Ÿæ— æ³•é‡å¤ä½¿ç”¨ã€‚ å¸¸ç”¨æ–¹å¼ï¼š çŸ­ä¿¡éªŒè¯ç  é‚®ä»¶éªŒè¯ç  åŸºäº TOTPï¼ˆæ—¶é—´å‹åŠ¨æ€å¯†ç ï¼‰ç®—æ³•çš„åº”ç”¨ï¼Œå¦‚ Google Authenticatorã€‚ å¸¸è§å¼€æºå®ç°OTP ç›¸å…³ Google Authenticator åŸºäº TOTP å’Œ HOTP ç®—æ³•çš„åŠ¨æ€å¯†ç ç”Ÿæˆå·¥å…·ã€‚ æä¾› Android å’Œ iOS åº”ç”¨ã€‚ PyOTP ä¹‹å‰å†™çš„è„šæœ¬å°±æ˜¯ç”¨çš„è¿™ä¸ª ç”¨ Python å®ç°çš„ OTP åº“ï¼Œæ”¯æŒ TOTP å’Œ HOTPã€‚ é€‚ç”¨äºå¿«é€Ÿé›†æˆåˆ° Python é¡¹ç›®ä¸­ã€‚ FreeOTP å¼€æºçš„ TOTP å’Œ HOTP éªŒè¯å™¨åº”ç”¨ã€‚ å¯ç”¨äº Android å’Œ iOSã€‚ 2FA ç›¸å…³ Keycloak å¼€æºçš„èº«ä»½å’Œè®¿é—®ç®¡ç†å·¥å…·ï¼Œæ”¯æŒ 2FAã€‚ æä¾›å¤šç§èº«ä»½éªŒè¯æ–¹å¼ï¼ŒåŒ…æ‹¬ OTPã€‚ Duo Security æä¾›åŸºäºåŒå› ç´ è®¤è¯çš„å¼€æºå·¥å…·ï¼Œæ”¯æŒç¡¬ä»¶ä»¤ç‰Œã€çŸ­ä¿¡å’Œ OTPã€‚ Authelia å…¨æ ˆçš„èº«ä»½éªŒè¯ç³»ç»Ÿï¼Œæ”¯æŒ 2FAã€‚ é€‚åˆè‡ªæ‰˜ç®¡ç¯å¢ƒã€‚","link":"/zh-CN/about_2FA/"},{"title":"Carry-Coin ä¸€ä¸ªè‡ªåŠ¨åŒ–æ¬ç –å¥—åˆ©å¹³å°","text":"Carry-Coin æ˜¯ä¸€ä¸ªå¥—åˆ©ç¨‹åºï¼Œç¨‹åºä»23å¹´åˆå¼€å§‹å¼€å‘è‡³ä»Šï¼Œç›®å‰å·²ç»åŸºæœ¬ç¨³å®šï¼Œç°åœ¨å°†ç¨‹åºçš„è®¾è®¡æ•´ç†å‡ºæ¥ï¼›å¥—åˆ©æ€è·¯å¾ˆç®€å•ï¼šç¨‹åºç›‘æ§Cexå’ŒDexå¹³å°ï¼Œé’ˆå¯¹åŒä¸€å¸ç§å‘ç°å·®ä»·åè‡ªåŠ¨åŒ–æ¬è¿ï¼› carry-config-generator(python) æ¡†æ¶:web3,pandas ; å·¥ç¨‹ä¸»è¦è´Ÿè´£æ ¹æ®dex,cexï¼Œç¬¬ä¸‰æ–¹ï¼š1inch,odos,dexscreener æ•°æ®ï¼Œè¿›è¡Œæ•°æ®åˆ†ææœ€ç»ˆç”Ÿæˆå¥—åˆ©é…ç½®ï¼› carry-core (Java) ä¸€ä¸ªåŸºäºJavaçš„å¥—åˆ©æ ¸å¿ƒç¨‹åºï¼Œdex&lt;-&gt;cexå¥—åˆ©é€»è¾‘çš„é¡¶å±‚æŠ½è±¡,SwapEngineï¼ŒSwapStategy, ArbitrageProcessor,CenterExchange,DecenterExchanage,SwapProtocol ç­‰; carry-worker (Java) æ¡†æ¶:Springboot3.2.5,Xchange,Web3j,RxJava3,Guavaç­‰ï¼›å·¥ç¨‹åŸºäºcoreå®ç°çš„ä¸åŒdex,cexçš„ç›‘æ§ã€å‘Šè­¦ã€é€šçŸ¥ã€æ¬è¿ã€ä¹°å–é€»è¾‘ï¼› carry-protocol-adapter(Nodejs) åŸºäºUniswap-sdk ,jupiter-swap-api(solana)å¼€å‘çš„å¥—åˆ©åè®®é€‚é…å™¨ï¼Œé€‚é…v2/v3è¯¢ä»·ï¼› carry-web-front (Nodejs) Vue3.0+TypeScript+Vite5+Ant-Design-Vueç­‰ï¼Œå·¥ç¨‹ä¸»è¦ç®¡ç†å¹³å°çš„å‰ç«¯é¡µé¢ï¼ŒåŒ…æ‹¬å¥—åˆ©å¼€å…³ã€çº¿ä¸Šé…ç½®ã€äº¤æ˜“æ•°æ®ç›‘æ§ï¼Œé“¾ä¸Šæ•°æ®ç›‘æ§æŠ¥è¡¨ç­‰ï¼› carry-web-server (Java) æ¡†æ¶: Spring Cloud Alibaba, Mysql, ç®¡ç†å¹³å°çš„åç«¯æœåŠ¡ï¼› éƒ¨ç½²æ¶æ„ ç¨‹åºæˆªå›¾ æŠ€æœ¯æ ˆè¯­è¨€ Java 11 Python Nodejs Bash Shell æ¡†æ¶Java Spring Boot JPA Xchange RxJava Guava transmittable-thread-local fastjson web3j lombok assertj jasypt Hutool Slf4jã€Logback Python Flask pickledb web3 pandas Nodejs pm2 uniswap-core,V2/v3-sdk solana/web3ã€spl-token nestjs ethers.js å¹³å° jeecg-boot","link":"/zh-CN/carry_coin_architecture_1/"},{"title":"Carry-Coin æ¶æ„è®¾è®¡ Coreæ¨¡å—(1)","text":"Carry-Coin Coreçš„Centerï¼ŒDecenter,protocolçš„è®¾è®¡ Coreç»„æˆéƒ¨åˆ†SwapåŸºæœ¬æ¦‚å¿µ SwapEngine å¥—åˆ©å¼•æ“ï¼Œå†…éƒ¨ç‹¬ç«‹çº¿ç¨‹ï¼ŒHandleræ‰§è¡Œ ï¼ŒCenteræ„å»º,Jobæ³¨å†Œ SwapEngineæœ€åˆè®¾è®¡å¯ä»¥æ”¯æŒdex(n)&lt;-&gt;cex(n),ç›®å‰é˜¶æ®µä»…SingleSwapEngine å®ç°äº†dex(1ï¼Œn)&lt;-&gt;cex(1)çš„å¥—åˆ©åŠ¨ä½œ,å³ä¸€ä¸ªEngineç»‘å®š1ä¸ªcexå’ŒNä¸ªdexï¼› SwapContext(æ ‡è®°æ¥å£) SwapContextæ˜¯SwapEngineçš„ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸ªå·¨å‹ç±»ï¼Œä¸ºäº†è·¨äº¤æ˜“æ‰€å…±ç”¨ä¸Šä¸‹æ–‡é¢„ç•™çš„,ä¸»è¦æ˜¯ä¿å­˜SwapEngineè¿è¡Œæ—¶çš„æ•°æ®ï¼ŒåŒ…å«äº†æ‰€æœ‰é‡è¦å¯¹è±¡çš„å¼•ç”¨ï¼šäº¤æ˜“æ‰€ä¿¡æ¯ï¼Œäº¤æ˜“å¯¹ä¿¡æ¯ï¼Œäº¤æ˜“æ‰€è´¦æˆ·ä¿¡æ¯; SwapConfig SwapConfigæ˜¯SwapEngineçš„é…ç½®ç±»ï¼Œä¸»è¦æ˜¯ä¿å­˜SwapEngineè¿è¡Œæ—¶æ‰€éœ€çš„é…ç½®ä¿¡æ¯; SwapHandler ç”¨æ¥åˆå§‹åŒ–Contextï¼ŒåŒæ­¥jobçš„é˜»å¡åŠ è½½ï¼Œå¼‚æ­¥jobçš„æ³¨å†Œï¼ŒBizDataLoaderContexté¦–æ¬¡åˆå§‹åŒ–å’Œæ ¡éªŒ SwapInitializerConfig æ ¹æ®ymlåˆå§‹åŒ–SwapLauncheræ¥è§¦å‘Engineå·¥ä½œï¼› SwapLauncher äº¤æ˜“å¼•æ“å¯åŠ¨å™¨ Center Cexä¸­å¿ƒäº¤æ˜“æ‰€ç›¸å…³çš„æŠ½è±¡å’Œå¥—åˆ©åŠ¨ä½œ CenterExchangeHolder ä¸­å¿ƒäº¤æ˜“æ‰€çš„é¡¶çº§æŠ½è±¡ï¼Œä¸»è¦æ˜¯ä¸€äº›æŠ€æœ¯åŠ¨ä½œï¼š æ³¨å†ŒåŒæ­¥å’Œå¼‚æ­¥çš„å–æ•°å™¨ï¼ˆJobï¼‰ï¼Œè·å–Contextæ•°æ®ç­‰åŠ¨ä½œ äº¤æ˜“æ‰€æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥å–æ•°ä¸¤ç§æ¨¡å¼ï¼ŒåŒæ­¥åœ¨SwapEngineåˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œå¼‚æ­¥å‘¨æœŸæ€§è¿è¡Œï¼› å‘¨æœŸæ€§æ‰§è¡Œä½¿ç”¨ScheduledExecutorServiceï¼Œå®ç°ä½¿ç”¨äº†alibabaçš„transmittable-thread-localåº“ï¼Œä¸»è¦ç›®çš„è§£å†³å¼‚æ­¥æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡ä¼ é€’çš„é—®é¢˜ï¼› Jobæ–¹å¼å–æ¥çš„æ•°æ®éƒ½ä¼šæ”¾åœ¨BizDataLoaderContextå®¹å™¨ä¸­ï¼› AbstractCenterExchangeHolder å¯¹CenterExchangeHolderçš„åŸºæœ¬å®ç° CenterExchangeHolderBehavior ä¸šåŠ¡åŠ¨ä½œæŠ½è±¡æ¥å£ï¼šLimit/Markerä¸‹å•ï¼Œæ’¤å•ï¼Œè·å–è®¢å•çŠ¶æ€ï¼Œæç°ï¼Œè½¬è´¦ç­‰ä¸šåŠ¡åŠ¨ä½œ,è¿™ä¸ªæ¥å£ä¹Ÿæ˜¯pipelineå’Œjobä¸­æ“ä½œCexçš„æ ¸å¿ƒï¼Œéå¿…è¦ä¸šåŠ¡æµä¸­ä¸æ“ä½œCenterExchangeHolder,AbstractCenterExchangeHolderè¿™ç§é¡¶çº§æ¥å£ï¼› Cexäº¤æ˜“æ‰€æ“ä½œä½¿ç”¨Xchangeå®Œæˆ; FacilitySupport æä¾›ä¸€å¥—åŸºæœ¬çš„Cexå®ç°æ¨¡æ¿ CenterSymbolInfo Cexä¾§å¥—åˆ©ç›¸å…³é…ç½®ä¿¡æ¯ Decenter Dexå»ä¸­å¿ƒäº¤æ˜“å¹³å°ç›¸å…³çš„æŠ½è±¡, Decenter.protocol Decenterä¸­SwapProtocolåè®®æŠ½è±¡ï¼Œç›®å‰å·²å®ç°åŒ…å«solana,bscé“¾ï¼Œodos,zeroxå¹³å°çš„è¯¢ä»·ã€äº¤æ˜“åŠ¨ä½œ;è®¾è®¡è¿‡ç¨‹ä¸­éš¾ç‚¹åœ¨äºå¯¹ä¸åŒé“¾çš„äº¤æ˜“åŠ¨ä½œè¿›è¡ŒåŒä¸€è§†è§’è¿›è¡ŒæŠ½è±¡å’Œè®¾è®¡ï¼› EVMéƒ¨åˆ† GenericWeb3jBehavior é“¾ä¸ŠåŠ¨ä½œçš„é€šç”¨æŠ½è±¡ï¼Œé»˜è®¤åªå®ç°getNetwork,getWeb3jManager,è€ƒè™‘åˆ°å¤šé“¾æ”¯æŒClientå®¢æˆ·ç«¯ä¸å®šï¼Œæ‰€ä»¥ä½œä¸ºæ³›å‹ä¼ å…¥ï¼› å¿…è¦åŠ¨ä½œqueryTxConfirmed,getRawAmountOut,getBalanceOfNodeåšæŠ½è±¡æ–¹æ³•ï¼Œè€ƒè™‘åˆ°è¿™å‡ ä¸ªæ–¹æ³•ä¸æŒ‘ç½‘ç»œï¼Œå…¥å‚å›å‚æ˜ç¡®ï¼Œæ‰€ä»¥æ”¾åœ¨æ­¤å¤„ï¼› ä¸åŒé“¾å·®å¼‚åŒ–åŠ¨ä½œæ”¾åœ¨ä¸‹å±‚å®ç°. EthGenericWeb3jBehavior å…·è±¡evmé“¾çš„å®ç°ï¼Œä¸»è¦æ˜¯å®ç°ç½‘ç»œå±‚é¢ã€Tokenå±‚é¢çš„ä¸€äº›æ–¹æ³•äº†allowance, getTransactionGasLimit, signTransaction, waitTxConfirmed, queryTxConfirmed, getNonce, getBalanceOfNode, tokenTransfer, getGasProvider, gasProvider GenericSwapV2Impl,GenericSwapV3Impl åŸºäºEthGenericWeb3jBehaviorå®ŒæˆDex swapå…¨è¿‡ç¨‹çš„æ–¹æ³•,åŒ…å«ï¼šgetAmountsOut,swapExactTokensForTokensï¼ŒswapExactTokensForTokensSupportingFeeOnTransferTokens getRawAmountOutåŒºåˆ«äºgetAmountsOutï¼Œæ˜¯ç”¨æ¥é€šè¿‡evmä¸­logæ•°æ®è·å–æœ€ç»ˆäº¤æ¢åˆ°çš„tokenæ•°é‡ï¼› SwapExactTForTParam ä¸Šå±‚é€šè¿‡è¯¥ç±»ä¼ å…¥swapæ‰€éœ€å‚æ•°ï¼› Solanaéƒ¨åˆ†ODOSéƒ¨åˆ†Strategy äº¤æ˜“ç­–ç•¥ swap å¥—åˆ©åŠ¨ä½œ","link":"/zh-CN/carry_coin_architecture_2/"},{"title":"Carry-Coin æ¶æ„è®¾è®¡ Coreæ¨¡å—(2)","text":"Carry-Coin Coreçš„PipelineActionï¼ŒJobçš„è®¾è®¡ Action ç»„æˆéƒ¨åˆ† AbstractForwardPipeline æ­£å‘å¥—åˆ©(cex-&gt;dex)æµæ°´çº¿æŠ½è±¡ç±» AbstractReversePipeline é€†å‘å¥—åˆ©(dex-&gt;cex)æµæ°´çº¿æŠ½è±¡ç±» CommonCutOffForwardPipeline CommonLimitWaitForwardPipeline CommonReversePipeline é€†å‘å¥—åˆ©(dex-&gt;cex)æµæ°´çº¿æŠ½è±¡ç±»é»˜è®¤å®ç° DebugReversePipeline è°ƒè¯•ç”¨ WithdrawAndSellPipeline Cexè´¦æˆ·ç•™å¸ç­–ç•¥æ—¶è§¦å‘ï¼šå½“è´¦æˆ·ç•™å¸ä¸”é“¾ä¸Šä»·æ ¼æ¯”äº¤æ˜“æ‰€é«˜æ—¶ï¼Œæç°-&gt;dex-&gt;å–å‡º DepositAndSellPipeline Dexç•™å¸ç­–ç•¥è§¦å‘ï¼šé’±åŒ…ä¸­ç•™å¸ä¸”äº¤æ˜“æ‰€ä»·æ ¼å¤§äºé“¾ä¸Šï¼šå……å¸-&gt;cex-&gt;å–å‡º OnlySwapInChainPipeline Dexç•™å¸ç­–ç•¥è§¦å‘ï¼šé’±åŒ…ä¸­ç•™å¸ä¸”é“¾ä¸Šä»·æ ¼é«˜äºCexï¼šå–å‡º SolanaReversePipeline Solanaé€†å‘å¥—åˆ©æµæ°´çº¿ TransactionRecordFactory Job ç»„æˆéƒ¨åˆ† å¼‚æ­¥ä»»åŠ¡ï¼Œä¼˜å…ˆä½¿ç”¨websocketå–æ•°ï¼Œå¦‚cexä¸æ”¯æŒåˆ™ä½¿ç”¨restæ–¹å¼ï¼Œrestè°ƒç”¨ä¸€å®šè¦å®ç°é™é¢‘ç­–ç•¥ï¼Œå…·ä½“è§Xchange BalanceRest200msJob æ¯200ms è°ƒrestæ¥å£å–ä½™é¢ï¼› ChainAccountMonitor10mJob æ¯10åˆ†é’Ÿ ç›‘æ§é“¾ä¸Šè´¦æˆ·ä½™é¢ï¼› CleanBalance1mJob æ¯1åˆ†é’Ÿ æ‰«æè´¦æˆ·ç¬¦åˆæ¡ä»¶è§¦å‘ç•™å¸ç­–ç•¥ ConsumerMiddleCoinBuyAndSellJob ä¸‰è§’å¥—åˆ©æ—¶ï¼Œä¸­é—´å¸æ¶ˆè€—æƒ…å†µå…¥åº“ï¼Œè®¢é˜…çš„äº¤æ˜“æ‰€è´­ä¹°ä¸­é—´å¸ï¼ˆç›®å‰BNB,SOLï¼‰ FundingRecordRest200msJob æ¯200ms è°ƒrestæ¥å£å–å……æè®°å½•ç›‘æ§å……æçŠ¶æ€ï¼› LoaderDataContextMonitor1sJob æœ€åˆæ„æƒ³ç”¨æ¥å­˜å‚¨ä¸‹å•æ—¶ï¼Œå½“å‰depth,ticker,orderbookç­‰æ•°æ®ï¼Œæ•°æ®é‡å¤ªå¤§ï¼Œæœ‰æ¡ä»¶çš„æƒ…å†µä¸‹ä¸Šnosql, å°±ä¸å…¥dbäº†ï¼› PendingPlaceOrderJob å®šæ—¶æ‰«ææœªå®Œæˆè®¢å•ï¼Œå¹¶å°è¯•é‡è¯• ResetSymbolConfigJob é‡ç½®å¥—åˆ©å¸æœ¬é…ç½® RiseMonitorRest10sJob SelfOrderRest100msJob","link":"/zh-CN/carry_coin_architecture_3/"},{"title":"Carry-Coin æ¶æ„è®¾è®¡ SymbolLedger (4)","text":"Carry-Coin å¥—åˆ©å¸æœ¬ SymbolLedger è®¾è®¡ï¼ŒSymbolLedgerè´Ÿè´£å­˜æ”¾å¥—åˆ©è¿‡ç¨‹ä¸­äº¤æ˜“å¯¹ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬symbolåœ¨Cexä¸­çš„å„é¡¹é…ç½®ã€å¥—åˆ©é˜ˆå€¼ç­‰ï¼ŒDexä¸­çš„å„ç§åˆçº¦ä¿¡æ¯ã€é˜ˆå€¼ã€äº¤æ˜“å‚æ•°ç­‰ SymbolLedgerä¸€ä¸ªäº¤æ˜“æ‰€å¯¹åº”ä¸€ä¸ªSymbolLedgerå®ä¾‹,ç¨‹åºå¯åŠ¨åé€šè¿‡jsoné…ç½®æ–‡ä»¶è¿›è¡ŒåŠ è½½ï¼› 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** * &lt;pre&gt; * æ­¤ç±»ç”¨æ¥å­˜å‚¨å¸‚é¢ä¸Šæ‰€æœ‰çš„äº¤æ˜“å¯¹ä¿¡æ¯ * ç»´æŠ¤æ–¹å¼: åŸºç¡€ä¿¡æ¯æ‰‹å·¥,å…¶ä»–ä¿¡æ¯é€šè¿‡ç¨‹åºè‡ªåŠ¨è·å–; * æ›´æ–°å‘¨æœŸ: å®šæœŸæ›´æ–°; * ä½œç”¨: ä»¥æ­¤è´¦ç°¿ä¸Šçš„å¸ä½œä¸ºå¾ªåŒ–åŸºç¡€,å†ä»å„äº¤æ˜“æ‰€æ‹‰å–å¯¹åº”ä¿¡æ¯; * &lt;/pre&gt; * &lt;p&gt; @Date : 2023/3/21 &lt;/p&gt; * &lt;p&gt; @Project : block-farming&lt;/p&gt; * * &lt;p&gt; @author konbluesky &lt;/p&gt; */@Slf4j@Datapublic class SymbolLedger { /** * å¦‚æ˜¯å†…å­˜æ¨¡å¼åˆ™ä¸è¿›è¡Œæ•°æ®åº“æŒä¹…åŒ– */ private boolean memoryMode = false; /** * æ›´æ–°symbolPairConfigsæ—¶,ä¸€å®šè¦é‡æ–°å¯¹symbolPairConfigMapå’ŒsymbolPairConfigMap_symbolKeyè¿›è¡Œæ›´æ–° * å¦åˆ™getSymbolPairConfigä¼šå¤±æ•ˆ * @param symbolPairConfigs */ public void setSymbolPairConfigs(List&lt;SymbolPairConfig&gt; symbolPairConfigs) { this.symbolPairConfigs = symbolPairConfigs; for(SymbolPairConfig symbolPairConfig : symbolPairConfigs){ updateSymbolPairConfig(symbolPairConfig); } log.info(&quot;SymbolLedgeræ›´æ–°symbolPairConfigs&quot;); } private List&lt;SymbolPairConfig&gt; symbolPairConfigs = Lists.newCopyOnWriteArrayList(); private Map&lt;String, SymbolPairConfig&gt; symbolPairConfigMap = Maps.newConcurrentMap(); private Map&lt;String, SymbolPairConfig&gt; symbolPairConfigMap_symbolKey = Maps.newConcurrentMap(); // private Table&lt;String, String, SymbolPairConfig&gt; symbolPairConfigMap = Tables.synchronizedTable(HashBasedTable.create()); public void put(SymbolPairConfig symbolPairConfig) { symbolPairConfigs.add(symbolPairConfig); updateSymbolPairConfig(symbolPairConfig); } private void updateSymbolPairConfig(SymbolPairConfig symbolPairConfig){ CenterSymbolInfo centerSymbolInfo = symbolPairConfig.getCenterSymbolInfo(); symbolPairConfigMap.put(centerSymbolInfo.getBaseCurrency() .toLowerCase(), symbolPairConfig); symbolPairConfigMap_symbolKey.put(centerSymbolInfo.getBaseCurrency() .toLowerCase() + &quot;/&quot; + centerSymbolInfo.getQuoteCurrency() .toLowerCase(), symbolPairConfig); } @Deprecated public SymbolPairConfig getSymbolPairConfig(String baseCurrency) { return symbolPairConfigMap.get(baseCurrency.toLowerCase()); } public List&lt;SymbolPairConfig&gt; getSymbolPairConfigsBy(String baseCurrency) { List&lt;SymbolPairConfig&gt; result = Lists.newArrayList(); symbolPairConfigMap_symbolKey.forEach((k, v) -&gt; { if(k.toLowerCase().startsWith(baseCurrency.toLowerCase())) { result.add(v); } }); return result; } public SymbolPairConfig getSymbolPairConfig(String baseCurrency, String quoteCurrency) { return symbolPairConfigMap_symbolKey.get(baseCurrency.toLowerCase() + &quot;/&quot; + quoteCurrency.toLowerCase()); }} SymbolLedgeræ„å»ºçš„é™æ€å·¥å‚,jsoné…ç½®é€šè¿‡carry-config-generator(python)ç”Ÿæˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249/** * &lt;pre&gt; * 1. äº¤æ˜“å¯¹é…ç½®æ–‡ä»¶å·¥å‚,ç›®å‰å®ç°ä»HUOBI.txtæ–‡ä»¶ä¸­è¯»å–; * 2. å¯ä»¥åœ¨jaråŒ…æ‰€åœ¨ç›®å½•ä¸‹åˆ›å»ºconfigç›®å½•,å°†é…ç½®æ–‡ä»¶æ”¾å…¥configç›®å½•ä¸‹,ç¨‹åºä¼šè‡ªåŠ¨è¯»å–; * &lt;/pre&gt; */@Slf4jpublic class SymbolLedgerFactory { public static final String SYMBOL_HUOBI_BOOKS_FILE = &quot;HUOBI.txt&quot;; public static final String SYMBOL_XT_BOOKS_FILE = &quot;XT.txt&quot;; public static final String SYMBOL_BINANCE_BOOKS_FILE = &quot;BIAN.txt&quot;; public static final String SYMBOL_MEXC_BOOKS_FILE = &quot;MXCAll.txt&quot;; public static final String SYMBOL_GATEIO_BOOKS_FILE = &quot;GATEIO.txt&quot;; public static final String SYMBOL_KUCOIN_BOOKS_FILE = &quot;KUCOIN.txt&quot;; /** * TODO ä»æ–‡ä»¶ä¸­è¯»å–äº¤æ˜“å¯¹é…ç½®,ç›®å‰åªè§£æéƒ¨åˆ†å­—æ®µ;æœ‰éœ€è¦å®æ—¶æ›´æ–°çš„å­—æ®µåˆ°æ—¶å€™ä»æœåŠ¡å™¨ä¸Šå®æ—¶æ‹‰å–; * swapStableCoinContractAdd å­—æ®µé…ç½®å†³å®šäº†ä¸äº¤æ˜“æ‰€çš„å¯¹çš„åŒ¹é…; * * @param symbolBooksFile * @param swapConfig * @return */ private static SymbolLedger create(String symbolBooksFile, SwapConfig swapConfig) { Preconditions.checkArgument(swapConfig != null); JSONArray jsonArray = getJsonArrayByFile(symbolBooksFile); SymbolLedger symbolLedger = new SymbolLedger(); for (int i = 0; i &lt; jsonArray.size(); i++) { JSONObject item = jsonArray.getJSONObject(i); // continue to parse the json object if (Strings.isNullOrEmpty(item.getString(&quot;swapContract&quot;)) || item.getString(&quot;swapStableCoinContract&quot;) .equalsIgnoreCase(&quot;cake&quot;)) { continue; } SymbolPairConfig symbolPairConfig = new SymbolPairConfig(); symbolPairConfig.setBaseCurrency(item.getString(&quot;swapCoinContract&quot;)); int chainId = item.getInteger(&quot;chainId&quot;) != null ? item.getInteger(&quot;chainId&quot;) : NetworkEnum.BSC.getChainId(); String stableName = SymbolTokenHelper.getTokenInfoByAddressReturnSymbol(chainId, item.getString(&quot;swapStableCoinContractAdd&quot;)); symbolPairConfig.setQuoteCurrency(Currency.USDT.getCurrencyCode()); // symbolPairConfig.setSymbol(symbolPairConfig.getBaseCurrency() + &quot;/&quot; + symbolPairConfig.getQuoteCurrency()); // é“¾ä¸Šäº¤æ˜“å¯¹å’Œcexäº¤æ˜“å¯¹ åˆ†åˆ«å­˜å‚¨,äº¤æ˜“æ‰€å¯¹,ç›®å‰ç»Ÿä¸€ä½¿ç”¨usdt CenterSymbolInfo centerSymbolInfo = new CenterSymbolInfo(); centerSymbolInfo.setBaseCurrency(symbolPairConfig.getBaseCurrency()); centerSymbolInfo.setQuoteCurrency(Currency.USDT.getCurrencyCode()); centerSymbolInfo.setCexMaxOrderForUSDT(item.getBigDecimal(&quot;maxOrderForUsdt&quot;) == null ? swapConfig.getGlobalMaxOrderForUsdt() : item.getBigDecimal(&quot;maxOrderForUsdt&quot;)); centerSymbolInfo.setCexMinOrderForUSDT(item.getBigDecimal(&quot;minOrderForUsdt&quot;) == null ? swapConfig.getGlobalMinOrderForUsdt() : item.getBigDecimal(&quot;minOrderForUsdt&quot;)); centerSymbolInfo.getAskPosition() .set(item.getInteger(&quot;askPosition&quot;) == null || item.getInteger(&quot;askPosition&quot;) == 0 ? 3 : item.getInteger(&quot;askPosition&quot;)); symbolPairConfig.setCenterSymbolInfo(centerSymbolInfo); // è®¾ç½®å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€é…ç½®ä¿¡æ¯; DecenterSymbolInfo decenterSymbolInfo = new DecenterSymbolInfo(); decenterSymbolInfo.setBaseCurrency(symbolPairConfig.getBaseCurrency()) .setQuoteCurrency(stableName == null ? CoinEnum.getCoin(item.getString(&quot;swapStableCoinContractAdd&quot;)) .name() : stableName) .setMiddleCurrency(item.getString(&quot;swapMiddleCoinContract&quot;)) .setDexName(item.getString(&quot;dex_name&quot;)) .setDexProtocolVersion(item.getString(&quot;liquidity_type&quot;)) // é“¾id .setChainIds(Set.of(chainId)) .setStableCoinContractAddress(item.getString(&quot;swapStableCoinContractAdd&quot;)) .setMiddleCoinContractAddress(item.getString(&quot;swapMiddleCoinContractAdd&quot;)) .setTradeCoinContractAddress(item.getString(&quot;swapCoinContractAdd&quot;)) .setSwapContractAddress(item.getString(&quot;swapContract&quot;)) .setBurnFee(item.getBigDecimal(&quot;burn&quot;)) .setBuyTax(item.getBigDecimal(&quot;buyTax&quot;))// ä¹°å…¥ç¨ç‡ .setSellTax(item.getBigDecimal(&quot;sellTax&quot;))//å–å‡ºç¨ç‡ // .setSellTax(item.getBigDecimal(&quot;burn&quot;))// å–å‡ºç¨ç‡ï¼Œ è€çš„é…ç½®æ–‡ä»¶ä¸­å°±æ˜¯sellTax .setDexBuySlipPoint(item.getBigDecimal(&quot;dexSlipPoint&quot;) .add(swapConfig.getGlobalDexSlipPoint())) .setStableCoinDecimals(item.getIntValue(&quot;stableCoinDecimals&quot;)) .setTradeCoinDecimals(item.getIntValue(&quot;coinDecimals&quot;)) .setMiddleCoinDecimals(item.getIntValue(&quot;middleCoinDecimals&quot;)) .setMethod(item.getString(&quot;method&quot;)) .setBuyPosition(item.getIntValue(&quot;currentDepthPosition&quot;)) .setReplyPro(item.getBigDecimal(&quot;replyPro&quot;)) // åå‘åˆ©æ¶¦æ”¾å¤§çš„æ¯”ä¾‹ .setDepthPro(item.getBigDecimal(&quot;depthPro&quot;)) // åå‘æ·±åº¦ç¼©å°çš„æ¯”ä¾‹ .setV3LoopContractAddress(item.getString(&quot;lpAdd&quot;)) // v3 çš„loopAddress .setV3Fee(item.getString(&quot;feev3&quot;)) // v3 çš„fee .setDexMaxOrderForUSDT(item.getBigDecimal(&quot;dexMax&quot;) == null ? swapConfig.getGlobalMaxOrderForUsdt() : item.getBigDecimal(&quot;dexMax&quot;)) // åå‘æœ€å¤§ä¸‹å•é‡ .setDexMinOrderForUSDT(item.getBigDecimal(&quot;dexMin&quot;) == null ? swapConfig.getGlobalMinOrderForUsdt() : item.getBigDecimal(&quot;dexMin&quot;));// åå‘æœ€å°ä¸‹å•é‡ decenterSymbolInfo.setExtensionDexHandlerConfig(new ExtensionDexHandlerConfig(item)); decenterSymbolInfo.init(); symbolPairConfig.setDecenterSymbolInfo(decenterSymbolInfo); symbolPairConfig.set_rawJson(item); symbolLedger.put(symbolPairConfig); } return symbolLedger; } private static JSONArray getJsonArrayByFile(String symbolHuobiBooksFile) { File configFile = PathUtil.stairsLoad(symbolHuobiBooksFile, &quot;config&quot;); try { if (configFile == null) { log.warn(&quot;Not fount SymbolBook config file.{}&quot;, symbolHuobiBooksFile); String tempPath = System.getProperty(&quot;java.io.tmpdir&quot;) + System.currentTimeMillis(); String tempFile = Paths.get(tempPath, File.separator, symbolHuobiBooksFile) .toString(); Resource resource = new ClassPathResource(symbolHuobiBooksFile); InputStream initialStream = resource.getInputStream(); byte[] buffer = new byte[initialStream.available()]; initialStream.read(buffer); configFile = new File(tempFile); configFile.getParentFile() .mkdirs(); Files.write(buffer, configFile); log.info(&quot;Loading default SymbolBook config file from classpath: {} &quot;, resource.getURL()); } String jsonContext = Joiner.on(&quot;&quot;) .join(Files.readLines(configFile, Charsets.UTF_8)); if (JSON.isValidArray(jsonContext)) { return JSON.parseObject(jsonContext, JSONArray.class); } } catch (Exception e) { log.error(e.getMessage(), e); throw new SwapException(&quot;SymbolBook config loading failed.&quot;); } return new JSONArray(); } public static SymbolLedger createXT(SwapConfig swapConfig) { return create(SYMBOL_XT_BOOKS_FILE, swapConfig); } public static SymbolLedger createHuoBi() { return create(SYMBOL_HUOBI_BOOKS_FILE, new SwapConfig()); } public static SymbolLedger createGateio() { return create(SYMBOL_GATEIO_BOOKS_FILE, new SwapConfig()); } public static SymbolLedger createGateio(SwapConfig swapConfig) { return create(SYMBOL_GATEIO_BOOKS_FILE, swapConfig); } public static SymbolLedger createKucoin(SwapConfig swapConfig) { return create(SYMBOL_KUCOIN_BOOKS_FILE, swapConfig); } public static SymbolLedger createOKex() { return create(SYMBOL_HUOBI_BOOKS_FILE, new SwapConfig()); } public static SymbolLedger createOKex(SwapConfig swapConfig) { return create(SYMBOL_HUOBI_BOOKS_FILE, swapConfig); } public static SymbolLedger createHuoBi(SwapConfig swapConfig) { return create(SYMBOL_HUOBI_BOOKS_FILE, swapConfig); } public static SymbolLedger createBinance(SwapConfig swapConfig) { return create(SYMBOL_BINANCE_BOOKS_FILE, swapConfig); } public static SymbolLedger createMEXC(SwapConfig swapConfig) { return create(SYMBOL_MEXC_BOOKS_FILE, swapConfig); } /** * å°†é…ç½®æ–‡ä»¶å†…å®¹åˆ·å…¥db * å¤–éƒ¨é€šè¿‡SwapControlHolder æ¥å¯¹çŠ¶æ€è¿›è¡Œæ§åˆ¶å’Œåˆ¤æ–­ * * @param symbolLedger * @param exchangeType * @param isMonitor å¼€å…³ç”¨æ¥æ§åˆ¶swapSymbolPairConfigRecord è®°å½•é»˜è®¤æ˜¯ç›‘å¬çŠ¶æ€è¿˜æ˜¯ï¼Œ éç›‘å¬çŠ¶æ€ï¼Œ * é¦–æ¬¡ç¨‹åºå¯åŠ¨çš„æ—¶å€™æ˜¯éç›‘å¬çš„ï¼Œéœ€è¦webç«¯æ˜¾å¼çš„å¼€å¯ï¼Œåç»­jobä¸­åŠ¨æ€è°ƒæ•´é»˜è®¤éƒ½æ˜¯ç›‘å¬çŠ¶æ€çš„ */ public static void flushToDb(SymbolLedger symbolLedger, ExchangeType exchangeType, boolean isMonitor) { if (symbolLedger.isMemoryMode()) { return; } SwapSymbolPairConfigRecordRepository res = SpringUtil.getBean(SwapSymbolPairConfigRecordRepository.class); res.deleteAllByExchangeType(exchangeType); res.flush(); List&lt;SwapSymbolPairConfigRecord&gt; all = Lists.newArrayList(); symbolLedger.getSymbolPairConfigs().forEach(symbolPairConfig -&gt; { SwapSymbolPairConfigRecord swapSymbolPairConfigRecord = null; if (isMonitor) { swapSymbolPairConfigRecord = SwapSymbolPairConfigRecord.createLoadMonitor(symbolPairConfig, exchangeType); SwapControlManager.putItem(exchangeType, symbolPairConfig.getUniDexIdentify(), swapSymbolPairConfigRecord); } else { swapSymbolPairConfigRecord = SwapSymbolPairConfigRecord.createUnMonitor(symbolPairConfig, exchangeType); SwapControlManager.putItem(exchangeType, symbolPairConfig.getUniDexIdentify(), swapSymbolPairConfigRecord); } all.add(swapSymbolPairConfigRecord); }); res.saveAllAndFlush(all); log.info(&quot;Load config from config file, Flush to db is ok ! Record size is :{} &quot;, all.size()); } /** * å¢é‡æ›´æ–°é…ç½®æ–‡ä»¶ * 1. æ•°æ®åº“ä¸­è½½å…¥å½“å‰äº¤æ˜“æ‰€å¸é…ç½® * 2. ä»å†…å­˜ä¸­è·å–å½“å‰äº¤æ˜“æ‰€å¸é…ç½® * 3. æ¯”è¾ƒæ•°æ®åº“ä¸­ä¸åœ¨å†…å­˜çš„é…ç½®ï¼Œæ›´æ–°çŠ¶æ€ * 4. å°†å…³é—­çš„å¸ç§ç»„è£…æ—¥å¿—æ‰“å°å‡ºæ¥ */ public static void incrementalUpdate(SymbolLedger symbolLedger, ExchangeType exchangeType) { if (symbolLedger.isMemoryMode()) { return; } SwapSymbolPairConfigRecordRepository res = SpringUtil.getBean(SwapSymbolPairConfigRecordRepository.class); List&lt;SwapSymbolPairConfigRecord&gt; all = res.findAllByExchangeType(exchangeType); String changeCurrency = &quot;&quot;; int closeCount = 0; for (SwapSymbolPairConfigRecord swapSymbolPairConfigRecord : all) { String symbol = swapSymbolPairConfigRecord.getSymbol(); if (symbolLedger.getSymbolPairConfig(symbol.split(&quot;/&quot;)[0], symbol.split(&quot;/&quot;)[1]) == null) { swapSymbolPairConfigRecord.setMonitorStatus(SwapSymbolPairConfigRecord.MonitorStatus.UNMONITOR); changeCurrency += symbol + &quot;,&quot;; closeCount++; } } res.saveAllAndFlush(all); String msg = Utils.format(&quot;{} äº¤æ˜“æ‰€å†…å­˜å¸æœ¬é…ç½®å·²è¿‡æ»¤,æ€»æ•°:{} å…³é—­æ•°é‡:{} å…³é—­å¸ç§:{}&quot;, exchangeType, all.size(), closeCount, changeCurrency); log.info(msg); SwapMessageSender.sendMessage(exchangeType, msg); log.info(&quot;Incremental update config from config file, Flush to db is ok ! Record size is :{} &quot;, all.size()); } SymbolPairConfig ç±», ç”¨æ¥å­˜å‚¨æŸä¸ªäº¤æ˜“å¯¹(ABC/USDT)çš„é…ç½®ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100/** * &lt;p&gt; @Date : 2023/3/21 &lt;/p&gt; * &lt;p&gt; @Project : block-farming&lt;/p&gt; * * &lt;p&gt; @author konbluesky &lt;/p&gt; */@Datapublic class SymbolPairConfig { //TODO ç°é˜¶æ®µ symbolInfo æ˜¯1-1å…³ç³» /** * äº¤æ˜“å¯¹åœ¨ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€çš„ä¿¡æ¯ */ private CenterSymbolInfo centerSymbolInfo; /** * äº¤æ˜“å¯¹åœ¨å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€çš„ä¿¡æ¯ */ private DecenterSymbolInfo decenterSymbolInfo; /** * äº¤æ˜“å¯¹æ˜¾ç¤ºåç§° BTC/USDT */ public String getSymbol() { return baseCurrency+&quot;/&quot;+quoteCurrency; } /** * RITE/USDT-RITE/USDT-PancakeV2-UniV2 * @return */ public String getUniDexIdentify(){ return centerSymbolInfo.getSymbol() + &quot;-&quot; + decenterSymbolInfo.getSymbol() + &quot;-&quot; + decenterSymbolInfo.getDexName() + &quot;-&quot; + decenterSymbolInfo.getDexProtocolVersion(); } /** * äº¤æ˜“å¯¹åŸºç¡€è´§å¸ BTC */ private String baseCurrency; /** * äº¤æ˜“å¯¹æŠ¥ä»·è´§å¸ USDT */ private String quoteCurrency; /** * å…è®¸å¼€å¯çš„å®ä¾‹æ•° */ private AtomicInteger reverseAllowInstanceNum = new AtomicInteger(1); private AtomicInteger forwardAllowInstanceNum = new AtomicInteger(1); /** * å¼€å¯ç¿»å€åï¼Œè®¾ç½®xåˆ†é’Ÿæ¿€æƒ…æ—¶é—´ï¼Œè¿›è¡Œç¿»å€ */ private AtomicLong reversePassionTime = new AtomicLong(0); private AtomicLong forwardPassionTime = new AtomicLong(0); /** * äº¤æ˜“å¯¹çš„åˆ©æ¶¦é˜ˆå€¼,ä¸€èˆ¬åœ¨äº¤æ˜“æ‰€holderåˆå§‹åŒ–çš„æ—¶å€™ä»SwapConfigè·å–; * TODO è¿™é‡Œçš„é˜ˆå€¼å¯åŸºäºå…¨å±€çš„åšè¦†ç›–; */ private BigDecimal profitThreshold; private BigDecimal profitThresholdRate; private BigDecimal _origin_profitThresholdRate; private JSONObject _rawJson; public void setProfitThresholdRate(BigDecimal profitThresholdRate) { this.profitThresholdRate = profitThresholdRate; this._origin_profitThresholdRate = profitThresholdRate; } public void setProfitThresholdRateDouble() { profitThresholdRate = profitThresholdRate.multiply(new BigDecimal(&quot;1.3&quot;)); } public void resetProfitThresholdRate() { profitThresholdRate = _origin_profitThresholdRate; } /** * æç°æ¬¡æ•°è‡ªå¢ä¸€æ¬¡ * Increase WithdrawTime */ public void increaseWithdrawTimes() { centerSymbolInfo.getLastWithdrawTime().set(System.currentTimeMillis()); centerSymbolInfo.increaseWithdrawTimes(); } public boolean isMiddleCoin() { return !Strings.isNullOrEmpty(decenterSymbolInfo.getMiddleCoinContractAddress()); } public String getSymbolNoOblique() { return getSymbol().replace(&quot;/&quot;, &quot;&quot;); }} CenterSymbolInfo ç±», ç”¨æ¥å­˜å‚¨æŸä¸ªäº¤æ˜“å¯¹(ABC/USDT)çš„Cexé…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105/** * * &lt;p&gt; @Date : 2023/3/20 &lt;/p&gt; * &lt;p&gt; @Project : block-farming&lt;/p&gt; * * &lt;p&gt; @author konbluesky &lt;/p&gt; */@Data@Slf4jpublic class CenterSymbolInfo { public String getSymbol() { return baseCurrency + &quot;/&quot; + quoteCurrency; } /** * æ³¨æ„è¿™é‡Œæ˜¯[äº¤æ˜“æ‰€]å¯¹åº”çš„åŸºç¡€è´§å¸ BTC */ private String baseCurrency; /** * æ³¨æ„è¿™é‡Œæ˜¯[äº¤æ˜“æ‰€]å¯¹åº”çš„äº¤æ˜“å¯¹æŠ¥ä»·è´§å¸ USDT */ private String quoteCurrency; private Double price; /** * äº¤æ˜“æ‰€ä½“ç°æ—¶ä¸€èˆ¬éœ€è¦æŒ‡å®šé“¾åæˆ–è€…ç½‘ç»œå */ private String chainName; /** * æç°æ¬¡æ•° */ private AtomicInteger withdrawTimes = new AtomicInteger(0); /** * æœ€å°æç°æ‰‹ç»­è´¹ */ private BigDecimal withdrawMinFee = BigDecimal.ZERO; /** * æ‰‹ç»­è´¹æ¢ç®—æˆç¾å…ƒ */ private BigDecimal withdrawMinFee$ = BigDecimal.ZERO; /** * ä¼ å…¥å®æ—¶çš„å•ä»·ï¼Œè®¡ç®—å‡ºæ‰‹ç»­è´¹ç»å¯¹åˆ€ * @param unitPrice */ public void setWithdrawMinFee$(BigDecimal unitPrice) { this.withdrawMinFee$ = Utils.getScale(unitPrice.multiply(withdrawMinFee)); } /** * æœ€åä¸€æ¬¡çš„æç°æ—¶é—´ */ private AtomicLong lastWithdrawTime = new AtomicLong(System.currentTimeMillis()); /** * æœ€åä¸€æ¬¡ä¸‹å–å•æ—¶é—´ */ private AtomicLong lastPlaceSellOrderTime = new AtomicLong(System.currentTimeMillis()); private AtomicLong lastPlaceBuyOrderTime = new AtomicLong(System.currentTimeMillis()); /** * å–å•é»˜è®¤ä½ç½®,æ­¤ä½ç½®æ˜¯å£è¯­ä¸­çš„å–ä¸€å–äºŒï¼Œä¸æ˜¯æ•°ç»„ä¸‹æ ‡ */ private AtomicInteger askPosition = new AtomicInteger(0); /** * æŒ‚å•æ£€æŸ¥æ—¶é—´(å–å•) */ private int askOrderWaitSeconds = 5; /** * äº¤æ˜“æ‰€å›ºå®šæœ€å¤§ä¸‹å•é‡‘é¢(usdtä¸ºå•ä½) */ private BigDecimal CexMaxOrderForUSDT; /** * äº¤æ˜“æ‰€å›ºå®šæœ€å°ä¸‹å•é‡‘é¢(usdtä¸ºå•ä½) */ private BigDecimal CexMinOrderForUSDT; /** * ç•™å¸æ—¶ä¿å­˜çš„å–å‡ºä¸‹å•ID; * remain ç•™å­˜ sell å‡ºå”® orderId è®¢å•ID */ private String remainSellOrderId; /** * æç°æ¬¡æ•°è‡ªå¢ä¸€æ¬¡ */ public void increaseWithdrawTimes() { withdrawTimes.set(withdrawTimes.get() + 1); }} DecenterSymbolInfo ç±», ç”¨æ¥å­˜å‚¨æŸä¸ªäº¤æ˜“å¯¹(ABC/USDT)çš„Dexé…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245/** * &lt;p&gt; @Date : 2023/3/20 &lt;/p&gt; * &lt;p&gt; @Project : block-farming&lt;/p&gt; * * &lt;p&gt; @author konbluesky &lt;/p&gt; */@Accessors(chain = true)@Data@Slf4jpublic class DecenterSymbolInfo { private String dexName; private String dexProtocolVersion; public String getSymbol() { if(Strings.isNullOrEmpty(middleCoinContractAddress)) { return baseCurrency + &quot;/&quot; + quoteCurrency; }else{ return baseCurrency + &quot;/&quot; + middleCurrency + &quot;/&quot; + quoteCurrency; } } /** * æ³¨æ„è¿™é‡Œæ˜¯[é“¾ä¸Š]å¯¹åº”çš„åŸºç¡€è´§å¸ BTC */ private String baseCurrency; /** * æ³¨æ„è¿™é‡Œæ˜¯[é“¾ä¸Š]å¯¹åº”çš„äº¤æ˜“å¯¹æŠ¥ä»·è´§å¸ USDT */ private String quoteCurrency; /** * æ³¨æ„è¿™é‡Œæ˜¯[é“¾ä¸Š]å¯¹åº”çš„äº¤æ˜“å¯¹ä¸­é—´æŠ¥ä»·è´§å¸ */ private String middleCurrency; private Set&lt;Integer&gt; chainIds; /** * TODO æœªæ¥éœ€è¦æ”¯æŒä¸€ä¸ªå¸ç§åœ¨å¤šä¸ªé“¾ä¸Šçš„æ”¯æŒ, ç›®å‰åªè€ƒè™‘å¸ç§åªåœ¨ä¸€ä¸ªé“¾ä¸Šæ´»è·ƒ * @return */ public Integer getFirstChainId(){ return chainIds.iterator().next(); } /**************************************************************************************************/ /************************************** é“¾ä¸Šçš„åœ°å€é…ç½®ä¿¡æ¯ *******************************************/ /**************************************************************************************************/ /** * ä¸ºäº†æ–¹ä¾¿å­˜å–,å›´ç»•token,å°†å¸¸ç”¨çš„ä¿¡æ¯åŒ…è£…èµ·æ¥ */ private CurrencyBag stable; private CurrencyBag trade; private CurrencyBag middle; public void init() { if (stable == null) { stable = CurrencyBag.of(stableCoinContractAddress, quoteCurrency, getStableCoinDecimals()); } if (trade == null) { trade = CurrencyBag.of(tradeCoinContractAddress, baseCurrency, getTradeCoinDecimals()); } if (middle == null) { middle = CurrencyBag.of(middleCoinContractAddress, middleCurrency, getMiddleCoinDecimals()); } } /** * ç¨³å®šå¸çš„åˆçº¦åœ°å€ * USTD,ETH,BTC ç­‰ */ private String stableCoinContractAddress; /** * ä¸­é—´å¸çš„åˆçº¦åœ°å€ * BNB æœ‰è‡ªå·±ç‹¬ç«‹çš„é“¾çš„ç­‰ */ private String middleCoinContractAddress; /** * äº¤æ˜“å¸çš„åˆçº¦åœ°å€ * å³æœ€ç»ˆæ“ä½œçš„ç›®æ ‡å¸åœ°å€ * åŸä»£ç ä¸­çš„:swapCoinContractAdd */ private String tradeCoinContractAddress; /** * v3æµé€šæ€§çš„åˆçº¦åœ°å€ */ private String v3LoopContractAddress; /** * v3æ‰‹ç»­è´¹çš„ */ private String v3Fee; /** * å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€çš„åˆçº¦åœ°å€ */ private String swapContractAddress; /** * åå‘å¥—åˆ©ï¼Œä»è›‹ç³•åˆ°äº¤æ˜“æ‰€ï¼Œç¨³å®šå¸é¢åº¦ * bnbå¯¹å°±è¿›è¡Œäº¤æ˜“æ‰€ä»·æ ¼æŸ¥è¯¢ï¼Œè½¬æ¢æˆå¯¹åº”çš„bnb * &lt;pre&gt; * å£°æ˜ BidDepths,bidOnePrice,BidDepthsAllAmount; * swapStableCoinNumOut = bidOnePrice * BidDepthsAllAmount; * &lt;/pre&gt; */ private AtomicDouble swapStableCoinNumOut; /** * éç¨³å®šå¸çš„å…‘æ¢æ•°é‡,ä¸ªæ•° */ private AtomicDouble swapFStableCoinNum; /** * ç¨³å®šå¸çš„å…‘æ¢æ•°é‡,ä¸ªæ•° */ private AtomicDouble swapStableCoinNum; /** * ä»·æ ¼ç²¾åº¦ æœ€å°å°±æ˜¯0.0001 */ private String priceDecimals; /** * æ•°é‡ç²¾åº¦ æœ€å°å°±æ˜¯0.01 */ private String numDecimals; /** * å–æ—¶ç‡ƒçƒ§çš„æ‰‹ç»­è´¹ */ private BigDecimal burnFee; /** * å…¶ä»–è´¹ç”¨ï¼Œåˆæ­¥ç”¨æ¥ä¿å­˜è½¬ç§»è´¹ç”¨ï¼Œæœ‰äº›å¸ç§çš„è½¬ç§»è´¹ç”¨ */ private BigDecimal otherFee = BigDecimal.ZERO; /** * é“¾ä¸Šä¹°å¸æ»‘ç‚¹ */ private BigDecimal dexBuySlipPoint; private BigDecimal _origin_dexBuySlipPoint; /** * ä¹°æ—¶ ç¨ç‡ */ private BigDecimal buyTax = BigDecimal.ZERO; /** * å–æ—¶ ç¨ç‡ */ private BigDecimal sellTax = BigDecimal.ZERO; /** * äº¤æ˜“å¸çš„ç²¾åº¦,åœ¨ç¨‹åºå¯åŠ¨æ—¶é€šè¿‡TokenClientä»é“¾ä¸Šåˆçº¦ä¸­æŸ¥è¯¢ */ private int tradeCoinDecimals = 0; /** * ç¨³å®šå¸çš„ç²¾åº¦,åœ¨ç¨‹åºå¯åŠ¨æ—¶é€šè¿‡TokenClientä»é“¾ä¸Šåˆçº¦ä¸­æŸ¥è¯¢ */ private int stableCoinDecimals = 0; /** * ä¸­é—´å¸çš„ç²¾åº¦,åœ¨ç¨‹åºå¯åŠ¨æ—¶é€šè¿‡TokenClientä»é“¾ä¸Šåˆçº¦ä¸­æŸ¥è¯¢ */ private int middleCoinDecimals = 0; /** * é“¾ä¸Šå›ºå®šæœ€å¤§ä¸‹å•é‡‘é¢(usdtä¸ºå•ä½) */ private BigDecimal dexMaxOrderForUSDT; /** * é“¾ä¸Šå›ºå®šæœ€å°ä¸‹å•é‡‘é¢(usdtä¸ºå•ä½) */ private BigDecimal dexMinOrderForUSDT; /** * dexè´­ä¹°çŠ¶æ€ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦è›‹ç³•ä¹°äº†ï¼Œç„¶åå›äº¤æ˜“æ‰€ * å¯¹äºè¿™ç§æƒ…å†µï¼Œè¦è¿›è¡Œåœæ­¢è›‹ç³•è´­ä¹°åŠäº¤æ˜“æ‰€åˆ°è›‹ç³•çš„ä¸šåŠ¡ * æ ¹æ®äº¤æ˜“æ‰€å……å€¼åˆ°è´¦æ—¶é—´ ä¸€èˆ¬éœ€è¦2åˆ†é’Ÿï¼Œå³120ç§’ï¼Œé‚£130ç§’å†…éƒ½å¿…é¡»æŠŠä»·æ ¼é™ */ private AtomicLong dexBuyTimestamp = new AtomicLong(0); private String method; /** * åå‘å¥—åˆ©æ—¶ï¼Œéœ€è¦ç›‘æ§ä¹°ç›˜çš„æ•°æ®ï¼Œ è¿™æ˜¯ä¹°ç›˜çš„ä½ç½® * å¯¹åº”çš„æ˜¯centerSymbolInfoçš„askPosition */ private int buyPosition; /** * åå‘å¥—åˆ©æ—¶ï¼Œæ·±åº¦éœ€è¦*depthPro ï¼Œè¿›è¡Œæ‰“æŠ˜ */ private BigDecimal depthPro; public DecenterSymbolInfo setDexBuySlipPoint(BigDecimal dexBuySlipPoint) { this.dexBuySlipPoint = dexBuySlipPoint; // ä¿ç•™åŸå§‹å€¼ç”¨äºæ¢å¤ this._origin_dexBuySlipPoint = dexBuySlipPoint; return this; } private ExtensionDexHandlerConfig extensionDexHandlerConfig; /** * åå‘å¥—åˆ©æ—¶çš„æ”¾å¤§æ¯”ä¾‹ */ private BigDecimal replyPro; public boolean isV3(){ return getDexProtocolVersion().toLowerCase().contains(&quot;v3&quot;.toLowerCase()); } public boolean isV2(){ return getDexProtocolVersion().toLowerCase().contains(&quot;v2&quot;.toLowerCase()); } /** * å¯¹dexBuySlipPointæ»‘ç‚¹1.5å€ï¼› */ public void setDexBuySlipPointDouble() { dexBuySlipPoint = dexBuySlipPoint.multiply(replyPro); } public void resetDexBuySlipPoint() { dexBuySlipPoint = _origin_dexBuySlipPoint; }}","link":"/zh-CN/carry_coin_architecture_4/"},{"title":"Carry-Coin ä¸­ Jasypt çš„åº”ç”¨","text":"è‡ªä»æœ€è¿‘Lå›å°å¼Ÿç”µè„‘ä¸­æ¯’ï¼Œç–‘ä¼¼ç§é’¥æ³„æ¼ï¼Œå¯¼è‡´3W uè¢«ç›—ï¼Œåè§‚æˆ‘çš„ç¨‹åºä¸€ç›´ä»¥æ¥è£¸å¥”çš„çŠ¶æ€ä¸‹ï¼Œå†æ¬¡èŠèŠ±ä¸€ç´§ã€‚äºæ˜¯ï¼Œæˆ‘å¼€å§‹äº†å¯¹Spring Bootçš„jasyptåŠ å¯†é…ç½®çš„ç ”ç©¶ã€‚ æœ€åæƒ…å†µæœåŠ¡å™¨å³ä½¿è¢«é»‘ï¼Œä¹Ÿè¦å°½å¯èƒ½ä¿è¯ç¨‹åºçš„å®‰å…¨ã€‚ é…ç½®æ–‡ä»¶ä¸­å…³é”®ä¿¡æ¯ï¼š äº¤æ˜“æ‰€tokenï¼Œé’±åŒ…ç§é’¥åŠ å¯†ï¼› jarä¸­ymlæ‰“åŒ…æ—¶æ’é™¤ï¼ŒæœåŠ¡å™¨ä¸Šç”¨å¯†æ–‡é…ç½®æ‰§è¡Œï¼› è§£å¯†å¯†ç åŠ¨æ€è®¾ç½®ï¼› jasypt é›†æˆç¨‹åºå¼•å…¥pom.xml 12345 &lt;dependency&gt; &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt; &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.0.5&lt;/version&gt;&lt;/dependency&gt; application.yml 123jasypt: encryptor: password: ${JASYPT_ENCRYPTOR_PASSWORD} Application.java 12345678910111213141516171819202122/** * &lt;p&gt; @Date : 2023/3/19 &lt;/p&gt; * &lt;p&gt; @author konbluesky &lt;/p&gt; */@SpringBootApplication(scanBasePackages = &quot;com.block&quot;)@EnableScheduling@EnableAsync@EnableJpaAuditing// WARN bad smell@EncryptablePropertySources({ @EncryptablePropertySource(value = &quot;file:./config/application.yml&quot;,ignoreResourceNotFound = true), @EncryptablePropertySource(value = &quot;classpath:application.yml&quot;,ignoreResourceNotFound = true)})@EnableEncryptablePropertiespublic class Application { public static void main(String[] args) { SpringApplication.run(Application.class, args); }} æ‰“åŒ…æ’é™¤pom.xml,è®¾ç½®æ‰“åŒ…æ—¶æ’é™¤ymlæ–‡ä»¶ï¼Œé¿å…é“­æ–‡ymlè¯¯æ‰“åŒ…åˆ°jarä¸­ 123456789101112 &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.*&lt;/include&gt; &lt;/includes&gt; &lt;!-- ç”¨springboot æ‰“åŒ…æ—¶ æ’é™¤yml--&gt; &lt;excludes&gt; &lt;exclude&gt;**/*.yml&lt;/exclude&gt; &lt;/excludes&gt; &lt;/resource&gt;&lt;/resources&gt; å¯åŠ¨è„šæœ¬åŸå¯åŠ¨æ–¹å¼éœ€è¦é€šè¿‡-Djasypt.encryptor.password=â€the passwordâ€,æ¥è®¾ç½®åŠ å¯†å¯†ç ã€‚è¿™ç§æ–¹å¼ç”¨jps -mlvå¯ä»¥çœ‹åˆ°å¯åŠ¨å‘½ä»¤ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸å®‰å…¨ï¼Œä¾ç„¶å®¹æ˜“æ³„éœ²å¯†ç ã€‚ä¸ºäº†å®‰å…¨èµ·è§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨è„šæœ¬ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ JASYPT_ENCRYPTOR_PASSWORD æ¥åŠ å¯†é…ç½®æ–‡ä»¶ä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚è®¾ç½®ååˆæ‹…å¿ƒç¯å¢ƒå˜é‡è¢«echoå‡ºæ¥ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡æ—¶ï¼Œéœ€è¦éšè—è¾“å…¥å†…å®¹åŒæ—¶æ§åˆ¶å˜é‡ä½œç”¨åŸŸåœ¨shellå†…éƒ¨ï¼› æœ€ç»ˆè„šæœ¬å¦‚ä¸‹ï¼Œå…³é”®è¯­å¥æ˜¯exportå’Œunsetï¼› 12345678910111213141516171819202122232425262728293031323334353637383940#!/bin/bash# è·å–å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„SCRIPT_DIR=&quot;$(cd &quot;$(dirname &quot;$0&quot;)&quot; &amp;&amp; pwd)&quot;# è¿›å…¥è„šæœ¬æ‰€åœ¨ç›®å½•cd &quot;$SCRIPT_DIR&quot;# æç¤ºç”¨æˆ·è¾“å…¥ JASYPT_ENCRYPTOR_PASSWORDï¼Œå¹¶éšè—è¾“å…¥å†…å®¹read -sp &quot;Enter App password: &quot; JASYPT_PASSWORDechoexport JASYPT_ENCRYPTOR_PASSWORD=$JASYPT_PASSWORD# æ£€æŸ¥æ˜¯å¦è¾“å…¥äº† JASYPT_ENCRYPTOR_PASSWORDif [ -z &quot;$JASYPT_PASSWORD&quot; ]; then echo &quot;jasypt.encryptor.password is required.&quot; exit 1fi# å¯åŠ¨Javaç¨‹åºå¹¶ä½¿ç”¨nohupç¡®ä¿å®ƒåœ¨åå°è¿è¡Œnohup java -jar $(ls -t trade-monitor-*.jar | head -1) \\ --spring.config.location=file:./config/ \\ --spring.application.name=gateio\\ -XX:+PrintGCDetails \\ -XX:+PrintGCDateStamps \\ -Xloggc:$SCRIPT_DIR/gc.log \\ -Xmx16G \\ -Xms8G \\ -XX:+UseG1GC \\ -XX:NewRatio=3 \\ -XX:SurvivorRatio=8 \\ -XX:MaxMetaspaceSize=1024M \\ -XX:MaxGCPauseMillis=200 \\ -Xss1M &gt;/dev/null 2&gt;&amp;1 &amp;# æ¸…é™¤ç¯å¢ƒå˜é‡unset JASYPT_ENCRYPTOR_PASSWORD","link":"/zh-CN/carry_coin_jasypt/"},{"title":"ä½¿ç”¨ Python è„šæœ¬æ¸…ç† Carry-Coin ç¨‹åºä¸­çš„ Logback æ—¥å¿—","text":"éšç€ç›‘æ§çš„å¸ç§è¶Šæ¥è¶Šå¤šï¼Œæˆ‘çš„ Carry-Coin ç¨‹åºä¸­æ—¥å¿—æ•°æ®çš„æ—¥è´¨é‡ä¹Ÿä¸æ–­å¢åŠ ï¼Œæ¯å¤©çš„æ—¥å¿—æ–‡ä»¶å¤§å°è¾¾åˆ°çº¦ 40Gã€‚è¿™ä¸ä»…å ç”¨äº†å¤§é‡çš„å­˜å‚¨ç©ºé—´ï¼Œè¿˜ç»™æ—¥å¿—åˆ†æå¸¦æ¥äº†æŒ‘æˆ˜ã€‚ä¸ºäº†æ›´æœ‰æ•ˆåœ°ç®¡ç†è¿™äº›æ—¥å¿—ï¼Œæˆ‘å·²ç»ç¼–å†™äº†ä¸€ä¸ªç¨‹åºæ¥æå–æ—¥å¿—ä¸­ä¸äº¤æ˜“ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾›åç»­åˆ†æä½¿ç”¨ã€‚ ç„¶è€Œï¼Œåœ¨é…ç½® Logback çš„ logback-spring.xml æ–‡ä»¶æ—¶ï¼Œæˆ‘è®¾ç½®äº† appender.rollingPolicy.maxHistory å­—æ®µï¼Œæ—¨åœ¨åªä¿ç•™æœ€è¿‘ 2 å¤©çš„æ—¥å¿—ã€‚ç„¶è€Œï¼Œè¿™ä¸€é…ç½®å¹¶æœªå¦‚é¢„æœŸç”Ÿæ•ˆã€‚å› æ­¤ï¼Œæˆ‘å†³å®šæš‚æ—¶ä½¿ç”¨ Python è„šæœ¬æ¥æ‰‹åŠ¨æ¸…ç†æ—§çš„æ—¥å¿—æ–‡ä»¶ã€‚ é—®é¢˜èƒŒæ™¯åœ¨ Carry-Coin ç¨‹åºä¸­ï¼Œéšç€å¯¹è¶Šæ¥è¶Šå¤šå¸ç§çš„ç›‘æ§ï¼Œæ—¥å¿—æ–‡ä»¶çš„å¤§å°æ€¥å‰§å¢åŠ ï¼Œå¯¼è‡´æ¯å¤©äº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶çº¦ä¸º 40Gã€‚è™½ç„¶æˆ‘å·²ç¼–å†™ç¨‹åºæå–äº¤æ˜“ä¿¡æ¯ï¼Œä½†å¤§é‡çš„æ—¥å¿—æ•°æ®ä¾ç„¶å ç”¨äº†è¿‡å¤šçš„ç£ç›˜ç©ºé—´ã€‚ä¸ºæ­¤ï¼Œæˆ‘å°è¯•é€šè¿‡è°ƒæ•´ Logback çš„é…ç½®æ¥é™åˆ¶ä¿ç•™çš„æ—¥å¿—æ•°é‡ã€‚ Logback æ—¥å¿—ç®¡ç†ä¸ºäº†ç®¡ç†æ—¥å¿—ï¼Œæˆ‘åœ¨ logback-spring.xml æ–‡ä»¶ä¸­é…ç½®äº†ä»¥ä¸‹å†…å®¹ï¼š 12345678910&lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;file&gt;logs/carry-coin.log&lt;/file&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;logs/carry-coin.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt; &lt;maxHistory&gt;2&lt;/maxHistory&gt; &lt;!-- åªä¿ç•™æœ€è¿‘2å¤©çš„æ—¥å¿— --&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n&lt;/pattern&gt; &lt;/encoder&gt;&lt;/appender&gt; å°½ç®¡å¦‚æ­¤ï¼ŒmaxHistory çš„é…ç½®å¹¶æœªç”Ÿæ•ˆï¼Œå› æ­¤éœ€è¦å¯»æ‰¾æ›¿ä»£è§£å†³æ–¹æ¡ˆã€‚ Python è„šæœ¬å®ç°æˆ‘ç¼–å†™äº†ä¸€ä¸ª Python è„šæœ¬æ¥è‡ªåŠ¨æ¸…ç†æ—¥å¿—æ–‡ä»¶ï¼Œä¿ç•™æœ€è¿‘ 2 å¤©çš„æ—¥å¿—ã€‚ä»¥ä¸‹æ˜¯è„šæœ¬çš„å®ç°ï¼š 12345678910111213141516171819202122import osimport timefrom datetime import datetime, timedelta# è·å–ä¸¤å¤©å‰çš„æ—¶é—´days_to_keep = 2cutoff_time = datetime.now() - timedelta(days=days_to_keep)# å®šä¹‰æ—¥å¿—ç›®å½•log_directory = &quot;/path/to/logs&quot;# éå†æ—¥å¿—ç›®å½•ï¼Œåˆ é™¤ä¿®æ”¹æ—¶é—´åœ¨ cutoff_time ä¹‹å‰çš„ .log æ–‡ä»¶for filename in os.listdir(log_directory): file_path = os.path.join(log_directory, filename) if os.path.isfile(file_path) and filename.endswith(&quot;.log&quot;): file_mtime = os.path.getmtime(file_path) file_mtime_dt = datetime.fromtimestamp(file_mtime) if file_mtime_dt &lt; cutoff_time: os.remove(file_path) print(f&quot;Deleted: {file_path}&quot;) è¯´æ˜ è„šæœ¬è·å–å½“å‰æ—¶é—´çš„ä¸¤å¤©å‰ï¼Œéå†æŒ‡å®šæ—¥å¿—ç›®å½•ï¼Œåˆ é™¤ä¿®æ”¹æ—¶é—´åœ¨è¯¥æ—¶é—´ä¹‹å‰çš„ .log æ–‡ä»¶ã€‚ ä»…å¤„ç†ä»¥ .log ç»“å°¾çš„æ–‡ä»¶ï¼Œç¡®ä¿åªåˆ é™¤æ—¥å¿—æ–‡ä»¶ã€‚ è®¾ç½® Cron å®šæ—¶ä»»åŠ¡ä¸ºäº†å®šæœŸæ‰§è¡Œè¿™ä¸ªæ¸…ç†è„šæœ¬ï¼Œæˆ‘ä½¿ç”¨ cron è®¾ç½®äº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä»¥ä¸‹æ˜¯è®¾ç½®æ­¥éª¤ï¼š æ‰“å¼€ crontab ç¼–è¾‘å™¨ï¼š 1crontab -e æ·»åŠ å¦‚ä¸‹å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å‡Œæ™¨ 1 ç‚¹æ‰§è¡Œï¼š 10 1 * * * /usr/bin/python3 /path/to/your_script.py &gt;&gt; /path/to/cron_log.log 2&gt;&amp;1 ä¿å­˜å¹¶é€€å‡º crontabã€‚ æ€»ç»“é€šè¿‡ä½¿ç”¨ Python è„šæœ¬ï¼Œæˆ‘èƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç† Carry-Coin ç¨‹åºä¸­ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ï¼Œé¿å…äº†å› æ—¥å¿—æ–‡ä»¶è¿‡å¤§å¯¼è‡´çš„ç£ç›˜ç©ºé—´ä¸è¶³çš„é—®é¢˜ã€‚è™½ç„¶ Logback çš„é…ç½®æœªèƒ½å¦‚é¢„æœŸç”Ÿæ•ˆï¼Œä½†ä¸´æ—¶è§£å†³æ–¹æ¡ˆä¸ºæˆ‘å¸¦æ¥äº†ä¾¿åˆ©ã€‚åœ¨æœªæ¥çš„é¡¹ç›®ä¸­ï¼Œæˆ‘å°†ç»§ç»­æ¢ç´¢æ›´å¥½çš„æ—¥å¿—ç®¡ç†ç­–ç•¥ï¼Œä»¥ç¡®ä¿ç¨‹åºé«˜æ•ˆè¿è¡Œã€‚ å‚è€ƒæ–‡æ¡£ Logback æ–‡æ¡£","link":"/zh-CN/carry_coin_log_cleanup/"},{"title":"ç»ˆç«¯UIå¼€å‘ä¸­Emojiå­—ç¬¦é”™ä½é—®é¢˜çš„åˆ†æä¸è§£å†³","text":"äº‹æƒ…çš„èµ·å› åœ¨å¼€å‘åŸºäºBubble Teaæ¡†æ¶çš„FRP CLI UIé¡¹ç›®æ—¶ï¼Œç»ˆç«¯ç•Œé¢ä¹Ÿè¦æå¾—å¥½çœ‹ç‚¹ã€‚äºæ˜¯å°±æƒ³ç”¨Emojiå›¾æ ‡æ¥è£…é¥°èœå•ï¼Œè®©ç•Œé¢çœ‹èµ·æ¥æ›´ç°ä»£åŒ–ä¸€äº›ã€‚ç»“æœæ²¡æƒ³åˆ°ï¼Œè¿™ä¸€æå°±è¢«Emojiç»™å‘äº†ä¸ªåŠæ­»ï¼Œæ•´ä¸ªç•Œé¢çš„å¸ƒå±€å®Œå…¨ä¹±å¥—äº†ã€‚ è¢«å‘çš„æƒ¨çŠ¶æˆ‘å¤©çœŸåœ°ä»¥ä¸ºï¼ŒåŠ ä¸ªEmojiå¾ˆç®€å•å•Š: 123456789menuItems := []string{ &quot;ğŸ¯ æœåŠ¡ç«¯é…ç½®&quot;, &quot;ğŸ’» å®¢æˆ·ç«¯é…ç½®&quot;, &quot;ğŸ”— æ·»åŠ ä»£ç†&quot;, &quot;ğŸ‘¥ æ·»åŠ è®¿é—®è€…&quot;, &quot;ğŸ“ é€‰æ‹©é…ç½®æ–‡ä»¶&quot;, &quot;ğŸ‘€ é¢„è§ˆé…ç½®&quot;, &quot;ğŸ’¾ ä¿å­˜é…ç½®&quot;} ç»“æœä¸€è¿è¡Œï¼Œäººéƒ½å‚»äº†ï¼š èœå•é¡¹å¯¹é½å®Œå…¨ä¹±äº†å¥—ï¼Œçœ‹ç€åƒå–é†‰äº†ä¸€æ · è¾¹æ¡†è·Ÿå†…å®¹å¯¹ä¸ä¸Š æ–‡æœ¬è¦ä¹ˆè¢«åˆ‡æ‰ä¸€åŠï¼Œè¦ä¹ˆè·‘åˆ°å¤–é¢å»äº† å·¦å³åˆ†æ çš„å¸ƒå±€æ›´æ˜¯æ­ªå¾—æ²¡çœ¼çœ‹ é—®é¢˜æ ¹æºåˆ†æè°ƒè¯•åå‘ç°äº†é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼š 1. Emojiå­—ç¬¦å®½åº¦ä¸ç»Ÿä¸€ä¸åŒçš„Emojiåœ¨ç»ˆç«¯ä¸­å ç”¨çš„æ˜¾ç¤ºå®½åº¦å¹¶ä¸ç›¸åŒï¼š æœ‰äº›åƒ ğŸ¯ å ç”¨1ä¸ªå­—ç¬¦å®½åº¦ æœ‰äº›åƒ ğŸ‘ï¸ å ç”¨2ä¸ªå­—ç¬¦å®½åº¦ æ›´å¤æ‚çš„æ˜¯ ğŸ‘¨â€ğŸ’» è¿™ç§ç»„åˆEmojiï¼Œç”±å¤šä¸ªUnicodeç ç‚¹ç»„æˆï¼Œå®½åº¦è®¡ç®—æ›´å¤æ‚ 2. len()å‡½æ•°çš„è¯¯åŒºæœ€åˆä½¿ç”¨Goçš„len()æ¥è®¡ç®—å®½åº¦ï¼Œç»“æœå‘ç°å®Œå…¨ä¸å‡†ç¡®ï¼š 1234567// ç”¨len()ç®—å‡ºæ¥çš„å­—èŠ‚é•¿åº¦len(&quot;ğŸ¯&quot;) // è¿”å› 4 (UTF-8ç¼–ç )len(&quot;ğŸ‘€&quot;) // è¿”å› 4 (UTF-8ç¼–ç )// ä½†åœ¨ç»ˆç«¯é‡Œçš„å®é™…æ˜¾ç¤ºå®½åº¦å¯èƒ½å®Œå…¨ä¸åŒ// ğŸ¯ å®é™…æ˜¾ç¤ºå®½åº¦: å¯èƒ½æ˜¯1ä¹Ÿå¯èƒ½æ˜¯2// ğŸ‘€ å®é™…æ˜¾ç¤ºå®½åº¦: å¯èƒ½æ˜¯1ä¹Ÿå¯èƒ½æ˜¯2 3. ç»ˆç«¯å…¼å®¹æ€§å·®å¼‚ä¸åŒç»ˆç«¯å¯¹Emojiçš„æ”¯æŒå­˜åœ¨å·®å¼‚ï¼š iTerm2å¯èƒ½å°†æ‰€æœ‰Emojiè§†ä¸º2ä¸ªå­—ç¬¦å®½åº¦ Windows Terminalæœ‰è‡ªå·±çš„å®½åº¦è®¡ç®—ç®—æ³• è€ç‰ˆæœ¬ç»ˆç«¯ä¸æ”¯æŒEmojiï¼Œä¼šæ˜¾ç¤ºä¹±ç æˆ–å ä½ç¬¦ é—®é¢˜å½±å“ç•Œé¢å¸ƒå±€çš„å®é™…æ•ˆæœï¼š æœŸæœ›æ•ˆæœ vs å®é™…æ•ˆæœ12345678910111213// æœŸæœ›çš„å¸ƒå±€æ•ˆæœâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â–¶ ğŸ¯ æœåŠ¡ç«¯é…ç½® â”‚â”‚ ğŸ’» å®¢æˆ·ç«¯é…ç½® â”‚â”‚ ğŸ”— æ·»åŠ ä»£ç† â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜// å®é™…æ¸²æŸ“ç»“æœï¼ˆé”™ä½ï¼‰â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â–¶ ğŸ¯ æœåŠ¡ç«¯é…ç½® â”‚â”‚ ğŸ’» å®¢æˆ·ç«¯é…ç½® â”‚â”‚ ğŸ”— æ·»åŠ ä»£ç† â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å®½åº¦è®¡ç®—é”™è¯¯é”™è¯¯åœ°ä½¿ç”¨å­—èŠ‚é•¿åº¦æ¥è®¡ç®—å¸ƒå±€å®½åº¦ï¼š 12345// é”™è¯¯çš„è®¡ç®—æ–¹å¼leftWidth := len(&quot;ğŸ¯ æœåŠ¡ç«¯é…ç½®&quot;) // è¿”å›å­—èŠ‚æ•°ï¼Œè€Œéæ˜¾ç¤ºå®½åº¦rightWidth := totalWidth - leftWidth - padding// ç»“æœï¼šå³ä¾§å†…å®¹è¢«æŒ¤å‹æˆ–è¶…å‡ºè¾¹ç•Œ è§£å†³æ–¹æ¡ˆé€šè¿‡è°ƒç ”æ‰¾åˆ°äº†å‡ ä¸ªæœ‰æ•ˆçš„è§£å†³æ–¹æ³•ï¼š 1. ä½¿ç”¨Unicodeå®½åº¦è®¡ç®—åº“ä½¿ç”¨ github.com/mattn/go-runewidth åº“æ¥æ­£ç¡®è®¡ç®—Unicodeå­—ç¬¦çš„æ˜¾ç¤ºå®½åº¦ï¼š 123456789import &quot;github.com/mattn/go-runewidth&quot;// æ­£ç¡®çš„å®½åº¦è®¡ç®—æ–¹æ³•func getDisplayWidth(s string) int { return runewidth.StringWidth(s)}// ä½¿ç”¨ç¤ºä¾‹width := getDisplayWidth(&quot;ğŸ¯ æœåŠ¡ç«¯é…ç½®&quot;) // è¿”å›çœŸå®çš„æ˜¾ç¤ºå®½åº¦ 2. æ–‡æœ¬å¤„ç†å‡½æ•°ä¼˜åŒ–åŸºäºæ­£ç¡®çš„å®½åº¦è®¡ç®—ï¼Œé‡æ–°å®ç°æ–‡æœ¬çš„æˆªæ–­å’Œå¡«å……ï¼š 123456789101112131415import &quot;github.com/mattn/go-runewidth&quot;// å®‰å…¨çš„æ–‡æœ¬æˆªæ–­ï¼ˆä¸ä¼šæŠŠEmojiåˆ‡æ–­ä¸€åŠï¼‰func truncateString(s string, width int) string { return runewidth.Truncate(s, width, &quot;...&quot;)}// æ­£ç¡®çš„æ–‡æœ¬å¡«å……å¯¹é½func padString(s string, width int) string { currentWidth := runewidth.StringWidth(s) if currentWidth &gt;= width { return s } return s + strings.Repeat(&quot; &quot;, width-currentWidth)} 3. å¸ƒå±€ç®—æ³•é‡æ„é‡æ–°è®¾è®¡å¸ƒå±€ç®—æ³•ï¼ŒåŸºäºæ­£ç¡®çš„å®½åº¦è®¡ç®—ï¼š 123456789101112131415// è®¡ç®—å®é™…æ˜¾ç¤ºå®½åº¦func calculateRequiredWidth(items []string) int { maxWidth := 0 for _, item := range items { width := runewidth.StringWidth(item) // ä½¿ç”¨æ­£ç¡®çš„å®½åº¦è®¡ç®— if width &gt; maxWidth { maxWidth = width } } return maxWidth}// æ­£ç¡®åˆ†é…å·¦å³æ çš„å®½åº¦leftWidth := calculateRequiredWidth(menuItems) + paddingrightWidth := totalWidth - leftWidth - separatorWidth 4. ç»ˆç«¯å…¼å®¹æ€§å¤„ç†é’ˆå¯¹ä¸æ”¯æŒEmojiçš„ç»ˆç«¯æä¾›é™çº§æ–¹æ¡ˆï¼š 12345678910111213// æ£€æµ‹ç»ˆç«¯Emojiæ”¯æŒfunc detectEmojiSupport() bool { term := os.Getenv(&quot;TERM&quot;) return strings.Contains(term, &quot;256color&quot;) || strings.Contains(term, &quot;truecolor&quot;)}// åŠ¨æ€é€‰æ‹©å›¾æ ‡ç±»å‹func getMenuIcon(hasEmojiSupport bool, iconType string) string { if !hasEmojiSupport { return getAsciiIcon(iconType) // ä½¿ç”¨ASCIIå­—ç¬¦æ›¿ä»£ } return getEmojiIcon(iconType)} æœ€ä½³å®è·µå»ºè®®æ€»ç»“å‡ ä¸ªå¼€å‘ç»éªŒï¼š 1. è®¾è®¡é˜¶æ®µè€ƒè™‘ ä¼˜å…ˆé€‰æ‹©å®½åº¦ç›¸å¯¹ä¸€è‡´çš„Emojiå­—ç¬¦ æå‰å‡†å¤‡ASCIIå­—ç¬¦çš„å¤‡ç”¨æ–¹æ¡ˆ åœ¨å¤šç§ç»ˆç«¯ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯• 2. ä»£ç å®ç°è§„èŒƒå»ºè®®å°è£…ç»Ÿä¸€çš„æ–‡æœ¬æ¸²æŸ“å™¨ï¼š 123456789101112131415161718// ç»Ÿä¸€çš„æ–‡æœ¬æ¸²æŸ“å™¨type TextRenderer struct { useEmoji bool width int}func (tr *TextRenderer) RenderMenuItem(text string, icon string) string { fullText := icon + &quot; &quot; + text return tr.padToWidth(fullText, tr.width)}func (tr *TextRenderer) padToWidth(s string, width int) string { currentWidth := runewidth.StringWidth(s) if currentWidth &gt;= width { return runewidth.Truncate(s, width, &quot;...&quot;) } return s + strings.Repeat(&quot; &quot;, width-currentWidth)} 3. æµ‹è¯•è¦†ç›–è¦ç‚¹ å¤šç»ˆç«¯ç¯å¢ƒæµ‹è¯•ï¼ˆiTerm2ã€Windows Terminalã€ä¼ ç»Ÿç»ˆç«¯ï¼‰ ä¸åŒè¯­è¨€ç¯å¢ƒéªŒè¯ï¼ˆä¸­æ–‡ã€æ—¥æ–‡ç­‰ï¼‰ çª—å£å¤§å°å˜åŒ–æ—¶çš„å¸ƒå±€é€‚åº”æ€§ æ€»ç»“é€šè¿‡è¿™æ¬¡å¼€å‘ç»å†ï¼Œæ€»ç»“å‡ºå‡ ä¸ªå…³é”®è¦ç‚¹ï¼š é¿å…ä½¿ç”¨len()è®¡ç®—Emojiå®½åº¦ï¼šåº”ä½¿ç”¨runewidthåº“è¿›è¡Œæ­£ç¡®è®¡ç®— å®ç°å…¼å®¹æ€§é™çº§æ–¹æ¡ˆï¼šä¸æ˜¯æ‰€æœ‰ç»ˆç«¯éƒ½å®Œå…¨æ”¯æŒEmoji é‡æ„å¸ƒå±€ç®—æ³•ï¼šåŸºäºæ­£ç¡®çš„å­—ç¬¦æ˜¾ç¤ºå®½åº¦è¿›è¡Œè®¡ç®— å…¨é¢æµ‹è¯•éªŒè¯ï¼šåœ¨å¤šç§ç»ˆç«¯ç¯å¢ƒä¸­éªŒè¯æ•ˆæœ Emojiå­—ç¬¦åœ¨ç»ˆç«¯UIä¸­è™½ç„¶èƒ½æå‡è§†è§‰æ•ˆæœï¼Œä½†ä¹Ÿå¸¦æ¥äº†å­—ç¬¦å®½åº¦è®¡ç®—å’Œå¸ƒå±€å¯¹é½çš„æŒ‘æˆ˜ã€‚é€šè¿‡é‡‡ç”¨æ­£ç¡®çš„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³è¿™äº›é—®é¢˜ï¼Œæ—¢ä¿æŒç•Œé¢ç¾è§‚æ€§ï¼Œåˆç¡®ä¿è‰¯å¥½çš„å…¼å®¹æ€§ã€‚ è®°å½•äºFRP CLI UIå¼€å‘è¿‡ç¨‹ä¸­","link":"/zh-CN/emoji-ui-alignment-issues/"},{"title":"Miniconda Config","text":"Install12curl -o Miniconda3-latest-MacOSX-x86_64.sh https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.shbash Miniconda3-latest-MacOSX-x86_64.sh Command123456conda init # åˆå§‹åŒ–conda config --show # æ‰“å°é…ç½®conda config --set auto_activate_base false # æ‰“å¼€terminalæ—¶è‡ªåŠ¨åˆå§‹åŒ–å¼€å…³eval &quot;$(/Users/xxxx/miniconda3/bin/conda shell.YOUR_SHELL_NAME hook)&quot;# YOUR_SHELL_NAME æ›¿æ¢æˆä½ ä½¿ç”¨çš„ shellï¼Œä¾‹å¦‚ bash æˆ– zshconda init --reverse $SHELL bash_profile 123456789101112131415# &gt;&gt;&gt; conda initialize &gt;&gt;&gt;# !! Contents within this block are managed by 'conda init' !!__conda_setup=&quot;$('/Users/xxxx/miniconda3/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)&quot;if [ $? -eq 0 ]; then eval &quot;$__conda_setup&quot;else if [ -f &quot;/Users/xxxx/miniconda3/etc/profile.d/conda.sh&quot; ]; then . &quot;/Users/xxxx/miniconda3/etc/profile.d/conda.sh&quot; else export PATH=&quot;/Users/xxxx/miniconda3/bin:$PATH&quot; fifiunset __conda_setup# &lt;&lt;&lt; conda initialize &lt;&lt;&lt;","link":"/zh-CN/conda_mark/"},{"title":"ComfyUI æœåŠ¡ç³»ç»Ÿè¯´æ˜æ–‡æ¡£","text":"ç³»ç»Ÿæ¦‚è¿°Comfy æœåŠ¡ç³»ç»Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å›¾åƒç”ŸæˆæœåŠ¡ï¼Œç”±ä¸‰ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼š Comfy Serviceï¼šæ ¸å¿ƒæœåŠ¡èŠ‚ç‚¹ï¼Œè´Ÿè´£å®é™…çš„å›¾åƒç”Ÿæˆä»»åŠ¡ Comfy Balancerï¼šè´Ÿè½½å‡è¡¡å™¨ï¼Œè´Ÿè´£ä»»åŠ¡åˆ†å‘å’ŒèŠ‚ç‚¹ç®¡ç† ComfyUI: è´Ÿè´£æœ€ç»ˆå›¾ç‰‡æ¸²æŸ“ç”ŸæˆåŠ¨ä½œ é¡¹ç›®åœ°å€ : https://github.com/konbluesky/ComfyUI-Learning ç¯å¢ƒä¾èµ– MacOS M1 32G Python3.11 Redis Logdy è½»é‡çº§æ—¥å¿—æŸ¥çœ‹å¹³å° å®‰è£…è¿è¡Œè¯´æ˜ æœåŠ¡å®‰è£…è¯´æ˜ 1docker-compose up Logdy æ—¥å¿—å¹³å° : http://localhost:8080 Balancer åå° : http://localhost:7999 è¾“å…¥ç”¨æˆ·åï¼šcomfy å¯†ç :comfy119.. åè¿›å…¥swaggeré¡µé¢è°ƒè¯•æ¥å£ Service 1 : http://localhost:8101 è¾“å…¥ç”¨æˆ·åï¼šcomfy å¯†ç :comfy119.. åè¿›å…¥swaggeré¡µé¢è°ƒè¯•æ¥å£ Service 2 : http://localhost:8102 ComfyUI å®‰è£…å‚è€ƒ å®¢æˆ·ç«¯ : Win &amp; MacOS å®˜ç½‘ä¸‹è½½ æºç å®‰è£…: https://github.com/comfyanonymous/ComfyUI å®‰è£…å®Œæˆåå¯ç›´æ¥æ‰“å¼€appï¼Œä¹Ÿå¯ä»¥ç”¨æµè§ˆå™¨è®¿é—®http://localhost:8000 (äºŒè€…ç­‰æ•ˆ) å¼€å‘è°ƒè¯• 1docker-compose down &amp;&amp; docker-compose up --build æœåŠ¡é…ç½®è¯´æ˜ï¼Œä¸»è¦æ˜¯docker-compose.yml æ–‡ä»¶ä¸­é…ç½®çš„å‚æ•°,å¤§éƒ¨åˆ†å‚æ•°å·²æš´éœ²å‡ºæ¥,è¿™é‡Œä»…åˆ—å‡ºç»„ä»¶ç›¸å…³å‚æ•°ï¼Œå¿½ç•¥logdyå’Œredisçš„ 12345678910111213141516171819202122232425262728293031323334353637383940414243comfy_balancer: build: context: ./comfy-balancer dockerfile: Dockerfile ports: - 7999:7999 depends_on: - redis environment: API_USERNAME: &quot;comfy&quot; API_PASSWORD: &quot;comfy119..&quot; SERVICE_HOST: &quot;comfy_balancer&quot; SERVICE_PORT: 7999 REDIS_HOST: &quot;redis&quot; REDIS_PORT: &quot;6379&quot; REDIS_PASSWORD: &quot;PAssWord123&quot; REDIS_DB: &quot;0&quot; networks: - comfy_netcomfy_service_1: build: context: ./comfy-service dockerfile: Dockerfile ports: - 8101:8101 env_file: - ./comfy-service/.env environment: SERVICE_HOST: &quot;comfy_service_1&quot; SERVICE_PORT: 8101 REDIS_HOST: &quot;redis&quot; REDIS_PORT: &quot;6379&quot; REDIS_PASSWORD: &quot;PAssWord123&quot; REDIS_DB: &quot;0&quot; API_USERNAME: &quot;comfy&quot; API_PASSWORD: &quot;comfy119..&quot; depends_on: - redis - logdy networks: - comfy_net ç»„ä»¶è¯´æ˜Comfy Balanceræ–‡ä»¶è¯´æ˜1234567comfy-balancerâ”œâ”€â”€ config.pyâ”œâ”€â”€ Dockerfileâ”œâ”€â”€ logger.pyâ”œâ”€â”€ main.pyâ”œâ”€â”€ requirements.txtâ””â”€â”€ web.py Comfy Serviceæ–‡ä»¶è¯´æ˜1234567891011121314comfy-serviceâ”œâ”€â”€ comfy_api.pyâ”œâ”€â”€ config.pyâ”œâ”€â”€ Dockerfileâ”œâ”€â”€ health_check.pyâ”œâ”€â”€ logger.py â”œâ”€â”€ main.pyâ”œâ”€â”€ models.pyâ”œâ”€â”€ paths.pyâ”œâ”€â”€ requirements.txtâ”œâ”€â”€ web.pyâ””â”€â”€ workflows â”œâ”€â”€ first-workflow-api.json â””â”€â”€ first-workflow.json workflowsï¼š é…ç½®æ–‡ä»¶è¯´æ˜ï¼Œä¸€å¥—æµç¨‹çš„apiæè¿°æ–‡ä»¶å’Œæ¨¡æ¿æ–‡ä»¶å‰ç¼€å‘½åéœ€è¦ä¸€è‡´ï¼Œ apiæ–‡ä»¶ç”±uiç•Œé¢å¯¼å‡º ï¼Œæ“ä½œè·¯å¾„å·¥ä½œæµ-&gt;å¯¼å‡ºï¼ˆAPIï¼‰ æ¨¡æ¿æ–‡ä»¶ä»ComfyUIå®‰è£…æ—¶è®¾ç½®çš„å·¥ä½œç›®å½•è·å–ï¼Œè·¯å¾„{WORK_HOME}/user/default/workflows å…¶ä»–æ–‡ä»¶12345testâ”œâ”€â”€ CompyUI.http # ComfyUI æ¥å£æµ‹è¯•çš„httpè¯·æ±‚æ–‡ä»¶â”œâ”€â”€ app-prompt.json # apiæ•°æ®â”œâ”€â”€ logdy_test.http # logdyå¹³å°æµ‹è¯•çš„httpè¯·æ±‚æ–‡ä»¶â””â”€â”€ prompt.json # æ¨¡æ¿æ•°æ® éƒ¨ç½²å›¾ æ•ˆæœ ComfyUI workflowè®¾è®¡,å¯¹ç…§ComfyUI_StoryDiffusionä¸­Example æ¸²æŸ“ç»“æœ Logdy Balancer ä»…åŒ…å«å›¾ç‰‡ç”Ÿæˆï¼Œä»»åŠ¡æŸ¥è¯¢ä¸»è¦æ¥å£ Service åŒ…å«å›´ç»•å›¾ç‰‡ç”Ÿæˆï¼ŒcomfyUIèŠ‚ç‚¹ä¿¡æ¯ç»å¤§éƒ¨åˆ†æ¥å£ å¾…å®Œå–„ &amp; æ€è€ƒ åŸºäºå…ˆå®ç°ä¸»è¦æµç¨‹å’ŒåŠŸèƒ½çš„åŸåˆ™,ComfyUIå¹¶ä¸ºä½¿ç”¨æºç å®‰è£…,éœ€ç¼–å†™é…å¥—å®‰è£…çš„shellè„šæœ¬ å‘Šè­¦ä¿¡æ¯æ¨é€åŠŸèƒ½ comfy_api.py ä¸­workflow.json æ¯æ¬¡requestéƒ½è¦ä»æ–‡ä»¶åŠ è½½ï¼Œæµªè´¹IOï¼Œå¯æ”¹æˆä¸€æ¬¡load æ‰”åˆ°redisä¸­ï¼› ä¼˜åŒ–æ—¥å¿—è®°å½•åŠŸèƒ½, ç›®å‰åªæœ‰åº”ç”¨æ—¥å¿—è¾“å‡ºåˆ°logdyä¸­ï¼Œåº”å°†comfyUIä¸­æ‰§è¡Œæ—¥å¿—æ”¶é›†è¿‡æ¥ æ€è·¯1: è¯»comfyUIæ–‡ä»¶è¾“å‡ºåˆ°logdyä¸­,ä½†æ˜¯è§‚å¯Ÿäº†/Users/xxx/Library/Logs/ComfyUIä¸­çš„æ—¥å¿—ï¼Œä¹Ÿå¹¶ä¸æ˜¯é‚£å®Œå–„å’Œè¯¦ç»† æ²¡æœ‰taskå…·ä½“æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿—ï¼Œå¯èƒ½æ˜¯æ—¥å¿—çº§åˆ«é—®é¢˜ï¼Œåç»­ç ”ç©¶ä¸‹ æ€è·¯2: æ‰€æœ‰comfyUI webè¯·æ±‚é€»è¾‘éƒ½é›†ä¸­åœ¨server.py ä¸­ï¼Œå¯åœ¨è¿™é‡ŒäºŒæ¬¡å¼€å‘å‚è€ƒserviceä¸­logger.pyçš„å¥—è·¯ï¼ŒæŠŠå…³é”®æ—¥å¿—é€šè¿‡tcpæ–¹å¼æ‰”åˆ°logdyä¸­ comfyUI é€šè¿‡UIå¯¼å‡ºapi.json æ¯”è¾ƒéº»çƒ¦ã€‚comfy-cli å¥½åƒæœ‰è¿™å—èƒ½åŠ› ç†æƒ³çŠ¶æ€ï¼š uiä¸­ç¼–è¾‘workflowï¼Œè‡ªåŠ¨å‘å¸ƒåˆ°serviceå¹³å°å®Œæˆå¹¶è£…è½½ï¼Œå½“ç„¶å–å†³äºworkflowçš„æˆç†Ÿåº¦æ˜¯å¦é«˜é¢‘ï¼Œæ¯•ç«Ÿç”Ÿæˆå›¾ç‰‡å…¨ä¾èµ–è¿™ä¸ªï¼Œå‘å¸ƒåä¼šæœ‰ç‰ˆæœ¬æ§åˆ¶ä¸€ç³»åˆ—é—®é¢˜ ä¸¤ä¸ªæœåŠ¡webå¯åŠ¨éƒ½ç”¨äº†uvicorn,ç›®å‰è¿˜æ˜¯mainä¸­runå•è¿›ç¨‹workå·¥ä½œï¼Œä¸Šç”Ÿäº§å‰å¯åŠ¨è¦æ¢æˆcliè°ƒç”¨ï¼Œè¿™æ ·å¯ä»¥å¼€å¤šworkï¼Œæé«˜å¹¶å‘èƒ½åŠ› balancer ç°åœ¨è¿˜æ˜¯ä¸€ä¸ªå•å®ä¾‹çš„å¾®ç½‘å…³ï¼Œè¿™ä¹ˆè®¾è®¡å–å†³äºè¦åŸºäºèŠ‚ç‚¹èµ„æºcpuã€gpuå¤„ç†èƒ½åŠ›æ¥è¯·æ±‚åˆ†å‘,æˆ–è€…åŸºäºå…¶ä»–æŸç§ä¸šåŠ¡ä¸Šçš„ç­–ç•¥åˆ†å‘è¯·æ±‚å’Œä»»åŠ¡è°ƒåº¦ï¼Œè¿™ç§é‡è¦è§’è‰²è¿˜æ˜¯åº”è¯¥ç”¨æ’¸æ£’ä¸€äº›çš„æ–¹æ¡ˆ æ›´ç¨³å¦¥æ–¹æ¡ˆ ï¼šä½¿ç”¨æˆç†Ÿç½‘å…³OpenRestyï¼Œé›†æˆäº†Luaè„šæœ¬ã€ç¬¬ä¸‰æ–¹æ¨¡å—å’Œå·¥å…·é“¾æ–¹ä¾¿å®šåˆ¶å„ç§ä¸šåŠ¡è§„åˆ™å’Œåœºæ™¯ï¼ŒäºŒæ¬¡å¼€å‘åˆ©å™¨ã€‚é«˜å¹¶å‘ï¼ˆ10ä¸‡+ QPSï¼‰è½»æ¾åº”å¯¹ã€‚ å‚è€ƒèµ„æ–™ https://github.com/smthemex/ComfyUI_StoryDiffusion https://github.com/comfyanonymous/ComfyUI https://docs.comfy.org/get_started/introduction https://github.com/zjf2671/hh-mcp-comfyui https://logdy.dev/docs/reference/code https://hub.docker.com/r/rickraven/logdy","link":"/zh-CN/comfy_learn/"},{"title":"ä¿®å¤Pythonè¿›ç¨‹PIDä¸ä¸€è‡´é—®é¢˜","text":"èƒŒæ™¯åœ¨ä½¿ç”¨Bashè„šæœ¬å¯åŠ¨Pythonè¿›ç¨‹æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼šè®°å½•çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ä¸å®é™…è¿è¡Œçš„PIDä¸ä¸€è‡´ã€‚è¿™ç§æƒ…å†µå¯èƒ½å¯¼è‡´è¿›ç¨‹ç®¡ç†çš„æ··ä¹±ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦åœæ­¢æˆ–é‡å¯è¿›ç¨‹æ—¶ã€‚æœ¬æ–‡å°†åˆ†æå¯¼è‡´è¿™ä¸€é—®é¢˜çš„åŸå› ï¼Œå¹¶æä¾›è§£å†³æ–¹æ¡ˆã€‚ é—®é¢˜æè¿°åœ¨æˆ‘ä»¬çš„start.shè„šæœ¬ä¸­ï¼Œä½¿ç”¨äº†ä»¥ä¸‹ä»£ç æ¥å¯åŠ¨Pythonè¿›ç¨‹ï¼š","link":"/zh-CN/fix_python_process_pid_issue/"},{"title":"æ’¸æ¯› Bera åœ£è¯èŠ‚","text":"ç†Šé“¾åœ£è¯æ´»åŠ¨ Box è„šæœ¬ï¼ŒDolomite å­˜ä¸€æ¬¡Beraå¥–åŠ±2ä¸ª Box,é›†é½ NFT åœ£è¯å¼€å¥–ã€‚ åˆçº¦è‡ªåŠ¨å‘é€è„šæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103from web3 import Web3, HTTPProviderfrom itertools import cycleimport timefrom web3.middleware import geth_poa_middlewareimport argparseimport csvfrom proxy import get_proxy_config# èŠ‚ç‚¹åˆ—è¡¨node_url = [ &quot;https://bera-testnet.nodeinfra.com&quot;, &quot;https://bartio.drpc.org&quot;, &quot;https://bartio.rpc.b-harvest.io&quot;, &quot;https://bartio.rpc.berachain.com&quot;, &quot;https://berat2.lava.build&quot;]# åˆ›å»º Web3 å¯¹è±¡w3 = Web3()w3.middleware_onion.inject(geth_poa_middleware, layer=0)# å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºå¾ªç¯éå†èŠ‚ç‚¹åˆ—è¡¨node_cycle = cycle(node_urls)def get_next_node(): # ä»èŠ‚ç‚¹åˆ—è¡¨ä¸­è·å–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ return next(node_cycle)def convert_to_checksum_address(address): checksum_address = w3.to_checksum_address(address) return checksum_addressdef send_transaction(sender_address,private_key,token,result_file): nonce = 0 try: # è·å–å½“å‰èŠ‚ç‚¹ current_node = get_next_node() print(&quot;use node : &quot;, current_node) # è®¾ç½® Web3 å¯¹è±¡çš„æä¾›ç¨‹åºä¸ºå½“å‰èŠ‚ç‚¹ w3.provider = HTTPProvider(current_node,request_kwargs={&quot;proxies&quot;: get_proxy_config()}) # if (nonce &lt; w3.eth.get_transaction_count(sender_address)): # nonce = w3.eth.get_transaction_count(sender_address) print(&quot;count:&quot;, w3.eth.get_transaction_count(convert_to_checksum_address('0x36864db0396b1ac36c5d6609ded5cc7f8073d08c'))) # æ£€æŸ¥æ˜¯å¦æˆåŠŸè¿æ¥åˆ°èŠ‚ç‚¹ if w3.is_connected(): print(&quot;Connected to Ethereum node&quot;) # åˆ›å»ºäº¤æ˜“ transaction = { 'to':convert_to_checksum_address('0x36864db0396b1ac36c5d6609ded5cc7f8073d08c'), 'value': w3.to_wei(0.00001, 'ether'), # 'gas': 22024, # 'maxFeePerGas': w3.to_wei('900', 'gwei'), # 'maxPriorityFeePerGas': w3.to_wei('120', 'gwei'), # 'gasPrice': w3.to_wei('135', 'gwei'), # è®¾ç½® gas price 'gas': 500000, 'gasPrice': w3.to_wei('13', 'gwei'), # è®¾ç½® gas price 'nonce': w3.eth.get_transaction_count(sender_address), 'chainId': 80084, 'data': '0x33282ded', # ä½ çš„æ•°æ®ï¼Œä»¥åå…­è¿›åˆ¶è¡¨ç¤º } # ç­¾åäº¤æ˜“ signed_transaction = w3.eth.account.sign_transaction(transaction, private_key) # å‘é€äº¤æ˜“ transaction_hash = w3.eth.send_raw_transaction(signed_transaction.rawTransaction) print(f&quot;Transaction sent. Transaction Hash: {transaction_hash.hex()}&quot;) # å°†äº¤æ˜“å“ˆå¸Œä¿å­˜åˆ°CSVæ–‡ä»¶ with open(result_file, mode='a', newline='') as file: writer = csv.writer(file) writer.writerow([sender_address,transaction_hash.hex(),token]) time.sleep(2) else: print(&quot;Connection failed&quot;) except Exception as e: # å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼ˆä¾‹å¦‚èŠ‚ç‚¹ä¸å¯ç”¨ï¼‰ï¼Œè®°å½•é”™è¯¯å¹¶å°è¯•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ print(f&quot;Error using node {current_node}: {e}&quot;) # if 'already' in e.args['message']: # nonce += 1 # if 'already known' in e.args[0][&quot;message&quot;]: # nonce += 1 # if 'nonce too low: ' in e.args[0][&quot;message&quot;]: # nonce = w3.eth.get_transaction_count(sender_address) # time.sleep(2) # å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´é‡è¯•é—´éš”import pandas as pdif __name__ == &quot;__main__&quot;: df = pd.read_csv(&quot;0_accounts.csv&quot;) # å°†æ•°æ®è½¬æ¢ä¸ºå…ƒç»„åˆ—è¡¨ address_private_key_tuple = list(zip(df['address'], df['private_key'], df['token'])) # è·å–é€‰æ‹©çš„å‘é€è€…ä¿¡æ¯ while True: for item in address_private_key_tuple: print(&quot;use the sender : &quot;, item[0]) send_transaction(item[0],item[1],item[2],'1_transaction_hashes.csv') # send_transaction() # print(convert_to_checksum_address(sender_address)) TxHash æäº¤è„šæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116import requestsimport csvimport timeimport base64import osfrom Crypto.Cipher import AESfrom Crypto.Util.Padding import padfrom proxy import get_proxy_configdef encrypt_with_aes256_cbc(plaintext): # å›ºå®šçš„å¯†é’¥å­—ç¬¦ä¸² s = &quot;yQmRxqD#c^DefKhxeuK,2V-M?}3om~eu&quot; # å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚ key = s.encode(&quot;utf-8&quot;) # print(&quot;key:&quot;, key.hex()) # ç”Ÿæˆéšæœºçš„ 16 å­—èŠ‚ IV iv = os.urandom(16) # iv = bytes.fromhex(&quot;bcb5d322febaa005286401694c0e0dea&quot;) # print(&quot;iv:&quot;, iv.hex()) # åˆ›å»º AES åŠ å¯†å™¨ cipher = AES.new(key, AES.MODE_CBC, iv) # ä½¿ç”¨ PKCS7 å¡«å……ï¼Œå¹¶åŠ å¯†æ•°æ® plaintext_bytes = plaintext.encode(&quot;utf-8&quot;) encrypted_bytes = cipher.encrypt(pad(plaintext_bytes, AES.block_size)) # å°† IV å’ŒåŠ å¯†æ•°æ®ç¼–ç ä¸º Base64 åæ‹¼æ¥ iv_base64 = base64.b64encode(iv).decode(&quot;utf-8&quot;) encrypted_base64 = base64.b64encode(encrypted_bytes).decode(&quot;utf-8&quot;) return iv_base64 + encrypted_base64def send_request(account,txHash, token,max_retries=3, retry_delay=3): headers = { 'accept': '*/*', 'accept-language': 'zh,zh-CN;q=0.9,en;q=0.8,und;q=0.7', 'authorization': f'Bearer {token}', 'content-type': 'application/json', 'origin': 'https://beratown.dapdap.net', 'priority': 'u=1, i', 'referer': 'https://beratown.dapdap.net/', 'sec-ch-ua': '&quot;Google Chrome&quot;;v=&quot;131&quot;, &quot;Chromium&quot;;v=&quot;131&quot;, &quot;Not_A Brand&quot;;v=&quot;24&quot;', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '&quot;macOS&quot;', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'cross-site', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36', } for attempt in range(max_retries): try: json_data = { 'action_type': 'Lending', 'account_id': account, 'template': 'Dolomite', 'sub_type': 'Supply', 'action_switch': 0, 'action_status': 'Success', 'tx_id': txHash, 'action_network_id': 'Berachain bArtio', 'chain_id': 80084, 'action_title': 'Deposit 0.000 BERA on Dolomite', 'action_tokens': '[&quot;BERA&quot;]', 'action_amount': '0.0001', 'ss': '', 'source': 'lending', 'wallet': 'OKX Wallet', } t = f&quot;template=Dolomite&amp;action_type=Lending&amp;tx_hash={txHash}&amp;chain_id=80084&amp;time={int(time.time())}&quot; print(&quot;hashTx:&quot; + txHash) # print(&quot;raw:&quot; + t) encrypted_data = encrypt_with_aes256_cbc(t) json_data['ss'] = encrypted_data # print(&quot;encrypted:&quot; + encrypted_data) response = requests.post('https://testnet-api.beratown.app/api/action/add', headers=headers, json=json_data, proxies=get_proxy_config()) print(f&quot;Response for address:{account} txHash {txHash}: {response.status_code}&quot;) print(response.json()) if response.status_code == 200: return response.status_code, response.json() else: print(f&quot;Request failed with status code {response.status_code}. {response.text} Retrying...&quot;) except Exception as e: print(f&quot;An error occurred: {e}. Retrying...&quot;) time.sleep(retry_delay) print(f&quot;Failed to send request after {max_retries} attempts.&quot;) return None, Noneif __name__ == &quot;__main__&quot;: csv_file_path = '1_transaction_hashes.csv' # CSVæ–‡ä»¶è·¯å¾„ output_csv_file_path = '2_successful_hashes.csv' # è¾“å‡ºCSVæ–‡ä»¶è·¯å¾„ with open(csv_file_path, mode='r') as infile, open(output_csv_file_path, mode='a', newline='') as outfile: reader = csv.reader(infile) writer = csv.writer(outfile) for row in reader: if row: # ç¡®ä¿è¡Œä¸ä¸ºç©º address = row[0].strip() txHash = row[1].strip() token = row[2].strip() status_code, response = send_request(address, txHash,token) writer.writerow([address,txHash, token,status_code, response]) è‡ªåŠ¨å¼€ç®± 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273import requestsimport csvimport logging# é…ç½®æ—¥å¿—è®°å½•logging.basicConfig( handlers=[ logging.FileHandler('claim.log'), # å°†æ—¥å¿—å†™å…¥æ–‡ä»¶ logging.StreamHandler() # åŒæ—¶è¾“å‡ºåˆ°ç»ˆç«¯ ], level=logging.INFO, # æ—¥å¿—çº§åˆ« format='%(asctime)s - %(levelname)s - %(message)s', # æ—¥å¿—æ ¼å¼ datefmt='%Y-%m-%d %H:%M:%S' # æ—¥æœŸæ ¼å¼)headers = { 'accept': '*/*', 'accept-language': 'zh,zh-CN;q=0.9,en;q=0.8,und;q=0.7', 'authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozMTcwNTc1LCJleHAiOjE3MzczOTA0NjUsInN1YiI6ImFjY2VzcyJ9.pLUIJ0ClYe8vycR_uJm_OJ8AivvdJ-f-6S4b6VET9so', 'content-type': 'application/json', 'origin': 'https://beratown.dapdap.net', 'priority': 'u=1, i', 'referer': 'https://beratown.dapdap.net/', 'sec-ch-ua': '&quot;Google Chrome&quot;;v=&quot;131&quot;, &quot;Chromium&quot;;v=&quot;131&quot;, &quot;Not_A Brand&quot;;v=&quot;24&quot;', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '&quot;macOS&quot;', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'cross-site', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36',}def send_get_request(account): json_data = { 'all': False, } response1 = requests.post('https://testnet-api.beratown.app/api/mas/reward/draw', headers=headers, json=json_data) url = f'https://testnet-api.beratown.app/api/mas/user/{account}' logging.info(f'Sending GET request to {url}') response2 = requests.get(url, headers=headers) logging.info(f'Received response with status code {response1.status_code} {response2.status_code}') return response1.status_code,response1.text,response2.status_code, response2.textif __name__ == &quot;__main__&quot;: input_csv_file_path = '2_successful_hashes_1.csv' # è¾“å…¥CSVæ–‡ä»¶è·¯å¾„ output_csv_file_path = '3_claim_results.csv' # è¾“å‡ºCSVæ–‡ä»¶è·¯å¾„ logging.info(f'Reading successful hashes from {input_csv_file_path}') logging.info(f'Writing results to {output_csv_file_path}') with open(input_csv_file_path, mode='r') as infile, open(output_csv_file_path, mode='w', newline='') as outfile: reader = csv.reader(infile) writer = csv.writer(outfile) # å†™å…¥è¡¨å¤´ writer.writerow( ['txHash', 'request_number', 'draw_status_code', 'draw_response', 'claim_status_code', 'claim_response']) for row in reader: if row: # ç¡®ä¿è¡Œä¸ä¸ºç©º address = row[0].strip() txHash = row[1].strip() logging.info(f'Processing txHash: {txHash}') for i in range(2): # æ‰§è¡Œä¸¤æ¬¡GETè¯·æ±‚ status_code1, response1, status_code2, response2 = send_get_request(address) writer.writerow([txHash, i + 1, status_code1, response1, status_code2, response2]) logging.info( f'Request {i + 1} for {address} txHash {txHash} completed with status code {status_code1} {status_code2}')","link":"/zh-CN/freebie_hunting_bera_chain/"},{"title":"Google 2FA è„šæœ¬","text":"æ‰¹é‡æ˜¾ç¤ºGoogle 2FA å·¥å…·ï¼Œ5ç§’åˆ·æ–°ä¸€æ¬¡ secrets.csv 123456789101112131415username,secretiAvloyola,ENOG7VLRJJ7GDNZJLilBlue561,IWPTHMCHSR74EOSHKwaciWorsnop,TUXN5TNLTKOPTJEYvikeshchotai,L333DPD5JHXF3O2Kperaltasocimo,UH4EDK7425BFCXSHmakzuzu,OUIG375O7OARDXLJJsaFikitha,AIWBIBQGXZK3ZDE3limliangtung,HHD2VM5LHCV6TDOVsinhde18,L6LYS4ECQL5KKPFFActionDT,O64IEGT5NPCOHCQtimansur,3ASN5ZIGJH4ICYUXDarmyrez,BTKNH5OMOMPZ7CFYaninditamario,G2VHH4IHFE367PNWizzanfurkan,EYP7VV6AK6EIDIJB æ‰¹é‡æ˜¾ç¤ºéªŒè¯ç è„šæœ¬ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556import csvimport datetimeimport pyotpimport timeimport osimport base64# å®šä¹‰è¯»å–CSVæ–‡ä»¶çš„å‡½æ•°def read_secrets_from_csv(csv_file_path): secrets = [] with open(csv_file_path, mode='r') as file: reader = csv.DictReader(file) for row in reader: secrets.append(row) return secrets# å®šä¹‰éªŒè¯Base32å¯†é’¥çš„å‡½æ•°def is_valid_base32(secret): try: # å°è¯•è§£ç ï¼Œå¦‚æœå¤±è´¥åˆ™è¯´æ˜ä¸æ˜¯æœ‰æ•ˆçš„Base32 base64.b32decode(secret, casefold=True) return True except (base64.binascii.Error, ValueError): return False# å®šä¹‰ç”Ÿæˆ2FAéªŒè¯ç çš„å‡½æ•°def generate_2fa_codes(secrets): codes = [] for secret in secrets: if is_valid_base32(secret['secret']): totp = pyotp.TOTP(secret['secret']) code = totp.now() codes.append({'username': secret['username'], 'code': code}) else: codes.append({'username': secret['username'], 'code': 'æ— æ•ˆçš„Base32å¯†é’¥'}) return codes# ä¸»å‡½æ•°def main(): csv_file_path = '2fa/secrets.csv' # è¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹CSVæ–‡ä»¶è·¯å¾„ secrets = read_secrets_from_csv(csv_file_path) while True: os.system('cls' if os.name == 'nt' else 'clear') # æ¸…å± codes = generate_2fa_codes(secrets) print(f&quot;æ—¶é—´:{datetime.datetime.now()}&quot;) for entry in codes: print(f&quot;ç”¨æˆ· {entry['username']} çš„å½“å‰2FAéªŒè¯ç æ˜¯: {entry['code']}&quot;) time.sleep(5) # æ¯30ç§’åˆ·æ–°ä¸€æ¬¡if __name__ == &quot;__main__&quot;: main()","link":"/zh-CN/google-2fa/"},{"title":"Hexo ç«™ç‚¹çš„SEOé…ç½®","text":"Hexo ç«™ç‚¹çš„SEOé…ç½®Hexo Blog é…ç½®SEOä¸»è¦ç”¨åˆ°ä¸¤ä¸ªæ’ä»¶hexo-generator-sitemapï¼Œhexo-submit-urls-to-search-engine é‡è¦æ­¥éª¤ Googleè´¦å·çš„è¯æ¿€æ´»Google Cloud æ ¹æ®æ–‡æ¡£æ­¥éª¤å®ŒæˆæœåŠ¡è´¦å·åˆ›å»ºå’Œå¯†é’¥åˆ›å»º å¯†é’¥åˆ›å»ºæˆåŠŸåä¸‹è½½å¯†é’¥çš„jsonæ–‡ä»¶åˆ°hexoæ ¹ç›®å½•ä¸‹ï¼Œå¹¶åœ¨_config.ymlä¸­é…ç½® https://www.google.com/webmasters/verification/home ä¼šè‡ªåŠ¨è·³åˆ°æ–°åå°,ä½¿ç”¨ã€ç½‘å€å‰ç¼€ã€æ–¹å¼éªŒè¯æ‰€æœ‰æƒï¼Œä¼šç”ŸæˆgoogleaXXXXXX.html æ–‡ä»¶ download ä¸‹è½½åˆ°hexo çš„sourceç›®å½•ä¸‹ å®Œæˆç«™ç‚¹éªŒè¯ ç™»å½•https://search.google.com/search-console åœ¨ã€è®¾ç½®ã€-&gt; ã€ç”¨æˆ·å’Œæƒé™ã€ -&gt;ã€æ·»åŠ ç”¨æˆ·ã€ å°†å¯†é’¥jsonæ–‡ä»¶ä¸­çš„client_emailä¸­é‚®ç®±ï¼ˆå°±æ˜¯ç¬¬ä¸€æ­¥åœ¨Googleä¸­åˆ›å»ºçš„æœåŠ¡è´¦å·å¯¹åº”çš„é‚®ç®±ï¼‰æ·»åŠ  æŒ‡å®šæƒé™ä¸ºæ‰€æ‹¥æœ‰è€… ä»£ç 123npm install hexo-submit-urls-to-search-engine --savenpm install hexo-generator-sitemap --save Config é…ç½®123456789101112131415161718hexo_submit_urls_to_search_engine: submit_condition: count #é“¾æ¥è¢«æäº¤çš„æ¡ä»¶ï¼Œå¯é€‰å€¼ï¼šcount | period ç°ä»…æ”¯æŒcount count: 10 # æäº¤æœ€æ–°çš„10ä¸ªé“¾æ¥ period: 900 # æäº¤ä¿®æ”¹æ—¶é—´åœ¨ 900 ç§’å†…çš„é“¾æ¥ google: 1 # æ˜¯å¦å‘Googleæäº¤ï¼Œå¯é€‰å€¼ï¼š1 | 0ï¼ˆ0ï¼šå¦ï¼›1ï¼šæ˜¯ï¼‰ bing: 0 # æ˜¯å¦å‘bingæäº¤ï¼Œå¯é€‰å€¼ï¼š1 | 0ï¼ˆ0ï¼šå¦ï¼›1ï¼šæ˜¯ï¼‰ baidu: 0 # æ˜¯å¦å‘baiduæäº¤ï¼Œå¯é€‰å€¼ï¼š1 | 0ï¼ˆ0ï¼šå¦ï¼›1ï¼šæ˜¯ï¼‰ txt_path: submit_urls.txt # æ–‡æœ¬æ–‡æ¡£åï¼Œ éœ€è¦æ¨é€çš„é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ baidu_host: https://konbluesky.github.io # åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå baidu_token: #è¯·æŒ‰ç…§æ–‡æ¡£è¯´æ˜è·å– # è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠå®ƒç›´æ¥å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ! bing_host: https://konbluesky.github.io # åœ¨bingç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå bing_enable_indexnow: false # æ˜¯å¦ç”¨ indexNow æäº¤é“¾æ¥ç»™å¿…åº”: true (Yes) | false (No). åªæœ‰ 2.1.1 åŠä¹‹åçš„ç‰ˆæœ¬æ‰å¯ä»¥å¼€å¯è¿™ä¸ªåŠŸèƒ½ã€‚ bing_token: #è¯·æŒ‰ç…§æ–‡æ¡£è¯´æ˜è·å– # è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠå®ƒç›´æ¥å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ! google_host: https://konbluesky.github.io # åœ¨googleç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå google_key_file: key.json #å­˜æ”¾google keyçš„jsonæ–‡ä»¶ï¼Œæ”¾äºç½‘ç«™æ ¹ç›®å½•ï¼ˆä¸hexo _config.ymlæ–‡ä»¶ä½ç½®ç›¸åŒï¼‰ï¼Œè¯·ä¸è¦æŠŠjsonæ–‡ä»¶å†…å®¹ç›´æ¥å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ! google_proxy: 0 replace: 0 # æ˜¯å¦æ›¿æ¢é“¾æ¥ä¸­çš„éƒ¨åˆ†å­—ç¬¦ä¸²ï¼Œå¯é€‰å€¼ï¼š1 | 0ï¼ˆ0ï¼šå¦ï¼›1ï¼šæ˜¯ï¼‰ find_what: http://konbluesky.github.io æ¨é€æˆåŠŸ12345678Google response: { urlNotificationMetadata: { url: 'https://konbluesky.github.io/2024/11/27/hummingbot_gateway/' }}Google response: { urlNotificationMetadata: { url: 'https://konbluesky.github.io/2025/01/14/python_py_spy/' }} é—®é¢˜å¤„ç†1234567Google response: { error: { code: 403, message: 'Permission denied. Failed to verify the URL ownership.', status: 'PERMISSION_DENIED' }} https://github.com/cjh0613/hexo-submit-urls-to-search-engine/issues/18 å‚è§é‡è¦æ­¥éª¤ä¸­çš„3 å‚è€ƒæ–‡æ¡£ https://github.com/cjh0613/hexo-submit-urls-to-search-engine æ’ä»¶githubåœ°å€ https://cjh0613.com/20200603HexoSubmitUrlsToSearchEngine hexo-submit-urls-to-search-engine æ’ä»¶ä½¿ç”¨è¯´æ˜!! Indexing API å…è®¸ç½‘ç«™æ‰€æœ‰è€…åœ¨å‘å¸ƒæ‹›è˜ä¿¡æ¯æˆ–ç›´æ’­æ—¶ç›´æ¥é€šçŸ¥ Google æ·»åŠ æˆ–åˆ é™¤è§†é¢‘é¡µé¢ã€‚è¿™å…è®¸ Google å®‰æ’é¡µé¢è¿›è¡Œæ–°çš„æŠ“å–ï¼Œ å¯ä»¥å¸¦æ¥æ›´é«˜è´¨é‡çš„ç”¨æˆ·æµé‡ã€‚Indexing API åªèƒ½ç”¨äºæŠ“å–å…·æœ‰ä»¥ä¸‹ç‰¹å¾çš„é¡µé¢ï¼š JobPosting æˆ– åµŒå…¥åœ¨ VideoObject ä¸­çš„ BroadcastEvent ã€‚å¯¹äºåŒ…å«è®¸å¤šçŸ­æœŸé¡µé¢ï¼ˆä¾‹å¦‚æ‹›è˜ä¿¡æ¯æˆ–ç›´æ’­è§†é¢‘ï¼‰çš„ç½‘ç«™ï¼ŒIndexing API å…è®¸å•ç‹¬æ¨é€æ›´æ–°ï¼Œä»è€Œä½¿æœç´¢ç»“æœä¸­çš„å†…å®¹ä¿æŒæœ€æ–°ã€‚ https://github.com/hexojs/hexo-generator-sitemap ç”¨æ¥ç”Ÿæˆsitemap.xml æ–‡ä»¶ https://developers.google.cn/search/apis/indexing-api/v3/prereqs https://zhuanlan.zhihu.com/p/651590960","link":"/zh-CN/hexo_add_seo_push_feature/"},{"title":"Hummingbot Create First Strategy Bot","text":"ä½¿ç”¨simple_ammç­–ç•¥åˆ›å»ºç¬¬ä¸€ä¸ªæœºå™¨äºº ä½¿ç”¨å‘½ä»¤: 123start --script [SCRIPT NAME]create --script-config [SCRIPT_FILE]start --script [SCRIPT_FILE] --conf [SCRIPT_CONFIG_FILE] åˆå§‹çš„æ–‡ä»¶ç›®å½• 12345678910111213141516(hummingbot) root@vmi2090919:~/hummingbot/conf# tree.â”œâ”€â”€ __init__.pyâ”œâ”€â”€ conf_client.ymlâ”œâ”€â”€ conf_fee_overrides.ymlâ”œâ”€â”€ connectorsâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ mexc.ymlâ”‚ â””â”€â”€ okx.ymlâ”œâ”€â”€ controllersâ”‚ â””â”€â”€ __init__.pyâ”œâ”€â”€ hummingbot_logs.ymlâ”œâ”€â”€ scriptsâ”‚ â””â”€â”€ __init__.pyâ””â”€â”€ strategies â””â”€â”€ __init__.py hummingbot cliä¸­ é€šè¿‡ä¸‹åˆ—æŒ‡ä»¤åˆ›å»ºåŸºæœ¬ç­–ç•¥ 123456789101112131415161718&gt;&gt;&gt; create --script-config simple_pmm For more information, please visit https://pyperclip.readthedocs.io/en/latest/introduction.html#not-implemented-erro r (See log file for stack trace dump)Exchange where the bot will trade &gt;&gt;&gt; mexcTrading pair in which the bot will place orders &gt;&gt;&gt; MX-USDTOrder amount (denominated in base asset) &gt;&gt;&gt; 0.01Bid order spread (in percent) &gt;&gt;&gt; 0.001Ask order spread (in percent) &gt;&gt;&gt; 0.001Order refresh time (in seconds) &gt;&gt;&gt; 15Price type to use (mid or last) &gt;&gt;&gt; midEnter a new file name for your configuration &gt;&gt;&gt; conf_simple_pmm_1.ymlA new config file has been created: conf_simple_pmm_1.yml ps: é…ç½®è¿‡ç¨‹ä¸­è¦ç»ˆæ­¢é…ç½®çš„è¯ï¼Œä½¿ç”¨å¿«æ·é”®ctrl+x æŸ¥çœ‹æ–‡ä»¶ç›®å½•ï¼Œæ–°é…ç½®å·²ç”Ÿæˆ 1234567891011121314151617(hummingbot) root@vmi2090919:~/hummingbot/conf# tree.â”œâ”€â”€ __init__.pyâ”œâ”€â”€ conf_client.ymlâ”œâ”€â”€ conf_fee_overrides.ymlâ”œâ”€â”€ connectorsâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ mexc.ymlâ”‚ â””â”€â”€ okx.ymlâ”œâ”€â”€ controllersâ”‚ â””â”€â”€ __init__.pyâ”œâ”€â”€ hummingbot_logs.ymlâ”œâ”€â”€ scriptsâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â””â”€â”€ conf_simple_pmm_1.ymlâ””â”€â”€ strategies â””â”€â”€ __init__.py conf_simple_pmm_1.yml å†…å®¹ 12345678script_file_name: simple_pmm.pyexchange: mexctrading_pair: MX-USDTorder_amount: 0.01bid_spread: 0.001ask_spread: 0.001order_refresh_time: 15price_type: mid ä½¿ç”¨start --script simple_pmm --conf conf_simple_pmm_1.yml å¯åŠ¨bot é”™è¯¯123456789102024-11-15 13:10:31,262 - 2684330 - hummingbot.connector.exchange.mexc.mexc_exchange.MexcExchange - INFO - Network status has changed to NetworkStatus.CONNECTED. Starting networking...2024-11-15 13:10:31,715 - 2684330 - hummingbot.connector.exchange.mexc.mexc_api_order_book_data_source.MexcAPIOrderBookDataSource - ERROR - Unexpected error occurred subscribing to order book trading and delta streams...Traceback (most recent call last): File &quot;/root/hummingbot/hummingbot/connector/exchange/mexc/mexc_api_order_book_data_source.py&quot;, line 76, in _subscribe_channels symbol = await self._connector.exchange_symbol_associated_to_pair(trading_pair=trading_pair) File &quot;hummingbot/connector/exchange_base.pyx&quot;, line 97, in exchange_symbol_associated_to_pair return symbol_map.inverse[trading_pair] File &quot;/root/miniconda3/envs/hummingbot/lib/python3.10/site-packages/bidict/_base.py&quot;, line 524, in __getitem__ return self._fwdm[key]KeyError: 'MX-USDT' Mexc ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰äº¤æ˜“å¯¹éƒ½æ”¯æŒapiäº¤æ˜“çš„ï¼Œäº¤æ˜“å¯¹è¦åˆ°https://api.mexc.com/api/v3/defaultSymbolsæ¥å£ä¸­æ£€æŸ¥ä¸‹æ¢äº†ä¸ªPNUT-USDTäº¤æ˜“å¯¹,æ­£å¸¸äº¤æ˜“äº†ã€‚ å…³äº PMM with Price Shift and Dynamic Spreads simple_amm.py ä½¿ç”¨çš„ç­–ç•¥ å‚è€ƒèµ„æ–™å…³äº PMM with Price Shift and Dynamic Spreads","link":"/zh-CN/hummingbot_create_simple_pmm_bot/"},{"title":"Hummingbot Dashboard","text":"Hummingbot Dashboard Hummingbot Dashboard æ˜¯ä¸€æ¬¾å¼€æºåº”ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·åˆ›å»ºã€å›æµ‹å’Œä¼˜åŒ–å„ç§ç®—æ³•äº¤æ˜“ç­–ç•¥ã€‚ä¸€æ—¦ç­–ç•¥å¾—åˆ°å®Œå–„ï¼Œå®ƒä»¬å¯ä»¥ä½œä¸º Hummingbot å®ä¾‹éƒ¨ç½²åˆ°å®ç›˜äº¤æ˜“æ¨¡å¼ä¸­ï¼Œä»ç­–ç•¥åˆ¶å®šåˆ°å®é™…äº¤æ˜“æ‰§è¡Œå®ç°æ— ç¼è¡”æ¥ã€‚ åŠŸèƒ½ æœºå™¨äººç¼–æ’ï¼šéƒ¨ç½²å’Œç®¡ç†å¤šä¸ª Hummingbot å®ä¾‹ ç­–ç•¥å›æµ‹ä¸ä¼˜åŒ–ï¼šé€šè¿‡å†å²æ•°æ®è¯„ä¼°ç­–ç•¥è¡¨ç°ï¼Œå¹¶ä½¿ç”¨ Optuna è¿›è¡Œä¼˜åŒ– ä¸€é”®éƒ¨ç½²ï¼šè½»æ¾å°†ç­–ç•¥éƒ¨ç½²ä¸º Hummingbot å®ä¾‹ï¼Œæ”¯æŒæ¨¡æ‹Ÿæˆ–å®ç›˜äº¤æ˜“ æ€§èƒ½åˆ†æç›‘æ§ï¼šç›‘æ§å¹¶åˆ†æå·²éƒ¨ç½²ç­–ç•¥çš„è¡¨ç° å‡­è¯ç®¡ç†ï¼šåˆ›å»ºå’Œç®¡ç† API å¯†é’¥çš„ç‹¬ç«‹è´¦æˆ· æ–‡æ¡£ï¼šhttps://hummingbot.org/dashboard/ å®‰è£…Dashboard ä¸¤ç§æ–¹å¼build from sourcehttps://github.com/hummingbot/dashboard#installation dockerå…ˆè£…docker compose 12345678sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.28.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-composesudo chmod +x /usr/local/bin/docker-composedocker-compose --versiongit clone https://github.com/hummingbot/deploycd deploybash setup.sh å‚è€ƒèµ„æ–™ Hummingbot stategies_v1","link":"/zh-CN/hummingbot_dashboard/"},{"title":"Hummingbot Macosä¸‹æ­å»ºå¼€å‘è°ƒè¯•ç¯å¢ƒ","text":"HummingBotä¸­æ–‡ç¤¾åŒºç»„ç»‡äº¤æ˜“æ¯”èµ›,æ—¶é—´ä»11.25-12.2å·ä¸ºæœŸä¸€å‘¨,25å·æŠ˜è…¾äº†ä¸€ä¸ŠåˆBNå­è´¦å·API tokené—®é¢˜,åˆ°åº•è¿˜æ˜¯è¢«BNçš„ç»Ÿä¸€è´¦æˆ·æ¨¡å¼å‘äº†ä¸‹.(æ„Ÿè°¢ç¤¾åŒºDolmçš„è€å¿ƒå¸®åŠ©.) ä»Šå¤©æŠ½ç©ºæŠŠæœ¬åœ°ç¯å¢ƒéƒ¨ç½²äº†ä¸‹,æ–¹ä¾¿äº¤æ˜“ç­–ç•¥çš„å¼€å‘å’Œè°ƒè¯•. ä¹‹å‰åœ¨ubuntuçš„äº‘ä¸»æœºä¸Šè¿è¡ŒhummingBotè¿‡ç¨‹æ¯”è¾ƒä¸æ»‘,å€’æ²¡ç¢°åˆ°ä»€ä¹ˆå¤§é—®é¢˜;æœ¬åœ°æ˜¯Macosç¯å¢ƒï¼Œä¹±ä¸ƒå…«ç³Ÿçš„ç¯å¢ƒå¤ªä¹±äº†,è¿‡ç„¶è¿˜æ˜¯ç¢°åˆ°äº†ä¸€äº›é—®é¢˜,è®°å½•ä¸‹. å®˜æ–¹æ–‡æ¡£Install for macos ç¼–è¯‘é—®é¢˜ ios,complexå¤´æ–‡ä»¶æ‰¾ä¸åˆ°ï¼ŒæŠ¥error 123456789101112131415161718192021222324252627282930313233343536373839404142434445building 'hummingbot.strategy.pure_market_making.pure_market_making_order_tracker' extensionclang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -fPIC -O2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -Ihummingbot/core/data_type -Ihummingbot/core -I/Users/konbluesky/miniconda3/envs/hummingbot/lib/python3.10/site-packages/numpy/core/include -I/Users/konbluesky/miniconda3/envs/hummingbot/include/python3.10 -c hummingbot/strategy/pure_market_making/pure_market_making_order_tracker.cpp -o build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/pure_market_making/pure_market_making_order_tracker.ohummingbot/strategy/cross_exchange_market_making/order_id_market_pair_tracker.cpp:1254:10: fatal error: 'ios' file not found1254 | #include &quot;ios&quot;| ^~~~~hummingbot/strategy/avellaneda_market_making/avellaneda_market_making.cpp:1257:10: fatal error: 'ios' file not found1257 | #include &quot;ios&quot;| ^~~~~hummingbot/strategy/cross_exchange_mining/cross_exchange_mining.cpp:1258:10: fatal error: 'string' file not found1258 | #include &lt;string&gt;| ^~~~~~~~1 error generated.hummingbot/strategy/cross_exchange_mining/order_id_market_pair_tracker.cpp:1254:10: fatal error: 'ios' file not found1254 | #include &quot;ios&quot;| ^~~~~building 'hummingbot.strategy.strategy_base' extensionclang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -fPIC -O2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -Ihummingbot/core/data_type -Ihummingbot/core -I/Users/konbluesky/miniconda3/envs/hummingbot/lib/python3.10/site-packages/numpy/core/include -I/Users/konbluesky/miniconda3/envs/hummingbot/include/python3.10 -c hummingbot/strategy/strategy_base.cpp -o build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/strategy_base.ohummingbot/strategy/order_book_asset_price_delegate.cpp:1256:10: fatal error: 'ios' file not found1256 | #include &quot;ios&quot;| ^~~~~hummingbot/strategy/order_tracker.cpp:1256:10: fatal error: 'string' file not found1256 | #include &lt;string&gt;| ^~~~~~~~1 error generated.hummingbot/strategy/pure_market_making/pure_market_making.cpp:1257:10: fatal error: 'ios' file not found1257 | #include &quot;ios&quot;| ^~~~~building 'hummingbot.strategy.strategy_py_base' extensionclang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -fPIC -O2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -Ihummingbot/core/data_type -Ihummingbot/core -I/Users/konbluesky/miniconda3/envs/hummingbot/lib/python3.10/site-packages/numpy/core/include -I/Users/konbluesky/miniconda3/envs/hummingbot/include/python3.10 -c hummingbot/strategy/strategy_py_base.cpp -o build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/strategy_py_base.ohummingbot/strategy/pure_market_making/pure_market_making_order_tracker.cpp:1256:10: fatal error: 'string' file not found1256 | #include &lt;string&gt;| ^~~~~~~~1 error generated.1 error generated.1 warning and 1 error generated.1 error generated.1 error generated.hummingbot/strategy/strategy_base.cpp:1256:10: fatal error: 'ios' file not found1256 | #include &quot;ios&quot;| ^~~~~1 error generated.hummingbot/strategy/strategy_py_base.cpp:1256:10: fatal error: 'ios' file not found1256 | #include &quot;ios&quot;| ^~~~~1 error generated. æ£€æŸ¥condaç¯å¢ƒenvs/hummingbot/includeä¸­ç¡®å®æ²¡æœ‰å¯¹åº”çš„å¤´æ–‡ä»¶,æ€€ç–‘å¯èƒ½æ˜¯å‰ä¸ä¹…åˆšå‡çº§ç³»ç»Ÿ,commandLineToolè¢«æ›´æ–°äº†,åº”è¯¥å¯¼è‡´åŸºç¡€åº“æ²¡äº†ä¸ºäº†çœåŠ›ç›´æ¥å¹²æ‰/Library/Developer/CommandLineToolsç›®å½•,æ‰§è¡Œsudo xcode-select --install é‡æ–°å®‰è£…. å¹²æ‰condaçš„hummingbotç¯å¢ƒ,å› ä¸ºä¹‹å‰æ˜¯ç”¨è€toolæ‰§è¡Œçš„ é‡æ–°æ‰§è¡Œ./install å’Œ ./compile,å‡ºç°æ–°é”™è¯¯ 12345gbot/strategy/strategy_py_base.cpp -o build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/strategy_py_base.ocreating build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/twapx86_64-apple-darwin13.4.0-clang++ -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -stdlib=libc++ -fvisibility-inlines-hidden -fmessage-length=0 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -D_FORTIFY_SOURCE=2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -I/Users/konbluesky/miniconda3/envs/hummingbot/lib/python3.10/site-packages/numpy/core/include -I/Users/konbluesky/miniconda3/envs/hummingbot/include/python3.10 -c hummingbot/strategy/spot_perpetual_arbitrage/dummy.cpp -o build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/spot_perpetual_arbitrage/dummy.ox86_64-apple-darwin13.4.0-clang++ -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -stdlib=libc++ -fvisibility-inlines-hidden -fmessage-length=0 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -D_FORTIFY_SOURCE=2 -isystem /Users/konbluesky/miniconda3/envs/hummingbot/include -I/Users/konbluesky/miniconda3/envs/hummingbot/lib/python3.10/site-packages/numpy/core/include -I/Users/konbluesky/miniconda3/envs/hummingbot/include/python3.10 -c hummingbot/strategy/twap/dummy.cpp -o build/temp.macosx-10.13-x86_64-cpython-310/hummingbot/strategy/twap/dummy.oerror: command 'x86_64-apple-darwin13.4.0-clang++' failed: No such file or directory æ‰‹åŠ¨exportåˆ°ä¸Šä¸‹æ–‡ 1export CXX=clang æ‰§è¡Œ./start Pycharm é…ç½® æ·»åŠ conda HummingBotçš„interpreter ./start.shæ–‡ä»¶ä¸­æ˜¯é€šè¿‡hummingbot_quickstart.py æ¥å¯åŠ¨çš„,æœ‰ä¸‰ä¸ªå‚æ•°PASSWORD,FILENAME,CONFIG è¿™é‡Œå…ˆæš‚æ—¶ç”¨ä¸åˆ°.æ‰€ä»¥Pycharmä¸­ç›´æ¥Run bin/hummingbot_quickstart.py å°±å¯ä»¥äº†; HummingBot æ˜¯å‘½ä»¤è¡ŒUIç¨‹åº,ä½¿ç”¨çš„æ˜¯prompt_toolkit,è¿™ä¸ªæ¡†æ¶åœ¨consoleä¸­è¾“å‡ºæœ‰ç‰¹æ®Šè¦æ±‚,æ‰€ä»¥å¦‚æœç¢°åˆ°ä¸‹é¢é”™è¯¯ ä¸è¦æ…Œ,åœ¨Run/Debug Configurationsä¸­ å‹¾é€‰ä¸‹é¢Emulate terminal in output consoleé…ç½® å†æ¬¡Run Ok. å¼€å‘ç¯å¢ƒå®Œæ¯•. æ”¶å·¥","link":"/zh-CN/hummingbot_dev_env/"},{"title":"Hummingbot Gateway AMM Middleware","text":"Hummingbot Gateway æ˜¯ä¸€ä¸ª REST APIï¼Œå®ƒå…¬å¼€ä¸å„ç§åŒºå—é“¾ï¼ˆé’±åŒ…ã€èŠ‚ç‚¹å’Œé“¾äº¤äº’ï¼‰å’Œå»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆå®šä»·ã€äº¤æ˜“å’ŒæµåŠ¨æ€§æä¾›ï¼‰çš„è¿æ¥ã€‚å®ƒç”¨ Typescript ç¼–å†™ï¼Œå¹¶åˆ©ç”¨ç°æœ‰çš„åŒºå—é“¾å’Œ DEX SDKã€‚ä½¿ç”¨ç½‘å…³çš„ä¼˜åŠ¿åœ¨äºå®ƒæä¾›äº†ä¸€ç§ä¸ç¼–ç¨‹è¯­è¨€æ— å…³çš„æ–¹æ³•æ¥ä¸åŒºå—é“¾å’Œ DEX è¿›è¡Œäº¤äº’ã€‚ å®˜æ–¹æ–‡æ¡£ Install Gateway Github æ­¥éª¤123456789101112# Install dependenciesyarn# Complile Typescript into JS$ yarn build# Run Gateway setup script, which helps you set configs and CERTS_PATH$ chmod a+x gateway-setup.sh$ ./gateway-setup.sh# Start the Gateway server using PASSPHRASE$ yarn start --passphrase=&lt;PASSPHRASE&gt; ./gateway-setup.sh ä¹‹å‰éœ€è¦åˆ°hummingBotä¸­æ‰§è¡Œgateway generate-certs ç”Ÿæˆcertsæ–‡ä»¶,å¤åˆ¶è·¯å¾„ 1234567891011121314151617181920212223242526272829303132333435 base î‚° 14:35:00 î‚° ...work/digital-trade/gateway î‚° î‚°$ ./gateway-setup.sh=============== SETUP GATEWAY ===============Do you want to copy over client certificates (Y/N) &gt;&gt;&gt; yEnter path to the Hummingbot certs folder &gt;&gt;&gt; /Users/xxxx/work/digital-trade/hummingbot/certsFiles successfully copied from /Users/xxxx/work/digital-trade/hummingbot/certs to /Users/xxxx/work/digital-trade/gateway/certsâ„¹ï¸ Confirm if this is correct: Copy configs FROM: /Users/xxxx/work/digital-trade/gateway/src/templates Copy configs TO: /Users/xxxx/work/digital-trade/gateway/conf Copy certs FROM: /Users/xxxx/work/digital-trade/hummingbot/certs Copy certs TO: /Users/xxxx/work/digital-trade/gateway/certsDo you want to proceed? [Y/N] &gt;&gt;&gt; ymkdir: /Users/xxxx/work/digital-trade/gateway/conf: File existsFiles successfully copied from /Users/xxxx/work/digital-trade/gateway/src/templates to /Users/xxxx/work/digital-trade/gateway/confmkdir: /Users/xxxx/work/digital-trade/gateway/conf/lists: File existsFiles successfully copied from /Users/xxxx/work/digital-trade/gateway/src/templates/lists to /Users/xxxx/work/digital-trade/gateway/confReplaced list locations in: conf/celo.ymlReplaced list locations in: conf/osmosis.ymlReplaced list locations in: conf/cronos.ymlReplaced list locations in: conf/binance-smart-chain.ymlReplaced list locations in: conf/ethereum.ymlReplaced list locations in: conf/polygon.ymlReplaced list locations in: conf/avalanche.ymlReplaced list locations in: conf/harmony.ymlReplaced list locations in: conf/xdc.yml å¯åŠ¨å 1234567891011$ yarn start --passphrase=123456yarn run v1.22.4$ /bin/bash ./startup.sh --passphrase=abcde2024-11-27 08:04:55 | info | Gateway Version: 2.1.02024-11-27 08:04:55 | info | âš¡ï¸ Starting Gateway API on port 15888...(node:48566) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.(Use `node --trace-deprecation ...` to show where the warning was created)2024-11-27 08:04:55 | info | The gateway server is secured behind HTTPS.2024-11-27 08:04:55 | info | âš¡ï¸ Swagger listening on port 8080. Read the Gateway API documentation at 127.0.0.1:8080::ffff:127.0.0.1 - - [27/Nov/2024:06:44:57 +0000] &quot;GET /connectors HTTP/1.1&quot; 200 4181 &quot;-&quot; &quot;Python/3.10 aiohttp/3.11.7&quot;::ffff:127.0.0.1 - - [27/Nov/2024:06:44:57 +0000] &quot;GET /chain/config HTTP/1.1&quot; 200 18304 &quot;-&quot; &quot;Python/3.10 aiohttp/3.11.7&quot;","link":"/zh-CN/hummingbot_gateway/"},{"title":"Hummingbotï¼šå¼€æºçš„åŠ å¯†è´§å¸é«˜é¢‘äº¤æ˜“æœºå™¨äºº","text":"Hummingbot æ˜¯ä¸€ä¸ªå¼€æºçš„é«˜é¢‘äº¤æ˜“æœºå™¨äººæ¡†æ¶ï¼Œæ—¨åœ¨ä¸ºåŠ å¯†è´§å¸å¸‚åœºæä¾›è‡ªåŠ¨åŒ–äº¤æ˜“å·¥å…·ã€‚æ— è®ºæ˜¯å¸‚åœºåšå¸‚ï¼ˆmarket makingï¼‰ã€å¥—åˆ©ï¼ˆarbitrageï¼‰ï¼Œè¿˜æ˜¯è·¨äº¤æ˜“æ‰€å¸‚åœºåšå¸‚ï¼ˆcross-exchange market makingï¼‰ï¼ŒHummingbot éƒ½ä¸ºç”¨æˆ·æä¾›äº†å¤šç§å®ç”¨çš„ç­–ç•¥æ¨¡æ¿ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾ä¸Šæ‰‹é«˜é¢‘äº¤æ˜“ï¼Œå‚ä¸åˆ°åŠ å¯†è´§å¸äº¤æ˜“å¸‚åœºä¸­ã€‚ Hummingbot çš„ä¸»è¦ç‰¹ç‚¹1. å¼€æºä¸ç¤¾åŒºé©±åŠ¨Hummingbot æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå…¶ä»£ç å…¬å¼€é€æ˜ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ä¸ºç¤¾åŒºè´¡çŒ®ä»£ç ã€‚ç¤¾åŒºé©±åŠ¨çš„å¼€å‘æ¨¡å¼ä½¿å¾— Hummingbot ä¸æ–­è¿›æ­¥ï¼Œæ‹¥æœ‰æ´»è·ƒçš„æ”¯æŒå’Œå¼€å‘è€…ç¤¾ç¾¤ï¼Œå¹¶å®šæœŸå‘å¸ƒæ›´æ–°å’Œæ–°åŠŸèƒ½ã€‚ 2. æ”¯æŒå¤šç§äº¤æ˜“æ‰€Hummingbot æ”¯æŒå¤šä¸ªä¸»æµçš„ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆCEXï¼‰å’Œå»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆDEXï¼‰ï¼Œå¦‚ Binanceã€Coinbase Proã€FTXã€Uniswapã€Balancer ç­‰ã€‚å®ƒå…·æœ‰ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä¸ºè¿˜ä¸æ”¯æŒçš„äº¤æ˜“æ‰€ç¼–å†™æ¥å£ï¼Œä»¥æ»¡è¶³æ›´å¤šçš„å¸‚åœºéœ€æ±‚ã€‚ 3. çµæ´»çš„ç­–ç•¥é…ç½®Hummingbot æä¾›å¤šç§å†…ç½®äº¤æ˜“ç­–ç•¥æ¨¡æ¿ï¼Œæ¶µç›–äº†ï¼š ç®€å•å¸‚åœºåšå¸‚ï¼ˆMarket Makingï¼‰ï¼š é€šè¿‡æŒ‚ä¹°å–å•ï¼Œèµšå–ä»·å·®ã€‚ å¥—åˆ©ï¼ˆArbitrageï¼‰ï¼š åˆ©ç”¨ä¸åŒäº¤æ˜“æ‰€ä¹‹é—´çš„ä»·æ ¼å·®è·åˆ©ã€‚ è·¨äº¤æ˜“æ‰€åšå¸‚ï¼ˆCross-Exchange Market Makingï¼‰ï¼š åœ¨å¤šä¸ªäº¤æ˜“æ‰€é—´æŒ‚å•æ•æ‰ä»·å·®ã€‚ ç”¨æˆ·å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è½»æ¾è°ƒæ•´ç­–ç•¥å‚æ•°ï¼Œä¾‹å¦‚æ§åˆ¶äº¤æ˜“é¢‘ç‡ã€è®¢å•å¤§å°ã€ä»·å·®èŒƒå›´ç­‰ï¼Œä½¿å¾—ç­–ç•¥æ›´åŠ çµæ´»ã€é€‚åº”ä¸åŒå¸‚åœºæƒ…å†µã€‚ 4. ç”¨æˆ·å‹å¥½çš„ CLI ç•Œé¢Hummingbot æä¾›äº†ç®€æ´çš„å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰ï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿé…ç½®å’Œç›‘æ§æœºå™¨äººçš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸”æ”¯æŒå®æ—¶ç›‘æ§å’Œæ—¥å¿—è®°å½•ã€‚å¯¹äºå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹äº¤æ˜“çš„ç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªç•Œé¢éå¸¸å‹å¥½ã€‚ 5. å¼ºå¤§çš„ç­–ç•¥å¼€å‘æ”¯æŒå¯¹äºæœ‰ç¼–ç¨‹åŸºç¡€çš„ç”¨æˆ·ï¼ŒHummingbot æ”¯æŒ Python è‡ªå®šä¹‰äº¤æ˜“ç­–ç•¥ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®å¸‚åœºéœ€æ±‚å’Œä¸ªäººäº¤æ˜“é£æ ¼è°ƒæ•´ç­–ç•¥ï¼Œä¾‹å¦‚è‡ªå®šä¹‰å¥—åˆ©è§¦å‘æ¡ä»¶ã€è°ƒæ•´åŠ ä»“å’Œå‡ä»“é€»è¾‘ç­‰ã€‚è¿™ä¸€ç‰¹æ€§è®© Hummingbot æˆä¸ºä¸€ä¸ªçµæ´»çš„é‡åŒ–äº¤æ˜“æ¡†æ¶ã€‚ 6. çµæ´»çš„éƒ¨ç½²æ–¹å¼Hummingbot æ”¯æŒæœ¬åœ°éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œé€‚åº”ä¸åŒç”¨æˆ·çš„éœ€æ±‚ã€‚å®ƒèƒ½å¤Ÿä¸å„ç±»å¤–éƒ¨æ•°æ®æºã€äº¤æ˜“æ‰€çš„ API æ— ç¼é›†æˆï¼Œé€‚åˆäºå¤§è§„æ¨¡å®æ—¶äº¤æ˜“éœ€æ±‚ã€‚ Hummingbot çš„åº”ç”¨åœºæ™¯Hummingbot æ”¯æŒçš„ç­–ç•¥å¹¿æ³›é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š å¸‚åœºåšå¸‚ï¼ˆMarket Makingï¼‰ï¼š æä¾›æµåŠ¨æ€§ï¼Œé€šè¿‡åœ¨ä¹°å–ä¹‹é—´çš„ä»·å·®è·åˆ©ã€‚ å¥—åˆ©äº¤æ˜“ï¼ˆArbitrageï¼‰ï¼š æŠ“ä½ä¸åŒäº¤æ˜“æ‰€ä¹‹é—´çš„ä»·å·®æœºä¼šè·åˆ©ã€‚ è·¨äº¤æ˜“æ‰€åšå¸‚ï¼ˆCross-Exchange Market Makingï¼‰ï¼š åŒæ—¶åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªäº¤æ˜“æ‰€æŒ‚ä¹°å–å•ï¼Œä»¥æ•æ‰ä»·å·®ã€‚ æ€»ç»“Hummingbot æ˜¯ä¸€ä¸ªé«˜åº¦çµæ´»ä¸”åŠŸèƒ½å¼ºå¤§çš„å¼€æºäº¤æ˜“æœºå™¨äººï¼Œå¯¹å¸Œæœ›å‚ä¸åŠ å¯†è´§å¸é«˜é¢‘äº¤æ˜“çš„å¼€å‘è€…å’Œé‡åŒ–äº¤æ˜“è€…æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå€¼å¾—å°è¯•çš„é€‰æ‹©ã€‚æ— è®ºä½ æ˜¯äº¤æ˜“æ–°æ‰‹ï¼Œè¿˜æ˜¯ç»éªŒä¸°å¯Œçš„é‡åŒ–äº¤æ˜“å‘˜ï¼ŒHummingbot éƒ½æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œé«˜æ•ˆçš„å·¥å…·ï¼ŒåŠ©ä½ åœ¨åŠ å¯†è´§å¸å¸‚åœºä¸­æ•æ‰æ›´å¤šæœºä¼šã€‚","link":"/zh-CN/hummingbot_info/"},{"title":"Hummingbot Install(macos)","text":"Hummingbot Macos å®‰è£…æ­¥éª¤ å®‰è£…è¦æ±‚ï¼ˆmacosï¼‰ Component Specification Operating System MacOS 12+ - Intel x86 or Apple Silicon (M1 / M2 / M3) Memory 4 GB RAM per instance Storage 5 GB HDD space per instance CPU At least 1 vCPU per instance / controller 1xcode-select --install å®˜æ–¹å»ºè®®ç”¨condaåšç¯å¢ƒMacOS with Intel x86: 12curl -o Miniconda3-latest-MacOSX-x86_64.sh https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.shbash Miniconda3-latest-MacOSX-x86_64.sh MacOS with Apple Silicon (M1 / M2 / M3): 12curl -o Miniconda3-latest-MacOSX-x86_64.sh https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.shbash Miniconda3-latest-MacOSX-x86_64.sh 12345git clone https://github.com/hummingbot/hummingbot.gitcd hummingbot./installconda activate hummingbot./compile å¦‚æœå®‰è£…åcondaå‘½ä»¤æ— æ³•è¯†åˆ«ï¼Œå¯ä»¥å°è¯•å°†miniconda3å®‰è£…ç›®å½•ä¸‹çš„binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚/root/.bashrcä¸­æ·»åŠ ï¼šexport PATH=&quot;/Users/your_username/miniconda3/bin:$PATH&quot;ç„¶åæ‰§è¡Œsource /root/.bashrcä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚ 1./start.sh å¯åŠ¨ç•Œé¢ åœ¨å‘½ä»¤è¡Œuiç•Œé¢ï¼Œè®¾ç½®å¯†ç åè¿›å…¥ä¸»ç•Œé¢ å‚è€ƒèµ„æ–™ Hummingbot Install(macos)","link":"/zh-CN/hummingbot_install/"},{"title":"Hummingbot ç›®å½•ç»“æ„","text":"Hummingbot ç›®å½•ç»“æ„ å®‰è£…åç›®å½•123456789hummingbot â”£ conf â”£ connectors â”£ strategies â”£ scripts â”£ logs â”£ data â”£ scripts â”£ hummingbot /confï¼šé…ç½®æ–‡ä»¶çš„é€šç”¨æ–‡ä»¶å¤¹ /conf/connectorsï¼šé…ç½® Exchange API å¯†é’¥ /conf/strategiesï¼šé…ç½®ç­–ç•¥æ–‡ä»¶,åœ¨cli-uiä¸­é€šè¿‡createå’Œimportå‘½ä»¤åˆ›å»ºæˆ–å¯¼å…¥ç­–ç•¥ /conf/scriptsï¼šç¼–å†™è„šæœ¬é…ç½®æ–‡ä»¶,create --script-config /logsï¼šè„šæœ¬å’Œç­–ç•¥ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ /dataï¼šç”¨äºè®°å½•è„šæœ¬å’Œç­–ç•¥æ‰§è¡Œçš„äº¤æ˜“çš„ SQLite æ•°æ®åº“å’Œ CSV æ–‡ä»¶ /scriptsï¼šæ­¤æ–‡ä»¶å¤¹åŒ…å«ç¤ºä¾‹è„šæœ¬ï¼Œå¯ä»¥åœ¨æ­¤å¤„æ·»åŠ æ–°è„šæœ¬ï¼Œä»¥ä½¿å…¶å¯ä¾›startå‘½ä»¤ä½¿ç”¨","link":"/zh-CN/hummingbot_post_install/"},{"title":"Hummingbot Strategies v1","text":"Hummingbot å†…ç½®å¾ˆå¤šç­–ç•¥æ¨¡æ¿åˆ†v1/v2ï¼Œç›®å‰ç¤¾åŒºè¡¨ç¤ºå…¨åŠ›å‘å±•v2ç‰ˆçš„ç­–ç•¥ï¼Œv1è™½ç„¶å®˜æ–¹ä¸ç»´æŠ¤äº†ï¼Œä½†æ˜¯ä¸å½±å“æˆ‘ä»¬å­¦ä¹ ï¼› v1çš„ç­–ç•¥åœ¨/hummingbot/strategyç›®å½•é‡Œ ç­–ç•¥ æè¿° pure_market_making Hummingbot çš„åŸå§‹å•å¯¹å¸‚åœºåšå¸‚ç­–ç•¥ cross_exchange_market_making ä¸€ç§é€šè¿‡åœ¨å¦ä¸€ä¸ªäº¤æ˜“æ‰€å¯¹å†²æ¥å‡è½»åº“å­˜é£é™©çš„åšå¸‚ç­–ç•¥ amm_arb ä¸€ç§åˆ©ç”¨ AMM å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ä¸å…¶ä»–äº¤æ˜“æ‰€ä¹‹é—´ä»·æ ¼å·®å¼‚çš„å¥—åˆ©ç­–ç•¥ avellaneda_market_making åŸºäºç»å…¸çš„ Avellaneda-Stoikov è®ºæ–‡çš„å•å¯¹å¸‚åœºåšå¸‚ç­–ç•¥ cross_exchange_mining ç¤¾åŒºç»´æŠ¤çš„äº¤å‰äº¤æ˜“æ‰€åšå¸‚ç­–ç•¥çš„ä¿®æ”¹ç‰ˆ hedge ä½¿ç”¨æ°¸ç»­åˆçº¦å¯¹å†²ç°è´§äº¤æ˜“æ‰€çš„åº“å­˜é£é™© liquidity_mining ä½¿ç”¨å•ä¸€çš„åŸºç¡€å¸æˆ–æŠ¥ä»·å¸åœ¨å¤šä¸ªäº¤æ˜“å¯¹ä¸Šæä¾›æµåŠ¨æ€§ perpetual_market_making ç¤¾åŒºç»´æŠ¤çš„æ°¸ç»­å¸‚åœºåšå¸‚ç­–ç•¥ spot_perpetual_arbitrage åˆ©ç”¨ç°è´§å¸‚åœºä¸æ°¸ç»­åˆçº¦äº¤æ˜“æ‰€ä¹‹é—´çš„ä»·æ ¼å·®å¼‚è¿›è¡Œå¥—åˆ© twap åœ¨ä¸€å®šæ—¶é—´æ®µå†…æ‰¹é‡ä¸‹é™ä»·å• amm-v3-lp åŠ¨æ€ç»´æŠ¤ AMM å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ä¸­çš„åŒºé—´æµåŠ¨æ€§å¤´å¯¸ å‚è€ƒèµ„æ–™ Hummingbot stategies_v1","link":"/zh-CN/hummingbot_strategy_v1/"},{"title":"Hummingbot Strategies v2","text":"ç»„ä»¶v2 å¯¹æ¯” v1 æ¥è¯´ï¼Œæ¶æ„åšäº†è°ƒæ•´ï¼Œå¤šäº†å‡ ä¸ªç»„ä»¶æ›´å¥½çš„å·¥ä½œå’Œè§£è€¦ è„šæœ¬ï¼ˆScriptï¼‰ï¼šæ‰€æœ‰ç­–ç•¥çš„å…¥å£ç‚¹ï¼Œè¿™ä¸ªPythonæ–‡ä»¶è´Ÿè´£åè°ƒæ•´ä¸ªç­–ç•¥çš„æ‰§è¡Œã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç­–ç•¥é€»è¾‘çš„ç®€å•æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªåŠ è½½ä¸€ä¸ªæˆ–å¤šä¸ªæ§åˆ¶å™¨çš„æ–‡ä»¶ã€‚ å¸‚åœºæ•°æ®æä¾›å™¨ï¼ˆMarket Data Providerï¼‰ï¼šç”¨äºè®¿é—®äº¤æ˜“æ‰€çš„å¸‚åœºæ•°æ®çš„å•ä¸€å…¥å£ï¼Œæ¯”å¦‚å†å²OHCLVï¼ˆå¼€ç›˜ä»·ã€é«˜ç‚¹ã€ä½ç‚¹ã€æ”¶ç›˜ä»·ã€æˆäº¤é‡ï¼‰Kçº¿æ•°æ®ã€è®¢å•ç°¿æ•°æ®å’Œäº¤æ˜“è®°å½•ã€‚ æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼šæ ¹æ®ç”¨æˆ·é¢„è®¾ç®¡ç†è®¢å•å’Œä»“ä½ï¼Œç¡®ä¿æ ¹æ®ç­–ç•¥æŒ‡ä»¤ä¸‹å•ã€ä¿®æ”¹æˆ–å–æ¶ˆè®¢å•ã€‚ æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼šåŸºäºç­–ç•¥æ§åˆ¶å™¨çš„åŸºç¡€ç±»ï¼ˆå¦‚æ–¹å‘æ€§ç­–ç•¥æˆ–åšå¸‚ç­–ç•¥ï¼‰å®šä¹‰ä¸€ä¸ªäº¤æ˜“ç­–ç•¥ã€‚ ç»§æ‰¿å…³ç³» V1 ç­–ç•¥ ç­–ç•¥åŸºç±»ï¼ˆStrategyBaseï¼‰ï¼šStrategyBase æ˜¯æ‰€æœ‰ç­–ç•¥çš„ Cython åŸºç±»ï¼Œè€Œ StrategyPyBase ç»§æ‰¿è‡ªå®ƒï¼Œå¹¶ä½œä¸ºæ‰€æœ‰ Python åŸºç¡€ç­–ç•¥çš„æ ¹ç±»ã€‚ V1 è„šæœ¬ï¼ˆScriptsï¼‰ï¼šScriptStrategyBase æ˜¯åœ¨ä¸Šè¿°ç±»çš„åŸºç¡€ä¸Šæ„å»ºçš„ï¼Œåˆ›å»ºç®€å•ç­–ç•¥å˜å¾—æ›´åŠ å®¹æ˜“ã€‚è¿™ä¸ªç±»ç›®å‰ä»ç„¶æ”¯æŒï¼Œä½†åé¢å¯èƒ½ä¼šè¢«å¼ƒç”¨ã€‚æ‰€ä»¥å»ºè®®åœ¨æ–°è„šæœ¬å®ç°ä¸­ä½¿ç”¨ StrategyV2Baseã€‚ æ§åˆ¶å™¨ä¸ V2 è„šæœ¬ V2 ç­–ç•¥åŸºç±»ï¼ˆStrategyV2Baseï¼‰ï¼šStrategyV2Base ç»§æ‰¿è‡ª ScriptStrategyBaseï¼Œä½†å®ƒä½¿ç”¨æ‰§è¡Œå™¨ï¼ˆExecutorsï¼‰æ¥ç®¡ç†è®¢å•ï¼Œè€Œä¸å†é€šè¿‡ buy() / sell() æ–¹æ³•ã€‚æ§åˆ¶å™¨ï¼ˆControllersï¼‰åœ¨æ­¤åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ‰©å±•ï¼Œä½œä¸ºé€šè¿‡äº‹ä»¶é˜Ÿåˆ—æ¾æ•£è€¦åˆçš„é™„åŠ ç»„ä»¶ã€‚ è¯·åŠ¡å¿…ç‰¢è®°ç»§æ‰¿ç»“æ„ï¼Œè¿™ä¼šå¤§å¤§å¸®åŠ©ç†è§£å¦‚ä½•ç¼–å†™è‡ªå·±çš„è‡ªå®šä¹‰ç­–ç•¥ã€‚ å‚è€ƒèµ„æ–™ Hummingbot stategies_v2","link":"/zh-CN/hummingbot_strategy_v2/"},{"title":"Internet Computer (IC)","text":"ICP çš„å…¨ç§°(Internet Computer Protocol) äº’è”ç½‘è®¡ç®—æœºåè®®ï¼Œæ˜¯DFINITY åŸºé‡‘ä¼šï¼ˆhttps://dfinity.orgï¼‰ https://internetcomputer.org/docs/current/home https://github.com/dfinity/sdk æ”¯æŒçš„è¯­è¨€ Motoko Typescript Rust Solidity æ”¯æŒçš„æ¡†æ¶ Juno React Testnets","link":"/zh-CN/ic_hello/"},{"title":"OOæ¨¡å—é›†æˆ Jetcache ç¼“å­˜é—®é¢˜","text":"æ´»åŠ¨Actionå¼€å‘è¿‡ç¨‹ä¸­ç¢°åˆ°ç¼“å­˜ä½¿ç”¨çš„é—®é¢˜ï¼ŒActionä¸­çš„ä»£ç åŸºæœ¬ä»åŸ service ä¸­è¿ç§»ï¼ŒJetcache ç¼“å­˜çš„æ³¨è§£å¯¹Spring å®¹å™¨å†…çš„ç±»ç”Ÿæ•ˆï¼ˆç°åœ¨ä»£ç ä¸­éƒ½ä½œç”¨åœ¨@serviceæ ‡è®°ç±»ä¸­ï¼‰ï¼Œä½†åƒAction è¿™äº›ç±»æ‰‹åŠ¨åˆ›å»ºå‡ºæ¥å®ä¾‹ç¼“å­˜æ³¨è§£å°±å¤±æ•ˆäº†ï¼› æ€è·¯1ï¼š ç®€å•æœ‰æ•ˆçš„æ–¹å¼ï¼Œé€šè¿‡æ˜¾å¼çš„ Api è°ƒç”¨æ¥é›†æˆï¼Œé€šè¿‡æŠ½è±¡ç±»å®šä¹‰å­˜å–ç¼“å­˜åŸºç¡€åŠ¨ä½œï¼Œå­ç±»æ˜¾å¼è°ƒç”¨ï¼Œè¿™ç§æ€è·¯ä¸‹æåˆ°ç¼“å­˜å…¥å£CacheManagerå°±è¡Œï¼Œé…åˆå®˜æ–¹demoã€‚ä»£ç å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041public abstract class AbstractActivityHandlerFacility { protected CacheManager getCacheManager() { return SpringUtil.getBean(CacheManager.class); } private Cache&lt;String, Object&gt; caches; public AbstractActivityHandlerFacility() { QuickConfig qc = QuickConfig.newBuilder(&quot;userCache&quot;) .expire(Duration.ofSeconds(3600)) .loader(this::loadOrderSumFromDatabase) .refreshPolicy(RefreshPolicy.newPolicy(60, TimeUnit.SECONDS).stopRefreshAfterLastAccess(100, TimeUnit.SECONDS)) .penetrationProtect(true) .build(); caches = getCacheManager().getOrCreateCache(qc); } protected String getCacheKey(String constantPrefix, ActivityContext context) { return new StringBuilder(constantPrefix) .append(context.getActivityInstance().getActivityCombineInfo().getActivityBaseInfo().getId()) .append(&quot;_&quot;) .append(context.getUserInstance().getUserId()).toString(); } protected RedisService getRedisService() { return SpringUtil.getBean(RedisService.class); } protected void putToCache(String key, Object value, long timeout, TimeUnit timeUnit) { caches.put(key, value, timeout, timeUnit); } protected &lt;T&gt; T getCache(String key) { return (T) caches.get(key); } protected void clearCache(String key) { caches.remove(key); }} å¤‡æ³¨ï¼š QuickConfig æ˜¯jetcache 2.7.x ç‰ˆæœ¬æ‰æœ‰ï¼Œ é¡¹ç›®ä¸­v2.6.7ä¸šåŠ¡ä»£ç ä¸­æ‰‹åŠ¨è°ƒç”¨å­˜å–æ•°æ®ï¼Œä»£ç é‡å¤šäº†50%ï¼ŒåŒæ—¶å¢åŠ äº†ç¼–ç çš„æ€ç»´è´Ÿæ‹…ã€‚ 1234567891011121314151617181920212223242526public ActivityCombineInfo getJoinActivityStatus() { String cacheKey = getCacheKey(CacheConstant.ACTIVITY_USER_JOIN_INFO, context); log.info(&quot;getJoinActivityStatus cacheKey: {}&quot;, cacheKey); ActivityCombineInfo cache = getCache(cacheKey); if (cache == null) { log.info(&quot;Get join activity status from cache, cacheKey: {}&quot;, cacheKey); JoinStatusAction joinStatusAction = getJoinStatusAction(); ActivityCombineInfo&lt;JoinActivityResponse&gt; execute = null; try { execute = joinStatusAction.execute(context); // Put Cache putToCache(cacheKey, execute, 60, TimeUnit.SECONDS); } catch (ActivityActionException e) { log.error(&quot;Join status execute failed: {}&quot;, e.getMessage()); } return execute; } return cache; } æ€è·¯1èƒ½è¾¾åˆ°è¦æ±‚ï¼Œä½†ä¸å¤Ÿä¼˜é›…ï¼Œä¸‡ä¸å¾—å·²æƒ…å†µä¸‹å®åœ¨éš¾ä»¥æ¥å—ã€‚ æ€è·¯2ï¼ˆç›®å‰é‡‡ç”¨ï¼‰ï¼šä¸æ‰“ç ´ç°æœ‰cache çš„ç¼–ç ä½¿ç”¨ä¹ æƒ¯ï¼ŒAction ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨@Cachedã€@CacheInvalidateç­‰æ³¨è§£ã€‚è¦åšåˆ°è¿™ç§ç¨‹åº¦è¿˜æ˜¯è¦å°†Action è°ƒç”¨æ–¹ ActivityHandlerå’Œå®¹å™¨å‹¾æ­ä¸Šï¼Œçœ‹çœ‹ä»£ç æ‰¾æ‰¾æ€è·¯ã€‚ è¿‡ç¨‹spring å®¹å™¨ä¸‹æ³¨è§£å·¥ä½œå¥—è·¯ï¼Œå®¹å™¨ç”Ÿå‘½å‘¨æœŸçš„é’©å­ä¸­è§¦å‘æ‰« package-&gt;åå°„-&gt;æŒ‚åˆ‡é¢-&gt;åŠ¨æ€ä»£ç†ç›®æ ‡å¯¹è±¡ã€‚ç›²çŒœ jetcache ä¹Ÿå·®ä¸å¤šï¼Œåªæ˜¯æ—¶æœºçš„é€‰æ‹©é—®é¢˜ã€‚è€ƒå¤ä¸€å¼ spring çš„å›¾ æºç è§£è¯»ï¼š Maven: com.alicp.jetcache:jetcache-anno:2.6.7 æ³¨è§£å·¥ä½œä»£ç  Maven: com.alicp.jetcache:jetcache-anno-api:2.6.7 æ³¨è§£å£°æ˜ Maven: com.alicp.jetcache:jetcache-core:2.6.7 æ ¸å¿ƒå®ç°ï¼Œæ²¡ä»€ä¹ˆå’Œspringç›¸å…³å†…å®¹ Maven: com.alicp.jetcache:jetcache-autoconfigure:2.6.7 springboot è‡ªåŠ¨è£…é…å¥—è·¯ Maven: com.alicp.jetcache:jetcache-redis:2.6.7 Maven: com.alicp.jetcache:jetcache-starter-redis:2.6.7 æ’¸äº†ä¸‹ä»£ç ï¼Œè·Ÿé¢„æƒ³å·®ä¸å¤š CreateCacheAnnotationBeanPostProcessorï¼Œä½œä¸ºæ—¶æœº å¼€å§‹åˆå§‹åŒ–ç¼“å­˜æ³¨è§£ç›¸å…³çš„å†…å®¹ï¼› å±‚æ¬¡ä¾æ¬¡ï¼š CacheAdvisor -&gt; CachePointcut -&gt;JetCacheInterceptor æœ‰è¿™ä¸‰ä¸ªå°±å…·å¤‡ aop æ¡ä»¶äº†ã€‚ å…³é”®ä»£ç ï¼šé€šè¿‡ProxyFactoryåŠ¨æ€å°†CacheAdvisorç»‡å…¥activityHandler 12345678910public &lt;T&gt; T dynamicCreateActivityHandler(ActivityHandler activityHandler){ ProxyFactory factory = new ProxyFactory(); factory.setTarget(activityHandler); factory.addAdvisor(SpringUtil.getBean(CacheAdvisor.class)); // Error: Set 'exposeProxy' property on Advised to 'true' to make it available, and ensure that AopContext.currentProxy() is invoked in the same thread as the AOP invocation context. // è®¾ç½®æ˜¾å¼æš´éœ²åï¼ŒAopContext.currentProxy()æ‰èƒ½æ­£å¸¸ä½¿ç”¨ factory.setExposeProxy(true); //factory.setInterfaces(JetCacheInterceptor.class); return (T) factory.getProxy();} è°ƒç”¨æ–¹å¼å’ŒåŸæ¥serviceä¸­ä¸€æ · 1234567891011121314151617181920212223242526public class ActionsHandler implements Handler {//çœç•¥ private ActionsHandler _this() { return (ActionsHandler) AopContext.currentProxy(); } @Override public boolean doJoinActivity() { return _this()._doJoinActivity(context); } @CacheInvalidate(name = CacheConstant.ACTIVITY_USER_JOIN_INFO, key = &quot;#context.activityInstance.activityCombineInfo.activityBaseInfo.id + '_' + #context.userInstance.userId&quot; ) private boolean _doJoinActivity(ActivityContext context){ DoJoinAction doJoinAction = getDoJoinAction(); try { return doJoinAction.execute(context); } catch (ActivityActionException e) { log.error(&quot;Do Join execute failed: {}&quot;, e.getMessage()); } return false; } } åŒºåˆ«æ˜¯å¤šç»•2ä¸ªå¼¯ï¼ŒåŸæ¥å£doJoinActivity()è®¾è®¡æ—¶è€ƒè™‘çµæ´»æ€§ï¼Œæ²¡ä½¿ç”¨å½¢å‚è€Œæ˜¯ä½¿ç”¨å®ä¾‹æˆå‘˜ä½œä¸ºå‚æ•°ï¼Œæ³¨è§£ä¸­çš„ key æ— æ³•åŠ¨æ€è®¡ç®—#userIdè¿™ç§å˜é‡ç¿»äº†è§£æé€»è¾‘ï¼Œå…³é”®ä»£ç ExpressionUtil.eval:61 ï¼Œè¿™å—çœ‹ä¼¼ç•™äº†KeyEvaluatorä½œå£å­ç”¨æ¥æ‰©å±•ï¼Œä½†æ˜¯æ²¡æœ‰ç»™ä¸Šä¸‹æ–‡ä¿®Contextæ”¹çš„ç©ºé—´ï¼Œç¿»äº†ä¸€åœˆï¼Œæ— è®¡å¯æ–½ã€‚ ç›®å‰å–å·§æš‚æ—¶ç”¨å†…éƒ¨æ–¹æ³•åŒ…è£…contextï¼Œå‡‘åˆå…ˆç”¨ï¼Œç§è‰ åç»­æ¥æ‹”ã€‚","link":"/zh-CN/jetcache-integration/"},{"title":"NockChain Install(macos)","text":"NockChain å®‰è£…æ­¥éª¤ https://www.nockchain.org/ https://www.nockchain.org/faq/ https://github.com/zorp-corp/nockchain ç¯å¢ƒï¼ˆmacosï¼‰ Component Specification Operating System MacOS 12+ - Intel x86 or Apple Silicon (M1 / M2 / M3) Memory 32 GB RAM å®‰è£…rustç¯å¢ƒ1curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh make build-hoon-all123make build-hoon-all æ„å»ºæ—¥å¿—: build-hoon-all.log make build123make build æ„å»ºæ—¥å¿—: build.log 1./start.sh Leaderå¯åŠ¨ç•Œé¢","link":"/zh-CN/nockchain_install/"},{"title":"BSCèŠ‚ç‚¹åŒºå—ç›‘æ§è„šæœ¬","text":"è„šæœ¬ä¸»è¦ç›‘å¬ç§æœ‰BSCèŠ‚ç‚¹åŒºå—çŠ¶æ€ï¼Œå¦‚å‘ç”ŸåŒºå—æ¼å—è¿‡å¤šï¼Œå‘é€å‘Šè­¦æ¶ˆæ¯åˆ°DDç¾¤ä¸­ï¼Œcarry-coinè°ƒæ•´rpcè®¿é—®ç­–ç•¥ï¼› ç›‘æ§è„šæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123from web3 import Web3import timeimport threadingimport sysimport loggingfrom logging.handlers import TimedRotatingFileHandlerimport osfrom stop_event_trigger import StopEventTrigger# æ—¥å¿—é…ç½®log_dir = &quot;logs&quot;if not os.path.exists(log_dir): os.makedirs(log_dir)app_name=&quot;block_monitor-7.143&quot;can_call=Falsestop_event_trigger = StopEventTrigger()log_file = os.path.join(log_dir, &quot;block_monitor.log&quot;)# åˆ›å»ºä¸€ä¸ªTimedRotatingFileHandlerï¼Œç”¨äºæŒ‰ç…§æ—¥æœŸåˆ‡å‰²æ—¥å¿—æ–‡ä»¶file_handler = TimedRotatingFileHandler(log_file, when=&quot;midnight&quot;, interval=1, backupCount=7, encoding='utf-8')file_handler.setFormatter(logging.Formatter(app_name+' %(asctime)s - %(levelname)s - %(message)s'))# åˆ›å»ºä¸€ä¸ªStreamHandlerï¼Œç”¨äºå°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°console_handler = logging.StreamHandler()console_handler.setFormatter(logging.Formatter('%(asctime)s - %(levelname)s - %(message)s'))# é…ç½®root loggerlogging.basicConfig(level=logging.INFO, handlers=[file_handler, console_handler])from chatbot import DingtalkChatbot# é…ç½® DingTalk æ¶ˆæ¯é€šçŸ¥webhook = &quot;https://oapi.dingtalk.com/robot/send?access_token={æœºå™¨äººTOKEN}&quot;secret = &quot;SECå¼€å¤´å¯†é’¥&quot;dd = DingtalkChatbot(webhook, secret=secret, fail_notice=True)private_rpc_url = &quot;http://ç§æœ‰èŠ‚ç‚¹ip:8545/&quot;# å…¬å…±èŠ‚ç‚¹public_rpc_urls = [ &quot;https://bsc-dataseed.binance.org&quot;, &quot;https://bsc-dataseed1.defibit.io&quot;, &quot;https://bsc-dataseed1.binance.org&quot;, &quot;https://bsc-dataseed2.defibit.io&quot;, &quot;https://bsc-dataseed3.ninicoin.io&quot;]def get_ethereum_block_height(rpc_url): start_time = time.time() # è®°å½•å¼€å§‹æ—¶é—´ web3 = Web3(Web3.HTTPProvider(rpc_url)) block_height = web3.eth.block_number end_time = time.time() # è®°å½•ç»“æŸæ—¶é—´ elapsed_time = end_time - start_time logging.info(f&quot;èŠ‚ç‚¹ {rpc_url} å½“å‰åŒºå—é«˜åº¦: {block_height}ï¼ŒæŸ¥è¯¢è€—æ—¶: {elapsed_time:.3f}ç§’&quot;) return block_heightdef send_dingtalk_message(message): dd.send_text(msg=message)def monitor_block_height(private_rpc_url, public_rpc_urls): inspection_timer = 0 # åˆå§‹åŒ–å·¡æ£€è®¡æ—¶å™¨ï¼Œå•ä½ä¸ºç§’ while True: try: my_block_height = get_ethereum_block_height(private_rpc_url) # è·å–æ‰€æœ‰èŠ‚ç‚¹çš„åŒºå—é«˜åº¦ public_block_heights = [get_ethereum_block_height(url) for url in public_rpc_urls] logging.info(f&quot;ç§æœ‰èŠ‚ç‚¹é«˜åº¦:{my_block_height} æ‰€æœ‰èŠ‚ç‚¹çš„åŒºå—é«˜åº¦: {public_block_heights}&quot;) # æ‰¾åˆ°æœ€å¤§çš„åŒºå—é«˜åº¦ max_block_height = max(public_block_heights) logging.info(f&quot;æœ€å¤§åŒºå—é«˜åº¦: {max_block_height}&quot;) # æ¯”å¯¹èŠ‚ç‚¹æ˜¯å¦é¢†å…ˆ # å¦‚æœç§æœ‰èŠ‚ç‚¹çš„åŒºå—é«˜åº¦å°äºæœ€å¤§åŒºå—é«˜åº¦ï¼Œå¹¶ä¸”åŒºå—å·®å¼‚å¤§äº3 åˆ™å‘é€è­¦å‘Š diff_height = max_block_height - my_block_height if my_block_height &lt; max_block_height and diff_height &gt; 3: # if my_block_height &lt; max_block_height: currentTime = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()) message = f&quot;{app_name}ç§æœ‰èŠ‚ç‚¹ {my_block_height} ä½äºäºå…¶ä»–èŠ‚ç‚¹ï¼Œæœ€å¤§åŒºå—é«˜åº¦ä¸º {max_block_height}ï¼Œå·®å¼‚:{diff_height} æ—¶é—´ {currentTime}&quot; logging.warning(message) # ä½¿ç”¨è­¦å‘Šçº§åˆ«çš„æ—¥å¿— send_dingtalk_message(message) if can_call: stop_event_trigger.pin_point_and_stop_engine_event() # æ¯éš”10åˆ†é’Ÿå‘é€ä¸€æ¬¡å·¡æ£€è®°å½• if inspection_timer &gt;= 1800: currentTime = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()) inspection_message = f&quot;{app_name} å·¡æ£€è®°å½•ï¼šç§æœ‰èŠ‚ç‚¹ {my_block_height}ï¼Œ&quot; inspection_message += f&quot;å…¬å…±èŠ‚ç‚¹æœ€å¤§åŒºå—é«˜åº¦: {max_block_height}ï¼Œ&quot; inspection_message += f&quot;æ—¶é—´ {currentTime}&quot; logging.info(inspection_message) send_dingtalk_message(inspection_message) inspection_timer = 0 # é‡ç½®è®¡æ—¶å™¨ except Exception as e: logging.error(f&quot;å‘ç”Ÿé”™è¯¯ï¼š{e}&quot;) time.sleep(5) inspection_timer += 5 # æ¯æ¬¡å¾ªç¯å¢åŠ è®¡æ—¶å™¨çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’if __name__ == &quot;__main__&quot;: # è¯»å–å‘½ä»¤è¡Œä¼ å…¥å‚æ•° if len(sys.argv) &gt; 1: app_name = sys.argv[1] if app_name is None: app_name = &quot;block_monitor&quot; if len(sys.argv) &gt; 2: canCall = sys.argv[2] if canCall is None: canCall = False if can_call: stop_event_trigger.pin_point_and_stop_engine_event(app_name) logging.info(f&quot;app_name: {app_name}&quot;) t = threading.Thread(target=monitor_block_height, args=(private_rpc_url, public_rpc_urls)) t.start() t.join() å¯åŠ¨è„šæœ¬ 1234567891011121314#!/bin/bash# å¢åŠ ä¸€ä¸ªå¯åŠ¨å‚æ•°ï¼Œapp_name,å¦‚ä¼ å…¥åˆ™ä½¿ç”¨ä¼ å…¥çš„app_nameï¼Œå¹¶åŠ å…¥åˆ°å¯åŠ¨å‘½ä»¤ä¸­app_name=$1# è®¾ç½®å¯åŠ¨æ—¥å¿—æ–‡ä»¶è·¯å¾„start_log_file=&quot;logs/start_script.log&quot;# å¯åŠ¨ Python è„šæœ¬ï¼Œå¹¶å°†è¾“å‡ºä¿å­˜åˆ°å¯åŠ¨æ—¥å¿—æ–‡ä»¶nohup python3.10 monitor.py $app_name &gt; $start_log_file 2&gt;&amp;1 &amp;# è·å–å¯åŠ¨çš„ Python è¿›ç¨‹çš„PIDå¹¶ä¿å­˜åˆ°æ–‡ä»¶ä¸­echo $! &gt; pid_file.txtecho &quot;è„šæœ¬å·²åœ¨åå°è¿è¡Œã€‚PIDä¸ºï¼š$(cat pid_file.txt)&quot; åœæ­¢è„šæœ¬ 12345678910111213141516#!/bin/bash# è·å–ä¹‹å‰ä¿å­˜çš„PIDæ–‡ä»¶pid_file=&quot;pid_file.txt&quot;pid=$(cat $pid_file 2&gt;/dev/null)if [ -z &quot;$pid&quot; ]; then echo &quot;æœªæ‰¾åˆ°PIDã€‚è„šæœ¬å¯èƒ½æœªåœ¨è¿è¡Œã€‚&quot;else # ç»ˆæ­¢Pythonè¿›ç¨‹ kill -TERM $pid echo &quot;PIDä¸º $pid çš„è„šæœ¬å·²åœæ­¢ã€‚&quot; # åˆ é™¤PIDæ–‡ä»¶ rm $pid_filefi","link":"/zh-CN/node-monitor/"},{"title":"python networkx","text":"networkx networkxæ˜¯ä¸€ä¸ªç”¨Pythonè¯­è¨€å¼€å‘çš„å›¾è®ºä¸å¤æ‚ç½‘ç»œå»ºæ¨¡å·¥å…·,åˆ©ç”¨networkxå¯ä»¥ä»¥æ ‡å‡†åŒ–å’Œéæ ‡å‡†åŒ–çš„æ•°æ®æ ¼å¼å­˜å‚¨ç½‘ç»œã€ç”Ÿæˆå¤šç§éšæœºç½‘ç»œå’Œç»å…¸ç½‘ç»œã€åˆ†æç½‘ç»œç»“æ„ã€å»ºç«‹ç½‘ç»œæ¨¡å‹ã€è®¾è®¡æ–°çš„ç½‘ç»œç®—æ³•ã€è¿›è¡Œç½‘ç»œç»˜åˆ¶ç­‰ã€‚networkxæ”¯æŒåˆ›å»ºç®€å•æ— å‘å›¾ã€æœ‰å‘å›¾å’Œå¤šé‡å›¾ï¼ˆmultigraphï¼‰;å†…ç½®è®¸å¤šæ ‡å‡†çš„å›¾è®ºç®—æ³•ï¼ŒèŠ‚ç‚¹å¯ä¸ºä»»æ„æ•°æ®ï¼›æ”¯æŒä»»æ„çš„è¾¹å€¼ç»´åº¦ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œç®€å•æ˜“ç”¨ æ–°å¥—åˆ©å¼•æ“ä½¿ç”¨ networkx æ¥å®ç°.åŸºæœ¬ç›®æ ‡: ç»™å‡ºä»»æ„2ä¸ª currency, è®¡ç®—ä¸¤ä¸ª currency ä¹‹é—´çš„åˆ©æ¶¦æœ€å¤§çš„äº¤æ˜“è·¯å¾„(è·¨cex) åŸºç¡€çš„å›¾ç»“æ„ Graphï¼šæ— å¤šé‡è¾¹æ— å‘å›¾ DiGraphï¼šæ— å¤šé‡è¾¹æœ‰å‘å›¾ MultiGraphï¼šæœ‰å¤šé‡è¾¹æ— å‘å›¾ MultiDiGraphï¼šæœ‰å¤šé‡è¾¹æœ‰å‘å›¾ é—®é¢˜ç‚¹ åŸºç¡€ç»“æ„çš„é€‰æ‹© ç”¨ä»€ä¹ˆæ¥ä½œä¸ºnode çš„weight å“ªäº›å¯ä»¥ä½œä¸º edge æŠ€æœ¯æ ˆ Python3.12 ccxt pandas asyncio configparser sqlalchemy loguru redis pytz networkx aiomonitor fastapi uvicorn websockets ç¨‹åºç›®å½•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120.â”œâ”€â”€ Readme-dev.mdâ”œâ”€â”€ Readme.mdâ”œâ”€â”€ __init__.pyâ”œâ”€â”€ alertâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ alert_manager.pyâ”‚ â””â”€â”€ chatbot.pyâ”œâ”€â”€ bugs.mdâ”œâ”€â”€ build.shâ”œâ”€â”€ configâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ config.iniâ”‚ â”œâ”€â”€ config_dev.iniâ”‚ â”œâ”€â”€ config_loader.pyâ”‚ â”œâ”€â”€ config_prod.iniâ”‚ â””â”€â”€ gateio-bsc.jsonâ”œâ”€â”€ coreâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ arbitrage_opportunity_finder.pyâ”‚ â”œâ”€â”€ graph_builder.pyâ”‚ â”œâ”€â”€ path_finder.pyâ”‚ â”œâ”€â”€ profit_calculator.pyâ”‚ â””â”€â”€ simple_opportunity_finder.pyâ”œâ”€â”€ daily_report.pyâ”œâ”€â”€ dataâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ binance_data_fetcher.pyâ”‚ â”œâ”€â”€ bitget_data_fetcher.pyâ”‚ â”œâ”€â”€ bithumb_data_fetcher.pyâ”‚ â”œâ”€â”€ bybit_data_fetcher.pyâ”‚ â”œâ”€â”€ coin_mapping.pyâ”‚ â”œâ”€â”€ data_collector.pyâ”‚ â”œâ”€â”€ data_collector_mp.pyâ”‚ â”œâ”€â”€ data_launcher.pyâ”‚ â”œâ”€â”€ data_launcher_mp.pyâ”‚ â”œâ”€â”€ gate_data_fetcher.pyâ”‚ â”œâ”€â”€ huobi_data_fetcher.pyâ”‚ â”œâ”€â”€ kucoin_data_fetcher.pyâ”‚ â”œâ”€â”€ lbank_data_fetcher.pyâ”‚ â”œâ”€â”€ mexc_data_fetcher.pyâ”‚ â”œâ”€â”€ okx_data_fetcher.pyâ”‚ â”œâ”€â”€ process_manager.pyâ”‚ â”œâ”€â”€ redis_data_store.pyâ”‚ â”œâ”€â”€ redis_monitor.pyâ”‚ â”œâ”€â”€ test_coin_mapping.pyâ”‚ â”œâ”€â”€ upbit_data_fetcher.pyâ”‚ â”œâ”€â”€ utils.pyâ”‚ â”œâ”€â”€ whitebit_data_fetcher.pyâ”‚ â””â”€â”€ xt_data_fetcher.pyâ”œâ”€â”€ db.pyâ”œâ”€â”€ dev.shâ”œâ”€â”€ exchangesâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ extâ”‚ â”‚ â”œâ”€â”€ __init__.pyâ”‚ â”‚ â”œâ”€â”€ ext_bithumb.pyâ”‚ â”‚ â”œâ”€â”€ gate_ext.pyâ”‚ â”‚ â”œâ”€â”€ gate_ext_no_sync.pyâ”‚ â”‚ â”œâ”€â”€ test_bithumb.pyâ”‚ â”‚ â”œâ”€â”€ test_gate.pyâ”‚ â”‚ â””â”€â”€ upbit.pyâ”‚ â””â”€â”€ initialize.pyâ”œâ”€â”€ imgâ”‚ â”œâ”€â”€ bithumb-menu.pngâ”‚ â”œâ”€â”€ left-menu-0.pngâ”‚ â”œâ”€â”€ left-menu-1.pngâ”‚ â””â”€â”€ readme.mdâ”œâ”€â”€ korean_coin_carry.egg-infoâ”‚ â”œâ”€â”€ PKG-INFOâ”‚ â”œâ”€â”€ SOURCES.txtâ”‚ â”œâ”€â”€ dependency_links.txtâ”‚ â”œâ”€â”€ requires.txtâ”‚ â””â”€â”€ top_level.txtâ”œâ”€â”€ main.pyâ”œâ”€â”€ mev-bot.solâ”œâ”€â”€ requirements.txtâ”œâ”€â”€ setup.pyâ”œâ”€â”€ start.shâ”œâ”€â”€ stop.shâ”œâ”€â”€ symbols.dbâ”œâ”€â”€ testâ”‚ â”œâ”€â”€ __init__.pyâ”‚ â”œâ”€â”€ symbols.dbâ”‚ â”œâ”€â”€ test_ai.pyâ”‚ â”œâ”€â”€ test_ai_2.pyâ”‚ â”œâ”€â”€ test_alert.pyâ”‚ â”œâ”€â”€ test_arbitrage_graph.pyâ”‚ â”œâ”€â”€ test_asyncio.pyâ”‚ â”œâ”€â”€ test_asyncio_2.pyâ”‚ â”œâ”€â”€ test_binance.pyâ”‚ â”œâ”€â”€ test_bithumb.pyâ”‚ â”œâ”€â”€ test_config.pyâ”‚ â”œâ”€â”€ test_core.pyâ”‚ â”œâ”€â”€ test_currency_conversion.pyâ”‚ â”œâ”€â”€ test_data_collector.pyâ”‚ â”œâ”€â”€ test_gateio.pyâ”‚ â”œâ”€â”€ test_many_exchange_fetch_ticker.pyâ”‚ â”œâ”€â”€ test_many_exchange_fetch_ticker2.pyâ”‚ â”œâ”€â”€ test_math.pyâ”‚ â”œâ”€â”€ test_multiprocessing.pyâ”‚ â”œâ”€â”€ test_networkx.pyâ”‚ â”œâ”€â”€ test_redis.pyâ”‚ â”œâ”€â”€ test_symbols.pyâ”‚ â”œâ”€â”€ test_symbols_to_db.pyâ”‚ â”œâ”€â”€ test_tg-bot.pyâ”‚ â”œâ”€â”€ test_triangle.pyâ”‚ â”œâ”€â”€ test_upbit.pyâ”‚ â”œâ”€â”€ test_upbit_private.pyâ”‚ â”œâ”€â”€ test_withdraw_deposit.pyâ”‚ â””â”€â”€ upbit_gateio_intersection.csvâ”œâ”€â”€ tradeâ”‚ â””â”€â”€ celery_config.pyâ””â”€â”€ web â”œâ”€â”€ app.py â””â”€â”€ static â””â”€â”€ index.html ç•Œé¢123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469import networkx as nxfrom loguru import loggerimport datetimeimport tracebackimport jsonfrom data.redis_data_store import RedisDataStorageclass SimpleArbitrageGraph: # é»˜è®¤çš„äº¤æ˜“æ‰€æ‰‹ç»­è´¹é…ç½® DEFAULT_FEE_CONFIG = { 'binance': {'buy': 0.001, 'sell': 0.001, &quot;withdraw&quot;: 0.001}, # Binance ç°è´§æ‰‹ç»­è´¹ç‡ 'upbit': {'buy': 0.0004, 'sell': 0.0004, &quot;withdraw&quot;: 0.001}, # Upbit ç°è´§æ‰‹ç»­è´¹ç‡ 'bithumb': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, # Bithumb ç°è´§æ‰‹ç»­è´¹ç‡ 'gate': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'okx': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'mexc': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'bitget': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'bybit': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'xt': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'lbank': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, 'huobi': {'buy': 0.002, 'sell': 0.002, &quot;withdraw&quot;: 0.001}, } def __init__(self, fee_config=None): &quot;&quot;&quot; åˆå§‹åŒ–å¥—åˆ©å›¾æ„å»ºå™¨ fee_config: äº¤æ˜“æ‰€æ‰‹ç»­è´¹é…ç½®å­—å…¸ï¼Œå¦‚æœä¸ä¼ å…¥åˆ™ä½¿ç”¨é»˜è®¤é…ç½® &quot;&quot;&quot; self.fee_config = fee_config if fee_config is not None else self.DEFAULT_FEE_CONFIG self.graph = nx.MultiDiGraph() # ä½¿ç”¨å¤šé‡æœ‰å‘å›¾ self.opportunity_durations = {} # ç”¨äºè®°å½•å¥—åˆ©æœºä¼šçš„æŒç»­æ—¶é—´ self.redis_client = RedisDataStorage() def addOrUpdateEdge(self, from_currency, to_currency, price, exchange, orderbook=None): &quot;&quot;&quot; æ·»åŠ æˆ–æ›´æ–°äº¤æ˜“å¯¹ï¼ˆè¾¹ï¼‰åˆ°å›¾ä¸­ from_currency: èµ·å§‹å¸ç§ to_currency: ç›®æ ‡å¸ç§ price: å½“å‰äº¤æ˜“å¯¹çš„ä»·æ ¼ exchange: äº¤æ˜“æ‰€åç§° orderbook: è®¢å•ç°¿æ•°æ®ï¼Œæ ¼å¼ä¸ºï¼š{ 'bids': [(price, amount), ...], # ä¹°å•åˆ—è¡¨ï¼ŒæŒ‰ä»·æ ¼é™åº 'asks': [(price, amount), ...], # å–å•åˆ—è¡¨ï¼ŒæŒ‰ä»·æ ¼å‡åº 'timestamp': timestamp # è®¢å•ç°¿æ—¶é—´æˆ³ } &quot;&quot;&quot; # è·å–å½“å‰äº¤æ˜“æ‰€çš„ä¹°å…¥å’Œå–å‡ºæ‰‹ç»­è´¹ fee = self.fee_config[exchange]['buy'] + self.fee_config[exchange]['sell'] # å‡†å¤‡è¾¹çš„å±æ€§ edge_data = { 'weight': price, 'fee': fee, 'exchange': exchange, 'key': exchange, 'orderbook': None } # å¦‚æœæä¾›äº†orderbookæ•°æ®ï¼Œæ·»åŠ åˆ°è¾¹çš„å±æ€§ä¸­å¹¶è®¡ç®—ç»Ÿè®¡ä¿¡æ¯ if orderbook: bids = orderbook['bids'] asks = orderbook['asks'] # è®¡ç®—bidsçš„ç»Ÿè®¡ä¿¡æ¯ try: bids_total_volume = sum(amount for _, amount in bids) bids_weighted_price = sum(price * amount for price, amount in bids) / bids_total_volume if bids_total_volume &gt; 0 else 0 except Exception as e: logger.error(f&quot;Error calculating bids stats: {e}&quot;) logger.error(f&quot;{exchange} {from_currency} - {to_currency} {bids}&quot;) # è®¡ç®—asksçš„ç»Ÿè®¡ä¿¡æ¯ asks_total_volume = sum(amount for _, amount in asks) asks_weighted_price = sum(price * amount for price, amount in asks) / asks_total_volume if asks_total_volume &gt; 0 else 0 edge_data['orderbook'] = { 'bids': bids, 'asks': asks, 'timestamp': orderbook.get('timestamp', None), 'stats': { 'bids': { 'total_volume': bids_total_volume, 'weighted_price': bids_weighted_price }, 'asks': { 'total_volume': asks_total_volume, 'weighted_price': asks_weighted_price } } } logger.debug(f&quot;Added orderbook stats info:{edge_data['orderbook']}&quot;) # å¦‚æœè¾¹å·²å­˜åœ¨ï¼Œæ›´æ–°å®ƒ if self.graph.has_edge(from_currency, to_currency): for edge in self.graph[from_currency][to_currency].values(): if edge['exchange'] == exchange: # æ›´æ–°åŸºæœ¬å±æ€§ edge['weight'] = price edge['fee'] = fee # ç¡®ä¿orderbookå­—æ®µå­˜åœ¨ if 'orderbook' not in edge: edge['orderbook'] = {} # æ›´æ–°orderbookæ•°æ® if orderbook: edge['orderbook'] = edge_data['orderbook'] logger.debug(f&quot;Updated edge from {from_currency} to {to_currency}: price = {price}, fee = {fee}, exchange = {exchange}&quot;) return # å¦‚æœè¾¹ä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°è¾¹ self.graph.add_edge(from_currency, to_currency, **edge_data) logger.debug(f&quot;Added edge from {from_currency} to {to_currency}: price = {price}, fee = {fee}, exchange = {exchange}&quot;) def calculate_cross_exchange_arbitrage(self, base_currency, quote_currency, intermediate_currency, amount, cex_a, cex_b): &quot;&quot;&quot; è®¡ç®—è·¨äº¤æ˜“æ‰€å¥—åˆ©æœºä¼š base_currency: åŸºç¡€å¸ç§ï¼ˆå¦‚BTCï¼‰ quote_currency: æŠ¥ä»·å¸ç§ï¼ˆå¦‚USDTï¼‰ intermediate_currency: ä¸­é—´å¸ç§ï¼ˆå¦‚KRWï¼‰ amount: äº¤æ˜“é‡‘é¢ï¼ˆä»¥quote_currencyè®¡ä»·ï¼‰ cex_a: äº¤æ˜“æ‰€Açš„åç§° cex_b: äº¤æ˜“æ‰€Bçš„åç§° return: (å¥—åˆ©æœºä¼šè¯¦ç»†ä¿¡æ¯å­—å…¸, å¥—åˆ©è·¯å¾„æè¿°) &quot;&quot;&quot; # æ£€æŸ¥äº¤æ˜“æ‰€Aä¸­æ˜¯å¦å­˜åœ¨ç›´æ¥äº¤æ˜“å¯¹ if not self.graph.has_edge(base_currency, quote_currency): logger.debug(f&quot;åœ¨äº¤æ˜“æ‰€{cex_a}ä¸­æœªæ‰¾åˆ°{base_currency}/{quote_currency}äº¤æ˜“å¯¹&quot;) return None, &quot;&quot;,&quot;&quot; # åœ¨äº¤æ˜“æ‰€Aä¸­è®¡ç®—å¯ä»¥ä¹°å…¥çš„base_currencyæ•°é‡ base_amount = None cost_in_a = amount cost_edge = None cost_counter_price = None for edge in self.graph[base_currency][quote_currency].values(): if edge['exchange'] == cex_a: # æ£€æŸ¥orderbookæ•°æ® if 'orderbook' in edge and edge['orderbook'] and 'asks' in edge['orderbook'] : # è·å–asksçš„ç»Ÿè®¡æ•°æ® asks_stats = edge['orderbook']['stats']['asks'] # æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å–å•æ·±åº¦ if asks_stats['total_volume'] &lt; amount: logger.warning(f&quot;è®¢å•æ·±åº¦ä¸è¶³ï¼šéœ€è¦{amount} {quote_currency}ï¼Œä½†åªæœ‰{asks_stats['total_volume']} {quote_currency}çš„æ·±åº¦&quot;) return None, &quot;&quot;,&quot;&quot; # ä½¿ç”¨åŠ æƒå¹³å‡ä»·æ ¼è®¡ç®—å¯ä¹°å…¥æ•°é‡ weighted_price = asks_stats['weighted_price'] cost_counter_price = weighted_price base_amount = amount / (weighted_price * (1 + edge['fee'])) else: cost_counter_price = edge['weight'] # å¦‚æœæ²¡æœ‰orderbookæ•°æ®ï¼Œä½¿ç”¨æ™®é€šä»·æ ¼ base_amount = amount / (edge['weight'] * (1 + edge['fee'])) cost_edge = edge logger.debug(f&quot;åœ¨{cex_a}ä¸­ç”¨{amount} {quote_currency}å¯ä»¥ä¹°å…¥{base_amount} {base_currency}&quot;) break if base_amount is None: logger.debug(f&quot;åœ¨äº¤æ˜“æ‰€{cex_a}ä¸­æœªæ‰¾åˆ°{base_currency}/{quote_currency}äº¤æ˜“å¯¹&quot;) return None, &quot;&quot;,&quot;&quot; # æ£€æŸ¥äº¤æ˜“æ‰€Bä¸­çš„è½¬æ¢è·¯å¾„ try: # ç¬¬ä¸€æ­¥ï¼šè®¡ç®—åœ¨äº¤æ˜“æ‰€Bä¸­å°†base_currencyè½¬æ¢ä¸ºintermediate_currency base_to_intermediate_edge = None if not self.graph.has_edge(base_currency, intermediate_currency): logger.warning(f&quot;åœ¨äº¤æ˜“æ‰€{cex_b}ä¸­æœªæ‰¾åˆ°{base_currency}/{intermediate_currency}äº¤æ˜“å¯¹&quot;) return None, &quot;&quot;,&quot;&quot; for edge in self.graph[base_currency][intermediate_currency].values(): if edge['exchange'] == cex_b: base_to_intermediate_edge = edge break if base_to_intermediate_edge is None: logger.warning(f&quot;åœ¨äº¤æ˜“æ‰€{cex_b}ä¸­æœªæ‰¾åˆ°{base_currency}/{intermediate_currency}äº¤æ˜“å¯¹&quot;) return None, &quot;&quot;,&quot;&quot; # ç¬¬äºŒæ­¥ï¼šè®¡ç®—åœ¨äº¤æ˜“æ‰€Bä¸­å°†intermediate_currencyè½¬æ¢ä¸ºquote_currency intermediate_to_quote_edge = None for edge in self.graph[intermediate_currency][quote_currency].values(): if edge['exchange'] == cex_b: intermediate_to_quote_edge = edge break if intermediate_to_quote_edge is None: logger.warning(f&quot;åœ¨äº¤æ˜“æ‰€{cex_b}ä¸­æœªæ‰¾åˆ°{intermediate_currency}/{quote_currency}äº¤æ˜“å¯¹&quot;) return None, &quot;&quot;,&quot;&quot; # æ‰“å°è¯¦ç»†çš„äº¤æ˜“è·¯å¾„ä¿¡æ¯ logger.debug(f&quot;äº¤æ˜“è·¯å¾„è¯¦æƒ…:&quot;) logger.debug(f&quot;ç¬¬ä¸€æ­¥: åœ¨{cex_a}ä¸­ä¹°å…¥{amount} {base_currency}&quot;) logger.debug(f&quot;ç¬¬äºŒæ­¥: åœ¨{cex_b}ä¸­å°†{base_currency}è½¬æ¢ä¸º{intermediate_currency}&quot;) logger.debug(f&quot;ç¬¬ä¸‰æ­¥: åœ¨{cex_b}ä¸­å°†{intermediate_currency}è½¬æ¢ä¸º{quote_currency}&quot;) # è®¡ç®—åœ¨äº¤æ˜“æ‰€Bä¸­çš„è½¬æ¢åé‡‘é¢ # ç¬¬ä¸€æ¬¡è½¬æ¢ï¼šbase_currency -&gt; intermediate_currency base_to_intermediate_price = None if 'orderbook' in base_to_intermediate_edge and base_to_intermediate_edge['orderbook'] and 'asks' in base_to_intermediate_edge['orderbook']: # æ£€æŸ¥bidsæ·±åº¦ bids_stats = base_to_intermediate_edge['orderbook']['stats']['bids'] if bids_stats['total_volume'] &lt; base_amount: logger.warning(f&quot;è®¢å•æ·±åº¦ä¸è¶³ï¼šéœ€è¦å–å‡º{base_amount} {base_currency}ï¼Œä½†åªæœ‰{bids_stats['total_volume']} {base_currency}çš„æ·±åº¦&quot;) return None, &quot;&quot;,&quot;&quot; # ä½¿ç”¨åŠ æƒå¹³å‡ä»·æ ¼è®¡ç®— weighted_price = bids_stats['weighted_price'] base_to_intermediate_price = weighted_price intermediate_amount = base_amount * weighted_price * (1 - base_to_intermediate_edge['fee']) else: base_to_intermediate_price = base_to_intermediate_edge['weight'] intermediate_amount = base_amount * base_to_intermediate_edge['weight'] * (1 - base_to_intermediate_edge['fee']) intermediate_to_quote_price = None # ç¬¬äºŒæ­¥è½¬æ¢ï¼šintermediate_currency -&gt; quote_currency if 'orderbook' in intermediate_to_quote_edge and intermediate_to_quote_edge['orderbook'] and 'asks' in intermediate_to_quote_edge['orderbook']: # æ£€æŸ¥bidsæ·±åº¦ bids_stats = intermediate_to_quote_edge['orderbook']['stats']['bids'] if bids_stats['total_volume'] &lt; intermediate_amount: logger.warning(f&quot;è®¢å•æ·±åº¦ä¸è¶³ï¼šéœ€è¦å–å‡º{intermediate_amount} {intermediate_currency}ï¼Œä½†åªæœ‰{bids_stats['total_volume']} {intermediate_currency}çš„æ·±åº¦&quot;) return None, &quot;&quot;,&quot;&quot; # ä½¿ç”¨åŠ æƒå¹³å‡ä»·æ ¼è®¡ç®— weighted_price = bids_stats['weighted_price'] intermediate_to_quote_price = weighted_price final_amount = intermediate_amount * weighted_price * (1 - intermediate_to_quote_edge['fee']) else: intermediate_to_quote_price = intermediate_to_quote_edge['weight'] final_amount = intermediate_amount * intermediate_to_quote_edge['weight'] * (1 - intermediate_to_quote_edge['fee']) # è®¡ç®—åˆ©æ¶¦ï¼ˆä»¥quote_currencyè®¡ä»·ï¼‰ profit = final_amount - cost_in_a profit_percentage = (profit / cost_in_a) * 100 # æ„å»ºè¯¦ç»†çš„å¥—åˆ©ä¿¡æ¯å­—å…¸ arbitrage_info = { 'currencies': { 'base': base_currency, 'quote': quote_currency, 'intermediate': intermediate_currency }, 'exchanges': { 'buy': cex_a, 'sell': cex_b }, 'amounts': { 'initial_quote': amount, 'base': base_amount, 'intermediate': intermediate_amount, 'final': final_amount }, 'profit': { 'amount': profit, 'percentage': profit_percentage } } from_config = self.redis_client.get_data_by_exchange(cex_a, base_currency, &quot;config&quot;) if from_config and 'config' in from_config: networks_info = json.loads(from_config['config']) networks_desc = [] for network in networks_info.get('networks', []): status = [] if network.get('deposit'): status.append('å¯å……å€¼') if network.get('withdraw'): status.append('å¯æç°') if network.get('fee'): status.append(&quot;è´¹ç”¨:&quot;+str(network.get(&quot;fee&quot;))) if status: networks_desc.append(f&quot;{network['network']}({', '.join(status)})&quot;) networks_description = ' | '.join(networks_desc) if networks_desc else 'æ— ç½‘ç»œä¿¡æ¯' else: networks_description = 'æ— ç½‘ç»œé…ç½®' # ä¿®æ”¹è·¯å¾„æè¿°éƒ¨åˆ† # æ„å»ºè·¯å¾„æè¿°ï¼Œæ·»åŠ æ•°æ®æœ‰æ•ˆæ€§æ£€æŸ¥ def get_orderbook_stats(edge, side): if edge and 'orderbook' in edge and edge['orderbook'] and \\ 'stats' in edge['orderbook'] and side in edge['orderbook']['stats']: stats = edge['orderbook']['stats'][side] return f&quot;ğŸ“Šæ·±åº¦: {stats['total_volume']:.8f} å‡ä»·: {stats['weighted_price']:.8f}&quot; return &quot;ğŸ“Šæ·±åº¦æ•°æ®ä¸å¯ç”¨&quot; path_description = ( f&quot;å¥—åˆ©è·¯å¾„:\\n&quot; f&quot;æ­¥éª¤1: {cex_a} {base_currency}/{quote_currency} ğŸ”µä¹°å…¥ä»·æ ¼={cost_counter_price:.8f} &quot; f&quot;ä¹°å…¥{base_amount:.8f} {base_currency}(èŠ±è´¹{amount} {quote_currency}) &quot; f&quot;{get_orderbook_stats(cost_edge, 'asks')}\\n&quot; f&quot;æ­¥éª¤2: {cex_b} {base_currency}/{intermediate_currency} ğŸŸ¢å–å‡ºä»·æ ¼={base_to_intermediate_price:.8f} &quot; f&quot;è½¬æ¢å¾—åˆ°{intermediate_amount:.8f}{intermediate_currency} &quot; f&quot;{get_orderbook_stats(base_to_intermediate_edge, 'bids')}\\n&quot; f&quot;æ­¥éª¤3: {cex_b} {intermediate_currency}/{quote_currency} ğŸŸ¢å–å‡ºä»·æ ¼={intermediate_to_quote_price:.8f} &quot; f&quot;è½¬æ¢å¾—åˆ°{final_amount:.8f}{quote_currency} &quot; f&quot;{get_orderbook_stats(intermediate_to_quote_edge, 'bids')}\\n&quot; f&quot;ğŸ’°æ€»ç»“: åˆ©æ¶¦={profit:.8f}{quote_currency} (ğŸ”¥{profit_percentage:.2f}%)\\n&quot; f&quot;â°æ—¶é—´: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}&quot; ) # logger.info(path_description) return arbitrage_info, path_description, networks_description except Exception as e: logger.error(f&quot;è®¡ç®—å¥—åˆ©è·¯å¾„æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}, cex_a:{cex_a} base:{base_currency} quote:{quote_currency} cex_b:{cex_b} &quot;) logger.error(f&quot;Error traceback:\\n{traceback.format_exc()}&quot;) return None, &quot;&quot;,&quot;&quot; def find_all_cross_exchange_arbitrage(self, amount=1.0, min_profit_threshold=0.001,exchange_router_config=None): &quot;&quot;&quot; è‡ªåŠ¨å‘ç°æ‰€æœ‰å¯èƒ½çš„è·¨äº¤æ˜“æ‰€å¥—åˆ©æœºä¼š amount: äº¤æ˜“é‡‘é¢ï¼ˆä»¥base_currencyè®¡ä»·ï¼‰ min_profit_threshold: æœ€å°åˆ©æ¶¦é˜ˆå€¼ï¼Œä½äºæ­¤é˜ˆå€¼çš„å¥—åˆ©æœºä¼šå°†è¢«å¿½ç•¥ exchange_router_config: äº¤æ˜“æ‰€è·¯ç”±é…ç½®ï¼Œæ ¼å¼ä¸ºï¼š{ 'from_exchanges': ['binance', 'okx'], # å…è®¸çš„ä¹°å…¥äº¤æ˜“æ‰€åˆ—è¡¨ 'to_exchanges': ['upbit', 'bithumb'] # å…è®¸çš„å–å‡ºäº¤æ˜“æ‰€åˆ—è¡¨ } return: æ‰€æœ‰å¯è¡Œçš„å¥—åˆ©æœºä¼šåˆ—è¡¨ &quot;&quot;&quot; opportunities = [] # è·å–æ‰€æœ‰å¸ç§å’Œäº¤æ˜“æ‰€ currencies = list(self.graph.nodes()) exchanges = list(set(edge['exchange'] for _, _, edge in self.graph.edges(data=True))) # å®šä¹‰å…è®¸çš„æŠ¥ä»·å¸ç§ allowed_quote_currencies = ['USDT', 'KRW'] # æ”¶é›†å½“å‰æœ‰æ•ˆçš„å¥—åˆ©æœºä¼šæ ‡è¯† current_opportunities = set() # éå†æ‰€æœ‰å¯èƒ½çš„å¸ç§ç»„åˆå’Œäº¤æ˜“æ‰€ç»„åˆ for base_currency in currencies: for quote_currency in allowed_quote_currencies: if base_currency == quote_currency: continue # éå†é…ç½®çš„äº¤æ˜“æ‰€ç»„åˆ for cex_a in exchange_router_config['from_exchanges']: for cex_b in exchange_router_config['to_exchanges']: if cex_a == cex_b: continue # éå†æ‰€æœ‰å¯èƒ½çš„ä¸­é—´å¸ç§ # for intermediate_currency in currencies: for intermediate_currency in ['KRW']: if intermediate_currency in [base_currency, quote_currency]: continue # è®¡ç®—å¥—åˆ©æœºä¼š profit, path_description,networks_description = self.calculate_cross_exchange_arbitrage( base_currency, quote_currency, intermediate_currency, amount, cex_a, cex_b ) profit_value=profit['profit']['amount'] if profit and profit['profit']['amount'] else 0.00000000 # ç”Ÿæˆå¥—åˆ©æœºä¼šçš„å”¯ä¸€æ ‡è¯† opp_key = f&quot;{base_currency}-{quote_currency}-{intermediate_currency}-{cex_a}-{cex_b}&quot; # å¦‚æœåˆ©æ¶¦è¶…è¿‡é˜ˆå€¼ï¼Œè®°å½•å¥—åˆ©æœºä¼š # if profit_value and (profit_value / (amount * self.graph[base_currency][quote_currency][cex_a]['weight'])) &gt; min_profit_threshold: # å¦‚æœæœ‰åˆ©æ¶¦ä¸”æœ‰è·¯å¾„æè¿°ï¼Œè®°å½•ä¸ºæœ‰æ•ˆå¥—åˆ©æœºä¼š show_all_profit = self.redis_client.get_generic_data(&quot;config&quot;, &quot;show_all_profit&quot;) if (show_all_profit or profit_value &gt; 0) and path_description: current_time = datetime.datetime.now() current_opportunities.add(opp_key) # æ›´æ–°æŒç»­æ—¶é—´è®°å½• if opp_key not in self.opportunity_durations: self.opportunity_durations[opp_key] = { 'first_seen': current_time, 'last_seen': current_time, 'duration': 0 } else: self.opportunity_durations[opp_key]['last_seen'] = current_time self.opportunity_durations[opp_key]['duration'] = \\ (current_time - self.opportunity_durations[opp_key]['first_seen']).total_seconds() opportunity = { 'base_currency': base_currency, 'quote_currency': quote_currency, 'intermediate_currency': intermediate_currency, 'cex_a': cex_a, 'cex_b': cex_b, 'profit': profit_value, 'duration': self.opportunity_durations[opp_key]['duration'], 'path_description': path_description, 'network_description': networks_description } opportunities.append(opportunity) logger.info(f&quot;å‘ç°æ–°çš„å¥—åˆ©æœºä¼šï¼š{base_currency}-&gt;{intermediate_currency}-&gt;{quote_currency} | {cex_a}-&gt;{cex_b} | åˆ©æ¶¦ï¼š{profit_value:.8f}&quot;) # æ¸…ç†å·²ä¸å­˜åœ¨çš„å¥—åˆ©æœºä¼šè®°å½• expired_opportunities = set(self.opportunity_durations.keys()) - current_opportunities for opp_key in expired_opportunities: del self.opportunity_durations[opp_key] logger.debug(f&quot;ç§»é™¤å·²æ¶ˆå¤±çš„å¥—åˆ©æœºä¼šè®°å½•ï¼š{opp_key}&quot;) # æŒ‰åˆ©æ¶¦æ’åº opportunities.sort(key=lambda x: x['profit'], reverse=True) return opportunities def format_opportunities_to_markdown(self, opportunities): &quot;&quot;&quot; å°†å¥—åˆ©æœºä¼šåˆ—è¡¨è½¬æ¢ä¸ºmarkdownæ ¼å¼çš„å­—ç¬¦ä¸² opportunities: å¥—åˆ©æœºä¼šåˆ—è¡¨ return: markdownæ ¼å¼çš„å­—ç¬¦ä¸² &quot;&quot;&quot; if not opportunities: return [] # è¿”å›å•ä¸ªå¥—åˆ©æœºä¼šçš„è¡¨æ ¼è¡Œæ•°æ® rows = [] for i, opp in enumerate(opportunities, 1): row = f&quot;| {i} | {opp['base_currency']} | {opp['quote_currency']} | {opp['intermediate_currency']} | &quot; row += f&quot;{opp['cex_a']} | {opp['cex_b']} | {opp['profit']:.8f} {opp['quote_currency']} | {int(opp['duration'])} s |&quot; row += f&quot;{opp['path_description'].replace(&quot;\\n&quot;,&quot;&lt;br&gt;&quot;)} | {opp['network_description']} | &quot; rows.append(row) return rows def analyze_arbitrage_opportunities(self, configs=None): &quot;&quot;&quot; åˆ†æä¸åŒé…ç½®ä¸‹çš„å¥—åˆ©æœºä¼š configs: é…ç½®åˆ—è¡¨ï¼Œæ¯ä¸ªé…ç½®åŒ…å« amountï¼ˆäº¤æ˜“é‡‘é¢ï¼‰å’Œ thresholdï¼ˆåˆ©æ¶¦é˜ˆå€¼ï¼‰ å¦‚æœä¸æä¾›ï¼Œå°†ä½¿ç”¨é»˜è®¤é…ç½® return: (æ˜¯å¦å‘ç°å¥—åˆ©æœºä¼š, æ ¼å¼åŒ–çš„å¥—åˆ©æœºä¼šæè¿°ï¼ˆmarkdownæ ¼å¼ï¼‰) &quot;&quot;&quot; if configs is None: configs = { 'trade':[ {'amount': 1.0, 'threshold': 0.001}, # æ ‡å‡†é…ç½® # {'amount': 0.1, 'threshold': 0.005}, # å°é¢äº¤æ˜“é…ç½® # {'amount': 5.0, 'threshold': 0.0005} # å¤§é¢äº¤æ˜“é…ç½® ], 'exchange_router':{ 'from_exchanges': ['binance'], # å…è®¸çš„ä¹°å…¥äº¤æ˜“æ‰€åˆ—è¡¨ 'to_exchanges': ['upbit', 'bithumb'] # å…è®¸çš„å–å‡ºäº¤æ˜“æ‰€åˆ—è¡¨ } } all_results = [] for config in configs['trade']: logger.info(f&quot;\\nåˆ†æé…ç½®ï¼šäº¤æ˜“é‡‘é¢ = {config['amount']} BTC, åˆ©æ¶¦é˜ˆå€¼ = {config['threshold']*100}%&quot;) opportunities = self.find_all_cross_exchange_arbitrage( amount=config['amount'], min_profit_threshold=config['threshold'], exchange_router_config=configs['exchange_router'] ) # ä½¿ç”¨format_opportunities_to_markdownæ–¹æ³•è·å–è¡¨æ ¼è¡Œæ•°æ® rows = self.format_opportunities_to_markdown(opportunities) all_results.extend(rows) # å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•å¥—åˆ©æœºä¼š if not all_results: return False, &quot;æœªå‘ç°ä»»ä½•å¥—åˆ©æœºä¼šã€‚&quot; # ç”Ÿæˆè¡¨æ ¼å¤´éƒ¨ final_markdown = &quot;| åºå· | åŸºç¡€å¸ç§ | æŠ¥ä»·å¸ç§ | ä¸­é—´å¸ç§ | ä¹°å…¥Cex | å–å‡ºCex | é¢„æœŸåˆ©æ¶¦ | æŒç»­æ—¶é—´ | è¯¦ç»†è·¯å¾„ | ç½‘ç»œä¿¡æ¯ |\\n&quot; final_markdown += &quot;|------|----------|----------|----------|---------|---------|----------|------------|------------|---|\\n&quot; # æ·»åŠ æ‰€æœ‰å¥—åˆ©æœºä¼šæ•°æ® final_markdown += &quot;\\n&quot;.join(all_results) return True, final_markdown","link":"/zh-CN/python_networkx/"},{"title":"Bubble Teaåº”ç”¨ä¸­Tabé”®å¤±æ•ˆé—®é¢˜çš„æ·±åº¦è°ƒè¯•ä¸è§£å†³","text":"Bubble Teaåº”ç”¨ä¸­Tabé”®å¤±æ•ˆé—®é¢˜çš„æ·±åº¦è°ƒè¯•ä¸è§£å†³ Frp Cli UI é—®é¢˜èƒŒæ™¯åœ¨å¼€å‘åŸºäºBubble Teaæ¡†æ¶çš„FRP CLI UIé¡¹ç›®æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªçœ‹ä¼¼ç®€å•ä½†å®é™…å¤æ‚çš„é—®é¢˜ï¼šTabé”®æ— æ³•åœ¨é…ç½®è¡¨å•ä¸­åˆ‡æ¢ç»„ä»¶ã€‚ æŠ€æœ¯æ ˆ æ¡†æ¶: Bubble Tea - Goè¯­è¨€TUIæ¡†æ¶ è¡¨å•åº“: huh - å£°æ˜å¼è¡¨å•ç»„ä»¶ è¯­è¨€: Go 1.21+ é¡¹ç›®æ¶æ„å±‚çº§123ConfigTab (æœ€å¤–å±‚)â”œâ”€â”€ ConfigFormModel (ä¸­é—´å±‚)â””â”€â”€ huh.Form (æœ€å†…å±‚) é—®é¢˜ç°è±¡ âœ… å…¶ä»–é”®ç›˜æ“ä½œæ­£å¸¸ï¼šä¸Šä¸‹ç®­å¤´ã€Enterã€ESCç­‰éƒ½èƒ½æ­£å¸¸å·¥ä½œ âŒ Tabé”®å®Œå…¨æ— å“åº”ï¼šæ— æ³•åœ¨è¡¨å•å­—æ®µé—´åˆ‡æ¢ç„¦ç‚¹ âœ… ç‹¬ç«‹è¡¨å•æµ‹è¯•æ­£å¸¸ï¼šå•ç‹¬æµ‹è¯•huh.Formæ—¶Tabé”®å·¥ä½œæ­£å¸¸ è°ƒè¯•ç­–ç•¥ï¼šå±‚çº§éš”ç¦»æµ‹è¯•æ³•æ ¸å¿ƒæ€è·¯é‡‡ç”¨è‡ªåº•å‘ä¸Šçš„å±‚çº§æµ‹è¯•ï¼Œé€å±‚éªŒè¯æ¯ä¸ªç»„ä»¶çš„Tabé”®åŠŸèƒ½ï¼Œç²¾ç¡®å®šä½é—®é¢˜å±‚çº§ã€‚ æµ‹è¯•å±‚çº§è®¾è®¡ç¬¬ä¸€å±‚ï¼šç›´æ¥huhè¡¨å•æµ‹è¯•12345678910111213func runTabTest() { form := huh.NewForm( huh.NewGroup( huh.NewInput().Key(&quot;name&quot;).Title(&quot;å§“å&quot;), huh.NewInput().Key(&quot;address&quot;).Title(&quot;åœ°å€&quot;), huh.NewInput().Key(&quot;port&quot;).Title(&quot;ç«¯å£&quot;), huh.NewConfirm().Key(&quot;enabled&quot;).Title(&quot;å¯ç”¨&quot;), ), ) p := tea.NewProgram(simpleModel{form: form}) p.Run()} ç»“æœ: âœ… TabåŠŸèƒ½æ­£å¸¸ ç¬¬äºŒå±‚ï¼šBubble TeaåŒ…è£…æµ‹è¯•123456789101112131415161718type simpleModel struct { form *huh.Form}func (m simpleModel) Update(msg tea.Msg) (tea.Model, tea.Cmd) { switch msg := msg.(type) { case tea.KeyMsg: if msg.String() == &quot;ctrl+c&quot; { return m, tea.Quit } } form, cmd := m.form.Update(msg) if f, ok := form.(*huh.Form); ok { m.form = f } return m, cmd} ç»“æœ: âœ… TabåŠŸèƒ½æ­£å¸¸ ç¬¬ä¸‰å±‚ï¼šConfigFormModelæµ‹è¯•12345678func runConfigFormModelTest() { cfg := config.CreateDefaultServerConfig() configForm := ui.NewServerConfigForm(cfg) m := configFormModelTest{configForm: configForm} p := tea.NewProgram(m) p.Run()} ç»“æœ: âœ… TabåŠŸèƒ½æ­£å¸¸ ç¬¬å››å±‚ï¼šConfigTabæµ‹è¯•1234567func runConfigTabTest() { configTab := ui.NewConfigTab() configTab.Focus(true) // è‡ªåŠ¨è¿›å…¥è¡¨å•æ¨¡å¼è¿›è¡Œæµ‹è¯• // ...} ç»“æœ: âŒ TabåŠŸèƒ½å¤±æ•ˆ å…³é”®å‘ç°é€šè¿‡å±‚çº§æµ‹è¯•ç¡®å®šï¼šé—®é¢˜å‡ºç°åœ¨ConfigTabå±‚çº§ï¼ æ·±åº¦è°ƒè¯•ï¼šæ¶ˆæ¯è¿½è¸ªåˆ†ææ¶ˆæ¯æµè¿½è¸ªåˆ›å»ºè¯¦ç»†çš„æ¶ˆæ¯æ—¥å¿—ç³»ç»Ÿï¼Œè¿½è¸ªæ¯ä¸ªæŒ‰é”®äº‹ä»¶çš„å¤„ç†è¿‡ç¨‹ï¼š 1234567891011121314151617181920func (m configTabStep6) Update(msg tea.Msg) (tea.Model, tea.Cmd) { m.msgCount++ // è¯¦ç»†è®°å½•æ¯ä¸ªæ¶ˆæ¯ switch msg := msg.(type) { case tea.KeyMsg: fmt.Printf(&quot;[%d] ğŸ”‘ KeyMsg: %s\\n&quot;, m.msgCount, msg.String()) case tea.WindowSizeMsg: fmt.Printf(&quot;[%d] ğŸ“ WindowSizeMsg: %dx%d\\n&quot;, m.msgCount, msg.Width, msg.Height) default: fmt.Printf(&quot;[%d] ğŸ“¨ Other: %T\\n&quot;, m.msgCount, msg) } // ä¼ é€’ç»™ConfigTabå¹¶è®°å½•è¿”å›ç»“æœ fmt.Printf(&quot;ğŸ“¤ ä¼ é€’æ¶ˆæ¯ç»™ConfigTab: %T\\n&quot;, msg) tab, cmd := m.configTab.Update(msg) fmt.Printf(&quot;ğŸ“¥ ConfigTabè¿”å›cmd: %v\\n&quot;, cmd != nil) return m, cmd} å…³é”®æ—¥å¿—å‘ç°1234567[9] ğŸ”‘ KeyMsg: tabğŸ“¤ ä¼ é€’æ¶ˆæ¯ç»™ConfigTab: tea.KeyMsgğŸ“¥ ConfigTabè¿”å›cmd: true[10] ğŸ“¨ Other: huh.nextFieldMsgğŸ“¤ ä¼ é€’æ¶ˆæ¯ç»™ConfigTab: huh.nextFieldMsgğŸ“¥ ConfigTabè¿”å›cmd: false â† å…³é”®é—®é¢˜ï¼ é—®é¢˜åˆ†æ Tabé”®è¢«æ­£ç¡®å¤„ç†ï¼šConfigTabæ¥æ”¶åˆ°Tabé”®å¹¶è¿”å›äº†å‘½ä»¤ äº§ç”Ÿå†…éƒ¨æ¶ˆæ¯ï¼šhuhè¡¨å•ç”Ÿæˆäº†huh.nextFieldMsgæ¶ˆæ¯ å†…éƒ¨æ¶ˆæ¯è¢«å¿½ç•¥ï¼šConfigTabå¯¹huh.nextFieldMsgè¿”å›äº†false æ ¹å› å®šä½ï¼šæ¶ˆæ¯å¤„ç†ç¼ºé™·é—®é¢˜ä»£ç åˆ†ææŸ¥çœ‹ConfigTabçš„Updateæ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728func (ct *ConfigTab) Update(msg tea.Msg) (Tab, tea.Cmd) { switch msg := msg.(type) { case tea.WindowSizeMsg: // å¤„ç†çª—å£å¤§å°å˜åŒ– ct.SetSize(msg.Width, msg.Height) if ct.currentForm != nil { form, cmd := ct.currentForm.Update(msg) if f, ok := form.(*ConfigFormModel); ok { ct.currentForm = f } return ct, cmd } case tea.KeyMsg: // å¤„ç†é”®ç›˜äº‹ä»¶ if ct.state != ConfigTabMenu &amp;&amp; ct.currentForm != nil { // è¡¨å•æ¨¡å¼ä¸‹ä¼ é€’ç»™è¡¨å•å¤„ç† form, cmd := ct.currentForm.Update(msg) if f, ok := form.(*ConfigFormModel); ok { ct.currentForm = f } return ct, cmd } // èœå•æ¨¡å¼å¤„ç†... } return ct, nil // â† é—®é¢˜æ‰€åœ¨ï¼šå…¶ä»–æ¶ˆæ¯è¢«ç›´æ¥å¿½ç•¥ï¼} æ ¹æœ¬é—®é¢˜ConfigTabåªå¤„ç†WindowSizeMsgå’ŒKeyMsgï¼Œå®Œå…¨å¿½ç•¥äº†å…¶ä»–æ‰€æœ‰æ¶ˆæ¯ç±»å‹ï¼ŒåŒ…æ‹¬huhè¡¨å•åº“çš„å…³é”®å†…éƒ¨æ¶ˆæ¯ï¼š huh.nextFieldMsg - åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå­—æ®µ huh.prevFieldMsg - åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªå­—æ®µ cursor.BlinkMsg - å…‰æ ‡é—ªçƒ ç­‰ç­‰â€¦ Tabé”®å·¥ä½œæµç¨‹12345678910graph TD A[ç”¨æˆ·æŒ‰Tabé”®] --&gt; B[äº§ç”Ÿtea.KeyMsg] B --&gt; C[ConfigTabå¤„ç†KeyMsg] C --&gt; D[ä¼ é€’ç»™ConfigFormModel] D --&gt; E[ä¼ é€’ç»™huh.Form] E --&gt; F[huh.Formè¿”å›huh.nextFieldMsgå‘½ä»¤] F --&gt; G[ConfigTabæ”¶åˆ°huh.nextFieldMsg] G --&gt; H{ConfigTabå¤„ç†?} H --&gt;|ä¿®å¤å‰| I[ç›´æ¥å¿½ç•¥ - Tabå¤±æ•ˆ] H --&gt;|ä¿®å¤å| J[ä¼ é€’ç»™è¡¨å• - Tabç”Ÿæ•ˆ] è§£å†³æ–¹æ¡ˆï¼šå®Œå–„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ä¿®å¤ä»£ç åœ¨ConfigTabçš„Updateæ–¹æ³•ä¸­æ·»åŠ defaultåˆ†æ”¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647func (ct *ConfigTab) Update(msg tea.Msg) (Tab, tea.Cmd) { switch msg := msg.(type) { case tea.WindowSizeMsg: ct.SetSize(msg.Width, msg.Height) if ct.currentForm != nil { form, cmd := ct.currentForm.Update(msg) if f, ok := form.(*ConfigFormModel); ok { ct.currentForm = f } return ct, cmd } case tea.KeyMsg: if !ct.focused { return ct, nil } if ct.state != ConfigTabMenu &amp;&amp; ct.currentForm != nil { // è¡¨å•æ¨¡å¼ - ä¼˜å…ˆå¤„ç†è¡¨å•äº‹ä»¶ switch msg.String() { case &quot;esc&quot;: ct.state = ConfigTabMenu ct.currentForm = nil return ct, nil } form, cmd := ct.currentForm.Update(msg) if f, ok := form.(*ConfigFormModel); ok { ct.currentForm = f } return ct, cmd } // èœå•æ¨¡å¼å¤„ç†... default: // ğŸ”§ å…³é”®ä¿®å¤ï¼šè¡¨å•æ¨¡å¼ä¸‹ä¼ é€’æ‰€æœ‰å…¶ä»–æ¶ˆæ¯ if ct.state != ConfigTabMenu &amp;&amp; ct.currentForm != nil { form, cmd := ct.currentForm.Update(msg) if f, ok := form.(*ConfigFormModel); ok { ct.currentForm = f } return ct, cmd } } return ct, nil} ä¿®å¤æ•ˆæœéªŒè¯123[27] ğŸ“¨ Other: huh.nextFieldMsgğŸ“¤ ä¼ é€’æ¶ˆæ¯ç»™ConfigTab: huh.nextFieldMsgğŸ“¥ ConfigTabè¿”å›cmd: true â† ä¿®å¤æˆåŠŸï¼ æŠ€æœ¯æ€»ç»“ä¸æœ€ä½³å®è·µæ ¸å¿ƒæŠ€æœ¯è¦ç‚¹1. Bubble Teaæ¶ˆæ¯æœºåˆ¶ æ‰€æœ‰äº¤äº’éƒ½æ˜¯æ¶ˆæ¯ï¼šé”®ç›˜ã€é¼ æ ‡ã€å®šæ—¶å™¨ç­‰éƒ½é€šè¿‡æ¶ˆæ¯ä¼ é€’ æ¶ˆæ¯é“¾å®Œæ•´æ€§ï¼šå¿…é¡»ç¡®ä¿æ¶ˆæ¯èƒ½å®Œæ•´ä¼ é€’åˆ°æœ€ç»ˆå¤„ç†è€… å‘½ä»¤ä¸æ¶ˆæ¯ï¼šUpdateæ–¹æ³•è¿”å›çš„Cmdä¼šäº§ç”Ÿæ–°çš„æ¶ˆæ¯ 2. ç»„ä»¶å°è£…åŸåˆ™12345678910111213141516171819202122// âŒ é”™è¯¯ï¼šåªå¤„ç†éƒ¨åˆ†æ¶ˆæ¯ç±»å‹func (c *Component) Update(msg tea.Msg) (tea.Model, tea.Cmd) { switch msg := msg.(type) { case tea.KeyMsg: // åªå¤„ç†é”®ç›˜äº‹ä»¶ } return c, nil // å…¶ä»–æ¶ˆæ¯ä¸¢å¤±}// âœ… æ­£ç¡®ï¼šå®Œæ•´çš„æ¶ˆæ¯ä¼ é€’func (c *Component) Update(msg tea.Msg) (tea.Model, tea.Cmd) { switch msg := msg.(type) { case tea.KeyMsg: // å¤„ç†é”®ç›˜äº‹ä»¶ default: // ä¼ é€’ç»™å­ç»„ä»¶å¤„ç†å…¶ä»–æ¶ˆæ¯ if c.hasSubComponent { return c.subComponent.Update(msg) } } return c, nil} 3. è°ƒè¯•ç­–ç•¥ å±‚çº§éš”ç¦»æµ‹è¯•ï¼šé€å±‚éªŒè¯åŠŸèƒ½ æ¶ˆæ¯è¿½è¸ªï¼šè®°å½•æ¶ˆæ¯æµè½¬è¿‡ç¨‹ æœ€å°å¤ç°ï¼šåˆ›å»ºæœ€ç®€å•çš„å¤ç°åœºæ™¯ å¸¸è§é™·é˜±1. æ¶ˆæ¯å¤„ç†ä¸å®Œæ•´123456// é™·é˜±ï¼šåªå¤„ç†å¸¸è§æ¶ˆæ¯ç±»å‹switch msg := msg.(type) {case tea.KeyMsg, tea.WindowSizeMsg: // å¤„ç†}// é—æ¼ï¼šåº“å†…éƒ¨æ¶ˆæ¯ã€å®šæ—¶å™¨æ¶ˆæ¯ç­‰ 2. çŠ¶æ€ç®¡ç†æ··ä¹±1234// é™·é˜±ï¼šçŠ¶æ€åˆ¤æ–­ä¸å‡†ç¡®if someCondition { return component.Update(msg) // å¯èƒ½åœ¨é”™è¯¯çŠ¶æ€ä¸‹è°ƒç”¨} 3. å‘½ä»¤ä¼ é€’ä¸­æ–­123// é™·é˜±ï¼šå¿½ç•¥å­ç»„ä»¶è¿”å›çš„å‘½ä»¤subModel, _ := c.subComponent.Update(msg) // ä¸¢å¤±äº†cmdreturn c, nil // åº”è¯¥è¿”å›å­ç»„ä»¶çš„cmd æœ€ä½³å®è·µå»ºè®®1. å®Œæ•´çš„æ¶ˆæ¯å¤„ç†æ¨¡å¼1234567891011121314151617181920func (c *Component) Update(msg tea.Msg) (tea.Model, tea.Cmd) { // 1. å¤„ç†ç»„ä»¶ç‰¹æœ‰çš„æ¶ˆæ¯ switch msg := msg.(type) { case tea.KeyMsg: if c.handleSpecialKeys(msg) { return c, nil } case tea.WindowSizeMsg: c.resize(msg) } // 2. ä¼ é€’ç»™å­ç»„ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰ if c.hasActiveSubComponent() { sub, cmd := c.subComponent.Update(msg) c.subComponent = sub return c, cmd } return c, nil} 2. è°ƒè¯•å‹å¥½çš„è®¾è®¡1234567891011121314151617181920type DebugComponent struct { Component debugMode bool msgCount int}func (d *DebugComponent) Update(msg tea.Msg) (tea.Model, tea.Cmd) { if d.debugMode { d.msgCount++ log.Printf(&quot;[%d] Received: %T&quot;, d.msgCount, msg) } model, cmd := d.Component.Update(msg) if d.debugMode { log.Printf(&quot;[%d] Returned cmd: %v&quot;, d.msgCount, cmd != nil) } return model, cmd} 3. æ¸è¿›å¼æµ‹è¯•ç­–ç•¥1234567891011121314// æµ‹è¯•é‡‘å­—å¡”ï¼šä»ç®€å•åˆ°å¤æ‚func TestTabFunctionality(t *testing.T) { // Level 1: åŸºç¡€ç»„ä»¶æµ‹è¯• t.Run(&quot;BasicForm&quot;, testBasicFormTab) // Level 2: åŒ…è£…ç»„ä»¶æµ‹è¯• t.Run(&quot;WrappedForm&quot;, testWrappedFormTab) // Level 3: å¤åˆç»„ä»¶æµ‹è¯• t.Run(&quot;ComplexComponent&quot;, testComplexComponentTab) // Level 4: é›†æˆæµ‹è¯• t.Run(&quot;FullApplication&quot;, testFullApplicationTab)} ç»éªŒæ•™è®­æŠ€æœ¯å±‚é¢ æ¶ˆæ¯ä¼ é€’çš„å®Œæ•´æ€§è‡³å…³é‡è¦ï¼šä»»ä½•æ¶ˆæ¯çš„ä¸¢å¤±éƒ½å¯èƒ½å¯¼è‡´åŠŸèƒ½å¼‚å¸¸ ç»„ä»¶å°è£…è¦è€ƒè™‘é€æ˜æ€§ï¼šä¸Šå±‚ç»„ä»¶ä¸åº”è¯¥é˜»æ–­ä¸‹å±‚ç»„ä»¶éœ€è¦çš„æ¶ˆæ¯ è°ƒè¯•å·¥å…·çš„ä»·å€¼ï¼šè¯¦ç»†çš„æ—¥å¿—å’Œåˆ†å±‚æµ‹è¯•èƒ½å¿«é€Ÿå®šä½é—®é¢˜ æ–¹æ³•è®ºå±‚é¢ ç³»ç»Ÿæ€§æ€ç»´ï¼šå¤æ‚é—®é¢˜éœ€è¦ç³»ç»Ÿæ€§çš„åˆ†ææ–¹æ³• å‡è®¾éªŒè¯ï¼šæ¯ä¸ªå‡è®¾éƒ½è¦é€šè¿‡å®éªŒéªŒè¯ æ¸è¿›å¼è°ƒè¯•ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥ç¼©å°é—®é¢˜èŒƒå›´ å·¥ç¨‹å®è·µ é¢„é˜²èƒœäºæ²»ç–—ï¼šè®¾è®¡æ—¶å°±è¦è€ƒè™‘æ¶ˆæ¯ä¼ é€’çš„å®Œæ•´æ€§ æµ‹è¯•é©±åŠ¨ï¼šä¸ºå…³é”®åŠŸèƒ½ç¼–å†™åˆ†å±‚æµ‹è¯• æ–‡æ¡£è®°å½•ï¼šå¤æ‚é—®é¢˜çš„è§£å†³è¿‡ç¨‹å€¼å¾—è¯¦ç»†è®°å½• æœ¬æ–‡è®°å½•äº†ä¸€æ¬¡çœŸå®çš„æŠ€æœ¯è°ƒè¯•è¿‡ç¨‹ï¼Œå¸Œæœ›å¯¹é‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æœ‰æ‰€å¸®åŠ©ã€‚åœ¨TUIå¼€å‘ä¸­ï¼Œæ¶ˆæ¯ä¼ é€’æœºåˆ¶çš„ç†è§£å’Œæ­£ç¡®å®ç°æ˜¯æˆåŠŸçš„å…³é”®ã€‚","link":"/zh-CN/tab-key-debugging-case-study/"},{"title":"python æ€§èƒ½åˆ†æ","text":"Py-Spy æ˜¯ä¸€ä¸ªç”¨äº Python çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒä½¿ç”¨å †æ ˆè·Ÿè¸ªæ¥æ”¶é›†å’Œæ˜¾ç¤º Python ä»£ç çš„è¿è¡Œæ—¶é—´ã€‚ 12pip install py-spysudo py-spy top --pid 24816 py-spy dump â€“pid 24816 123456789101112131415161718192021222324252627282930313233343536Thread 0x7FF8547494C0 (active): &quot;MainThread&quot; main (data_main.py:36) &lt;module&gt; (data_main.py:40) execfile (_pydev_imps/_pydev_execfile.py:18) _exec (pydevd.py:1570) run (pydevd.py:1563) main (pydevd.py:2252) &lt;module&gt; (pydevd.py:2270)Thread 0x700005C81000 (idle): &quot;pydevd.Writer&quot; wait (threading.py:359) get (queue.py:180) _on_run (_pydevd_bundle/pydevd_comm.py:367) run (_pydevd_bundle/pydevd_comm.py:219) _bootstrap_inner (threading.py:1075) _bootstrap (threading.py:1032)Thread 0x700006C84000 (active): &quot;pydevd.Reader&quot; _on_run (_pydevd_bundle/pydevd_comm.py:291) run (_pydevd_bundle/pydevd_comm.py:219) _bootstrap_inner (threading.py:1075) _bootstrap (threading.py:1032)Thread 0x700007C87000 (idle): &quot;pydevd.CommandThread&quot; wait (threading.py:359) wait (threading.py:655) _on_run (pydevd.py:159) run (_pydevd_bundle/pydevd_comm.py:219) _bootstrap_inner (threading.py:1075) _bootstrap (threading.py:1032)Thread 0x700008C8A000 (idle): &quot;Thread-5 (_run_async_loop)&quot; select (selectors.py:566) _run_once (pydevd_asyncio/pydevd_nest_asyncio.py:263) run_until_complete (pydevd_asyncio/pydevd_nest_asyncio.py:234) _run_async_loop (data/data_collector.py:165) run (threading.py:1012) _bootstrap_inner (threading.py:1075) _bootstrap (threading.py:1032) aiomonitor123456789101112131415def _run_async_loop(self, poll_interval): &quot;&quot;&quot; åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­è¿è¡Œ asyncio äº‹ä»¶å¾ªç¯ &quot;&quot;&quot; try: loop = asyncio.new_event_loop() # åˆ›å»ºæ–°çš„äº‹ä»¶å¾ªç¯ asyncio.set_event_loop(loop) # è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ with aiomonitor.start_monitor(loop): loop.run_until_complete(self._start_async_polling(poll_interval)) logger.info(&quot;[INFO] Async loop stopped.&quot;) except Exception as e: logger.error(f&quot;[ERROR] Async loop encountered an error: {e}&quot;) logger.info(&quot;[INFO] Restarting async loop...&quot;) è¿è¡Œ è¿›è¡Œäº¤äº’ 1python -m aiomonitor.cli","link":"/zh-CN/python_py_spy/"},{"title":"Carry-Coin è®°æœåŠ¡è¿ç§»å’Œæµé‡ä¼˜åŒ–","text":"æœ€è¿‘ContaboæœåŠ¡å™¨é¢‘ç¹æ­»æœºï¼Œå‘é‚®ä»¶ç»™å®˜æ–¹ååº”é—®é¢˜ï¼Œä¸€å¼€å§‹å˜´ç¡¬è¯´æ²¡é—®é¢˜è®©è‡ªæŸ¥ï¼Œæ²Ÿé€š2å¤©åˆæ˜¯æˆªå›¾åˆæ˜¯å„ç§å¼€ç¥¨ï¼Œæœ€åæ‰¿è®¤é—®é¢˜è¯´æŠ€æœ¯å›¢é˜Ÿæ’æŸ¥ä½†æ˜¯ä¸ç»™è§£å†³æ—¶é—´ é‚®ä»¶å›å¤ VNCè¿‡å»çœ‹åˆ° sda3ç¡¬ç›˜ä¸€ç›´æŒ‚ä¸ä¸Š/dev/sda3: recovering journalï¼ŒçŒœæµ‹ä¸æ˜¯ç¡¬ä»¶å­˜å‚¨åäº†å°±æ˜¯è™šæ‹ŸåŒ–å¹³å°æŠ½é£ï¼›å¥½åœ¨é‡å¯5-8æ¬¡å¤§æ¦‚èƒ½è¿›ç³»ç»Ÿä¸€æ¬¡ï¼Œèµ¶ç´§æ‹·æ•°æ®é—ªäººï¼› ç›®å‰éƒ¨ç½²æ¶æ„ åŸæ¥contaboçš„æœºå™¨8u24g,32TTrafficä¸€ä¸ªæœˆ$26, ç›¸åŒé…ç½®å›½å†…å‚å•†çœ‹äº†ä¸€åœˆæ²¡æœ‰ç¾Šæ¯›ï¼Œæœ€åé€‰æ‹©txï¼Œä½†æ˜¯ç›¸åŒé…ç½®æ˜æ˜¾è´µä¸Šå¤©ï¼Œåªèƒ½è°ƒæ•´æ¶æ„å…ˆå¼€å°ä½é…2u4g/90ssdè½»é‡æœåŠ¡å™¨,æŠŠfrontã€serverã€dbå¼„å›æ¥ï¼Œworkeråé¢å†è¯´ï¼› ç¨‹åºè¿ç§»åå¤§é—®é¢˜æ²¡æœ‰ï¼Œæ¯ç§ä¸è¶³å°±æ˜¯å‡ºå£æµé‡å¤ªåƒç´§äº†ï¼Œè½»é‡åº”ç”¨æµé‡åŒ…åªæœ‰2T,è·‘äº†10ä¸ªå°æ—¶æµé‡80å¤šGï¼Œä¸€å¤©æ¯›ä¼°ä¼°200Gï¼› ä¼˜åŒ–è¿‡ç¨‹iftopå¤§æ¦‚è§‚å¯Ÿä¸‹æµé‡å»å‘ï¼Œå…¶å®å¿ƒé‡Œä¹Ÿæœ‰æ•°ï¼Œæ•´æœºå¯¹å¤–ä¸€ä¸ªæ˜¯é€šè¿‡nginxè®¿é—®çš„front è¿™æ˜¯ç»™è‡ªå·±çœ‹çš„å‰ç«¯,è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯mysql,å‡ ä¸ªworkeræ¯ç§’å¤šçº¿ç¨‹è¯»å†™ï¼Œè¿™éƒ¨åˆ†ä¼ è¾“è¿‡ç¨‹ä¸­æµé‡èŠ±è´¹å·¨å¤§ï¼›èµ„æºçš„è¯cpuçš„ä½¿ç”¨ç‡åŸºæœ¬ç»´æŒåœ¨50å·¦å³ï¼Œå†…å­˜40%å·¦å³ï¼Œä¼˜åŒ–ç©ºé—´è¿˜æ˜¯æœ‰çš„ jeecgboot å‰ç«¯è‚¿çš„ä¸è¡Œï¼Œæ‰€ä»¥nginx gzipè¯¥å‹çš„å‹èµ·æ¥,æ”¹äº†åè§‚å¯Ÿç›‘æ§å‘ç°æå‡å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ mysqlæ˜¯å¤§å¤´ï¼Œè¿™å—ç¿»äº†ä¸€äº›ä¼˜åŒ–æ–™å¤§éƒ¨åˆ†éƒ½æ˜¯æŒä¹…åŒ–ä¾§çš„ï¼Œè¡¨å‹ç¼©ä¹‹ç±»çš„ï¼›æ‰€ä»¥æ¢äº†ä¸ªæ€è·¯ï¼Œæ—¢ç„¶æ˜¯ä¼ è¾“è¿‡ç¨‹ä¸­çš„æŸè€—é‚£ä¹ˆå¤§æ¦‚ç‡æ˜¯jdbcé©±åŠ¨çš„äº‹æƒ…ï¼Œè¿™ä¹ˆå¸¸è§„çš„åœºæ™¯åº”è¯¥æœ‰æ”¯æŒï¼› ç¿»äº†mysql-connector-j-8.0.33.jarä»£ç å‘ç°æœç„¶æœ‰æˆcom.mysql.cj.protocol.a.NativeProtocolä¸­æœ‰ä¸ªå­—æ®µuseCompressionå¼€å¯åmysqlçš„ä¼ è¾“è¿‡ç¨‹ä¼šå‹ç¼©ï¼Œä½†æ˜¯é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¯ä»¥åœ¨jdbcè¿æ¥å­—ç¬¦ä¸²åé¢åŠ ä¸ŠuseCompression=trueæ¥å¼€å¯å‹ç¼©ï¼› CompressedPacketSenderå¼€å…³æ‰“å¼€åä¼šä½¿ç”¨com.mysql.cj.protocol.a.CompressedPacketSenderæ¥å‘é€æ•°æ®ï¼› 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697/** * Packet sender implementation for the compressed MySQL protocol. For compressed transmission of multi-packets, split the packets up in the same way as the * uncompressed protocol. We fit up to MAX_PACKET_SIZE bytes of split uncompressed packet, including the header, into an compressed packet. The first packet * of the multi-packet is 4 bytes of header and MAX_PACKET_SIZE - 4 bytes of the payload. The next packet must send the remaining four bytes of the payload * followed by a new header and payload. If the second split packet is also around MAX_PACKET_SIZE in length, then only MAX_PACKET_SIZE - 4 (from the * previous packet) - 4 (for the new header) can be sent. This means the payload will be limited by 8 bytes and this will continue to increase by 4 at every * iteration. * * @param packet * data bytes * @param packetLen * packet length * @param packetSequence * sequence id * @throws IOException * if i/o exception occurs */ public void send(byte[] packet, int packetLen, byte packetSequence) throws IOException { this.compressedSequenceId = packetSequence; // short-circuit send small packets without compression and return if (packetLen &lt; MIN_COMPRESS_LEN) { writeCompressedHeader(packetLen + NativeConstants.HEADER_LENGTH, this.compressedSequenceId, 0); writeUncompressedHeader(packetLen, packetSequence); this.outputStream.write(packet, 0, packetLen); this.outputStream.flush(); return; } if (packetLen + NativeConstants.HEADER_LENGTH &gt; NativeConstants.MAX_PACKET_SIZE) { this.compressedPacket = new byte[NativeConstants.MAX_PACKET_SIZE]; } else { this.compressedPacket = new byte[NativeConstants.HEADER_LENGTH + packetLen]; } PacketSplitter packetSplitter = new PacketSplitter(packetLen); int unsentPayloadLen = 0; int unsentOffset = 0; // loop over constructing and sending compressed packets while (true) { this.compressedPayloadLen = 0; if (packetSplitter.nextPacket()) { // rest of previous packet if (unsentPayloadLen &gt; 0) { addPayload(packet, unsentOffset, unsentPayloadLen); } // current packet int remaining = NativeConstants.MAX_PACKET_SIZE - unsentPayloadLen; // if remaining is 0 then we are sending a very huge packet such that are 4-byte header-size carryover from last packet accumulated to the size // of a whole packet itself. We don't handle this. Would require 4 million packet segments (64 gigs in one logical packet) int len = Math.min(remaining, NativeConstants.HEADER_LENGTH + packetSplitter.getPacketLen()); int lenNoHdr = len - NativeConstants.HEADER_LENGTH; addUncompressedHeader(packetSequence, packetSplitter.getPacketLen()); addPayload(packet, packetSplitter.getOffset(), lenNoHdr); completeCompression(); // don't send payloads with incompressible data if (this.compressedPayloadLen &gt;= len) { // combine the unsent and current packet in an uncompressed packet writeCompressedHeader(unsentPayloadLen + len, this.compressedSequenceId++, 0); this.outputStream.write(packet, unsentOffset, unsentPayloadLen); writeUncompressedHeader(lenNoHdr, packetSequence); this.outputStream.write(packet, packetSplitter.getOffset(), lenNoHdr); } else { sendCompressedPacket(len + unsentPayloadLen); } packetSequence++; unsentPayloadLen = packetSplitter.getPacketLen() - lenNoHdr; unsentOffset = packetSplitter.getOffset() + lenNoHdr; resetPacket(); } else if (unsentPayloadLen &gt; 0) { // no more packets, send remaining unsent data addPayload(packet, unsentOffset, unsentPayloadLen); completeCompression(); if (this.compressedPayloadLen &gt;= unsentPayloadLen) { writeCompressedHeader(unsentPayloadLen, this.compressedSequenceId, 0); this.outputStream.write(packet, unsentOffset, unsentPayloadLen); } else { sendCompressedPacket(unsentPayloadLen); } resetPacket(); break; } else { // nothing left to send (only happens on boundaries) break; } } this.outputStream.flush(); // release reference to (possibly large) compressed packet buffer this.compressedPacket = null; } æ•´ä½“æ€è·¯é«˜æ•ˆåœ°å‘é€æ•°æ®åŒ…ï¼Œæ— è®ºæ˜¯å°åŒ…è¿˜æ˜¯å¤§åŒ…ï¼ŒåŒæ—¶é€šè¿‡å‹ç¼©å‡å°‘ä¼ è¾“æ•°æ®çš„å¤§å°ã€‚å®ƒé€šè¿‡æ‹†åˆ†ã€å‹ç¼©å’Œé€‚å½“çš„åºåˆ—ç®¡ç†ç¡®ä¿æ•°æ®å®Œæ•´å’Œé¡ºåºå‘é€. æ”¹äº†ä»¥åç¨‹åºè·‘èµ·æ¥ï¼Œè¶…å‡ºé¢„æœŸ,æµé‡æ¶ˆè€—å°‘äº†è¿‘50%ï¼Œä»£ä»·æ˜¯cpuæäº†10%å·¦å³ï¼Œåˆ’ç®—ã€‚ å…ˆè·‘ç€ä¸€ä¸ªæœˆåå†çœ‹ã€‚","link":"/zh-CN/traffic_optimization_idea/"},{"title":"zsh ä¸»é¢˜ conda æ ‡ç­¾å¤±æ•ˆ","text":"minicondaå®‰è£…å®Œåï¼Œzshå‘½ä»¤è¡Œä¸»é¢˜ä¸æ˜¾ç¤ºcondaçš„ç¯å¢ƒname ç¼–è¾‘ä¸»é¢˜æ–‡ä»¶ vim ~/.oh-my-zsh/themes/bullet-train.zsh-theme 12345678910111213# Virtualenv: current working virtualenvprompt_virtualenv() { local virtualenv_path=&quot;$VIRTUAL_ENV&quot; # åŠ å…¥Condaç¯å¢ƒå˜é‡åˆ¤æ–­é€»è¾‘ if [[ -n $CONDA_DEFAULT_ENV &amp;&amp; -n $VIRTUAL_ENV_DISABLE_PROMPT ]]; then prompt_segment $BULLETTRAIN_VIRTUALENV_BG $BULLETTRAIN_VIRTUALENV_FG $BULLETTRAIN_CONDA_PREFIX&quot; $(basename $CONDA_DEFAULT_ENV)&quot; elif [[ -n $virtualenv_path &amp;&amp; -n $VIRTUAL_ENV_DISABLE_PROMPT ]]; then prompt_segment $BULLETTRAIN_VIRTUALENV_BG $BULLETTRAIN_VIRTUALENV_FG $BULLETTRAIN_VIRTUALENV_PREFIX&quot; $(basename $virtualenv_path)&quot; elif which pyenv &amp;&gt; /dev/null; then prompt_segment $BULLETTRAIN_VIRTUALENV_BG $BULLETTRAIN_VIRTUALENV_FG $BULLETTRAIN_VIRTUALENV_PREFIX&quot; $(pyenv version | sed -e 's/ (set.*$//' | tr '\\n' ' ' | sed 's/.$//')&quot; fi} ä¿®æ”¹ä¿å­˜. vim ~/.zshrc 1234567# promptå˜é‡ä¸­å¢åŠ BULLETTRAIN_PROMPT_ORDER=( virtualenv #åŠ ä¸Š time dir git) æ‰§è¡Œsource ~/.zshrc","link":"/zh-CN/zsh_add_conda_env_name/"},{"title":"ç†è§£ SSH æ”¹ç«¯å£ä¸ç”Ÿæ•ˆçš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ","text":"é—®é¢˜è¡¨ç° ä¿®æ”¹ /etc/ssh/sshd_config ä¸­çš„ Port ä¾‹å¦‚ Port 3212ã€‚ é‡å¯ SSH æœåŠ¡ï¼šsudo systemctl restart sshdã€‚ ä½¿ç”¨ sudo ss -tnlp | grep sshd å‘ç° SSH ä¾ç„¶ç›‘å¬ 22 ç«¯å£ã€‚ æœåŠ¡å™¨ä¸Šå­˜åœ¨ ssh.socket å•å…ƒï¼Œsystemctl status ssh.socket æ˜¾ç¤ºè¯¥æœåŠ¡å¤„äºæ´»è·ƒçŠ¶æ€ã€‚ æ ¹æœ¬åŸå› ç°ä»£ systemd ç³»ç»Ÿé‡‡ç”¨äº† socket æ¿€æ´»æœºåˆ¶ï¼ˆsocket activationï¼‰ æ¥ç®¡ç† SSH æœåŠ¡ã€‚å…·ä½“æ¥è¯´ï¼š ssh.socket å•å…ƒä¼šæå‰ç›‘å¬ TCP ç«¯å£ï¼ˆé»˜è®¤ 22ï¼‰ï¼Œè€Œä¸æ˜¯ç”± sshd è‡ªå·±ç›‘å¬ã€‚ å½“æœ‰è¿æ¥è¯·æ±‚æ—¶ï¼Œsystemd è§¦å‘å¯åŠ¨ sshd è¿›ç¨‹æ¥å¤„ç†è¿æ¥ã€‚ è¿™æ ·å³ä½¿ä½ ä¿®æ”¹äº† sshd çš„é…ç½®æ–‡ä»¶ï¼Œssh.socket ä»ç„¶åœ¨ç›‘å¬é»˜è®¤çš„ 22 ç«¯å£ï¼Œå¯¼è‡´ç«¯å£ä¿®æ”¹æ— æ•ˆã€‚ ssh.socket çš„ä¼˜ç‚¹ æŒ‰éœ€å¯åŠ¨ sshdï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºã€‚ å¿«é€Ÿå“åº”è¿æ¥è¯·æ±‚ã€‚ æ–¹ä¾¿ systemd é›†ä¸­ç®¡ç†å’Œæ—¥å¿—å®¡è®¡ã€‚ æå‡æœåŠ¡ç¨³å®šæ€§å’Œè‡ªåŠ¨æ¢å¤èƒ½åŠ›ã€‚ è§£å†³æ–¹æ¡ˆæ–¹æ³•ä¸€ï¼šç¦ç”¨ ssh.socketï¼Œä½¿ç”¨ä¼ ç»Ÿ sshd ç›‘å¬ç«¯å£123sudo systemctl disable ssh.socketsudo systemctl stop ssh.socketsudo systemctl restart ssh.service æ–¹æ³•äºŒï¼šä¿®æ”¹ ssh.socket é…ç½®ç›‘å¬æ–°ç«¯å£ ç¼–è¾‘ ssh.socket æ–‡ä»¶ï¼ˆè·¯å¾„ä¸€èˆ¬ä¸º /usr/lib/systemd/system/ssh.socket æˆ– /etc/systemd/system/ssh.socketï¼‰ã€‚ ä¿®æ”¹ [Socket] éƒ¨åˆ†çš„ ListenStream=22 ä¸ºä½ æƒ³è¦çš„ç«¯å£ï¼Œæ¯”å¦‚ ListenStream=3212ã€‚ é‡æ–°åŠ è½½ systemd é…ç½®ï¼š 123sudo systemctl daemon-reloadsudo systemctl restart ssh.socketsudo systemctl restart ssh.service é¢å¤–æç¤º ä½¿ç”¨ ssh.socket æ˜¯ systemd çš„ç°ä»£ç®¡ç†æ–¹å¼ï¼Œé€‚åˆèµ„æºæœ‰é™æˆ–è¿æ¥ä¸é¢‘ç¹çš„æœåŠ¡å™¨ã€‚ ç›´æ¥ç¦ç”¨ ssh.socket æ›´é€‚åˆéœ€è¦è‡ªå®šä¹‰ SSH ç«¯å£çš„åœºæ™¯ï¼Œæ“ä½œæ›´ç®€å•ã€‚ ä¿®æ”¹ç«¯å£åï¼Œåˆ«å¿˜äº†å¼€æ”¾é˜²ç«å¢™ç›¸åº”ç«¯å£ã€‚","link":"/zh-CN/ssh_port_change_failed/"}],"tags":[{"name":"python","slug":"python","link":"/tags/python/"},{"name":"Java","slug":"Java","link":"/tags/Java/"},{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"Architecture","slug":"Architecture","link":"/tags/Architecture/"},{"name":"jasypt","slug":"jasypt","link":"/tags/jasypt/"},{"name":"SpringBoot","slug":"SpringBoot","link":"/tags/SpringBoot/"},{"name":"æ—¥å¿—æ¸…ç†","slug":"æ—¥å¿—æ¸…ç†","link":"/tags/%E6%97%A5%E5%BF%97%E6%B8%85%E7%90%86/"},{"name":"Bubble Tea","slug":"Bubble-Tea","link":"/tags/Bubble-Tea/"},{"name":"huh","slug":"huh","link":"/tags/huh/"},{"name":"Frp Cli UI","slug":"Frp-Cli-UI","link":"/tags/Frp-Cli-UI/"},{"name":"miniconda","slug":"miniconda","link":"/tags/miniconda/"},{"name":"ComfyUI","slug":"ComfyUI","link":"/tags/ComfyUI/"},{"name":"Bash","slug":"Bash","link":"/tags/Bash/"},{"name":"PID","slug":"PID","link":"/tags/PID/"},{"name":"è¿›ç¨‹ç®¡ç†","slug":"è¿›ç¨‹ç®¡ç†","link":"/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"},{"name":"Freebie hunting","slug":"Freebie-hunting","link":"/tags/Freebie-hunting/"},{"name":"HummingBot","slug":"HummingBot","link":"/tags/HummingBot/"},{"name":"Internet Computer","slug":"Internet-Computer","link":"/tags/Internet-Computer/"},{"name":"IC","slug":"IC","link":"/tags/IC/"},{"name":"Jetcache","slug":"Jetcache","link":"/tags/Jetcache/"},{"name":"NockChain","slug":"NockChain","link":"/tags/NockChain/"},{"name":"bsc","slug":"bsc","link":"/tags/bsc/"},{"name":"optimization","slug":"optimization","link":"/tags/optimization/"},{"name":"zsh","slug":"zsh","link":"/tags/zsh/"},{"name":"SSH","slug":"SSH","link":"/tags/SSH/"},{"name":"Linux","slug":"Linux","link":"/tags/Linux/"},{"name":"systemd","slug":"systemd","link":"/tags/systemd/"},{"name":"ssh.socket","slug":"ssh-socket","link":"/tags/ssh-socket/"}],"categories":[{"name":"CarryCoin","slug":"CarryCoin","link":"/categories/CarryCoin/"},{"name":"Golang","slug":"Golang","link":"/categories/Golang/"},{"name":"ComfyUI","slug":"ComfyUI","link":"/categories/ComfyUI/"},{"name":"TUIå¼€å‘","slug":"Golang/TUIå¼€å‘","link":"/categories/Golang/TUI%E5%BC%80%E5%8F%91/"},{"name":"Freebie hunting","slug":"Freebie-hunting","link":"/categories/Freebie-hunting/"},{"name":"HummingBot","slug":"HummingBot","link":"/categories/HummingBot/"},{"name":"Spring","slug":"Spring","link":"/categories/Spring/"},{"name":"NockChain","slug":"NockChain","link":"/categories/NockChain/"}],"pages":[{"title":"About Me","text":"å§“å Gavinæ€§åˆ« ç”·å·¥ä½œç»éªŒ 10years+å­¦å† æœ¬ç§‘å­¦æ ¡ åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ - è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯é‚®ç®± blackjackhoho@gmail.comTelegram @blackjackhohoGithub https://github.com/konbluesky 14å¹´çš„è€å¼€å‘,åœ¨å¯»æ‰¾ä¸€ä¸ªæ¿€æƒ…ã€å¼€æ”¾ã€å’Œè°çš„å›¢é˜Ÿï¼Œä¸å¿—åŒé“åˆçš„ä¼™ä¼´å…±åŒåˆ›é€ å“è¶Šçš„é¡¹ç›®ã€‚ åŸºç¡€æŠ€èƒ½ ç²¾é€šJava,å¤šå¹´çš„ä¼ä¸šçº§Javaç¨‹åºå¼€å‘ç»éªŒ,å…·å¤‡å®Œå–„çš„æ¶æ„ç†è®º,å¯¹å„ç±»å¼€æºæ¡†æ¶æœ‰Coverå’ŒHackèƒ½åŠ›; ç†Ÿæ‚‰åŸç”ŸHDPã€CDHå¤§æ•°æ®å¹³å°ï¼Œä»¥åŠå¤§æ•°æ®åœºæ™¯ä¸‹å„ç§æ¶æ„ï¼šLambdaã€Kappaã€å¾®æœåŠ¡ç­‰æ¶æ„ï¼Œåœ¨æ»¡è¶³é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§ï¼Œå¯æ‰©å±•ï¼Œå®‰å…¨æ€§ç­‰æ¶æ„ç‰¹æ€§æ–¹é¢æœ‰ä¸°å¯Œçš„ç»éªŒï¼› ç†Ÿç»ƒä½¿ç”¨Nodejsã€Pythonã€Shellç­‰åŠ¨æ€è¯­è¨€,èƒ½å¤Ÿçµæ´»è¿ç”¨è¿™äº›è¯­è¨€è§£å†³é¡¹ç›®ä¸­çš„ç¢ç‰‡åŒ–é—®é¢˜,å¦‚åŸå‹éªŒè¯ã€æ•°æ®å¤„ç†ã€è‡ªåŠ¨åŒ–è„šæœ¬ç­‰ï¼› æ“…é•¿OOP&amp;OOD,ç†Ÿæ‚‰UMLæœ‰å¤æ‚ç³»ç»Ÿ0-1è®¾è®¡å’Œ1-Nçš„é‡æ„ç»éªŒï¼› ç†Ÿæ‚‰DevOPSï¼ŒSREï¼Œæµ‹è¯•ä½“ç³»çš„æ­å»ºï¼ŒåŒ…æ‹¬TDDå¼€å‘æµç¨‹ï¼ŒCI/CDã€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç›‘æ§ä¸æŠ¥è­¦ç³»ç»Ÿï¼Œæ•…éšœæ’æŸ¥åŠå¿«é€Ÿå“åº”æœºåˆ¶ çƒ­çˆ±å¼€æºé¡¹ç›®ã€‚ Web3æŠ€èƒ½ æœ‰EVMã€Hyperladger Fabricã€Sonalaçš„ç½‘ç»œå»ºè®¾ç»éªŒï¼› æœ‰dAppså¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰EVMçš„å¸¸ç”¨å¼€å‘åº“web3jã€web3.jsã€ether.js,hardhat,openzeppelin; ç†Ÿæ‚‰å¸¸è§çš„å…±è¯†ç®—æ³•PoWï¼ŒPoS, BFT; ç†Ÿæ‚‰å¸¸ç”¨é‡åŒ–ç­–ç•¥ï¼ˆARï¼ŒTFï¼ŒMRï¼ŒSAï¼ŒMMï¼‰,äº†è§£Hummingbotç­‰å¼€æºé‡åŒ–æ¡†æ¶ ç†Ÿæ‚‰å„ç±»DeFiäº§å“ï¼Œå¦‚Uniswap v2/v3åè®®ã€PancakeSwapï¼› ç†Ÿæ‚‰å„ç±»Cex API; Web2æŠ€èƒ½ Webå¼€å‘: SpringBootã€SpringMvcã€JFinalã€Nginxã€Tomcatã€Jettyã€Djangoã€Flask ORM: Mybatisã€Hibernateã€JPA, ç½‘ç»œåè®®: Mqttã€TCP/IPã€HTTP1/2ã€DNSã€SSHã€WebSocket æ•°æ®å­˜å‚¨: SQL(Oracleã€DB2ã€Mysqlã€H2ã€SQLite),NoSQL(Redisã€LevelDb) æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQã€Kafkaã€RocketMQ å¾®æœåŠ¡: SpringCloud å®¹å™¨åŒ–: K8sã€Docker æ“ä½œç³»ç»Ÿ: Macos,Centos,ubuntu é¡¹ç›®MemeSniperFour.meme Tokenå‘å°„è·Ÿå•äº¤æ˜“ç³»ç»Ÿæ¡†æ¶: Python,web3,orjson,pydanticåŠŸèƒ½: æ”¯æŒ Token ä¸€é”®å‘å°„ã€é•œåƒå‘å°„ã€‚ æ”¯æŒ æŠ¢ä¹°ã€è·Ÿå•ã€æŠ¢å–ï¼Œä»¥åŠåŒ¹é…è®¢å•è§„åˆ™è®¾ç½®ã€‚ Cex&lt;-&gt;Cex å¤šè·¯å¾„å¥—åˆ©ç›‘æ§ç³»ç»ŸåŸºäºNetworkX å¤šé‡æœ‰å‘å›¾å®æ—¶è®¡ç®—,ä¸åŒCexä¹‹é—´ä¸åŒå¸ç§çš„å¥—åˆ©æœºä¼šç›‘æ§ç¨‹åºæ¥å…¥äº¤æ˜“æ‰€: Upbit,Bithumb,Binance,Gateio,Bitget,Bybitæ¡†æ¶: Python,NetworkX,CCXT,RedisåŠŸèƒ½: æ”¯æŒä»¥KRW,BNB,ETHä¸ºä¸»è¦è®¡ä»·äº¤æ˜“å¯¹ä¹‹é—´çš„ä¸‰è§’å¥—åˆ©æœºä¼šå’Œå¤šè·¯å¾„å¥—åˆ©æœºä¼šçš„å‘ç°ç¨‹åº Cex&lt;-&gt;Cex èµ„é‡‘è´¹ç‡å¥—åˆ©ç³»ç»Ÿæ¡†æ¶: Python,web3,orjson,pydantic Cex&lt;-&gt;Dex Tokenå…¨è‡ªåŠ¨å¥—åˆ©ç¨‹åºåŸºäºJavaçš„åˆ†å¸ƒå¼æ¶æ„çš„tokenå¥—åˆ©ç¨‹åºï¼Œç›®å‰è¦†ç›–ç½‘ç»œï¼šSolanaã€EVMï¼ˆL1/L2ï¼‰ä¸»è¦ä½¿ç”¨ARç­–ç•¥ï¼Œå»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆDEXï¼‰å’Œä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆCEXï¼‰ä¹‹é—´çš„ä»·æ ¼å·®å¼‚å®ç°å¥—åˆ©äº¤æ˜“ã€‚ç›®å‰Cexæ”¯æŒbinanace,okex,mexc,gateio,xt;Dexæ”¯æŒä¸»è¦é“¾bsc(UniswapV2/3,PancakeV2/3),Solana,odosï¼› carry-config-generator(python) æŠ€æœ¯æ ˆ:web3,pandas ; å·¥ç¨‹ä¸»è¦è´Ÿè´£æ ¹æ®dex,cexï¼Œç¬¬ä¸‰æ–¹ï¼š1inch,odos,dexscreener æ•°æ®ï¼Œè¿›è¡Œæ•°æ®åˆ†ææœ€ç»ˆç”Ÿæˆå¥—åˆ©é…ç½®ï¼› carry-core (Java) æŠ€æœ¯æ ˆï¼šJdk17,Maven,Spring,Rxjava,Guava ä¸€ä¸ªåŸºäºJavaçš„å¥—åˆ©æ ¸å¿ƒç¨‹åºï¼Œdex&lt;-&gt;cexå¥—åˆ©é€»è¾‘çš„é¡¶å±‚æŠ½è±¡SwapEngineï¼ŒSwapStategy, ArbitrageProcessor,CenterExchange,DecenterExchanage,SwapProtocol ç­‰; carry-worker (Java) æŠ€æœ¯æ ˆ: Springboot3.2.5,Xchange,Web3j,RxJava3,Guavaç­‰ï¼› å·¥ç¨‹åŸºäºcoreå®ç°çš„ä¸åŒdex,cexçš„ç›‘æ§ã€ddå‘Šè­¦ã€ddé€šçŸ¥ã€å…¨è‡ªåŠ¨ä¹°å–é€»è¾‘ï¼› æ€§èƒ½è¡¨ç° Metric Value Average RT &lt; 50ms Concurrency 150-200 TPS 1200 - 1500 requests/sec CPU Utilization â‰ˆ 95% RAM Usage â‰ˆ 90% High IO 500MB/s read/write Error Rate &lt; 0.1% carry-protocol-adapter(Nodejs) åŸºäºUniswap-sdk ,jupiter-swap-api(solana)å¼€å‘çš„å¥—åˆ©åè®®é€‚é…å™¨ï¼Œé€‚é…v2/v3è¯¢ä»·ï¼› carry-web-front (Nodejs) æŠ€æœ¯æ ˆ: Vue3.0+TypeScript+Vite5+Ant-Design-Vueç­‰ å·¥ç¨‹ä¸»è¦ç®¡ç†å¹³å°çš„å‰ç«¯é¡µé¢ï¼ŒåŒ…æ‹¬å¥—åˆ©å¼€å…³ã€çº¿ä¸Šé…ç½®ã€äº¤æ˜“æ•°æ®ç›‘æ§ï¼Œé“¾ä¸Šæ•°æ®ç›‘æ§æŠ¥è¡¨ç­‰ï¼› carry-web-server (Java) æŠ€æœ¯æ ˆ: Spring Cloud Alibaba, Mysql, ç®¡ç†å¹³å°çš„åç«¯æœåŠ¡ï¼›","link":"/about/"},{"title":"","text":"google-site-verification: googlea7f41c35f95da755.html","link":"/googlea7f41c35f95da755"}]}